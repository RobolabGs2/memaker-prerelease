var ba=Object.defineProperty;var va=(r,e,t)=>e in r?ba(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Te=(r,e,t)=>(va(r,typeof e!="symbol"?e+"":e,t),t);import{S as we,i as ye,s as $e,c as Ce,J as ce,K as Qn,v as De,L as er,j as ne,l as S,M as _n,o as O,p as H,u as Re,g as Fe,a as Ne,N as We,t as y,b as k,O as gn,P as tr,Q as ke,E as P,F as B,G as M,R as qe,H as z,e as J,h as Q,z as x,T as nr,U as tt,V as Ie,W as pt,X as Ae,B as Ge,w as He,Y as $a,Z as yt,y as wn,f as se,m as oe,_ as wa,d as ue,k as fe,$ as Fn,A as lt,a0 as Ls,a1 as ya,a2 as Ea,a3 as xs,n as je,C as _e,q as st,a4 as At,a5 as ka,a6 as ge,a7 as be,a8 as Zt,a9 as ht,r as Tt,I as zr,aa as Aa}from"../chunks/index.773389e6.js";import{w as Pn}from"../chunks/index.5639c31c.js";var vi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function $i(r,e,t){const n=r.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function Sr(r){let e,t=[r[10]],n={};for(let i=0;i<t.length;i+=1)n=ce(n,t[i]);return{c(){e=Qn(r[9]),this.h()},l(i){e=er(i,r[9],{}),ne(e).forEach(S),this.h()},h(){_n(e,n)},m(i,s){O(i,e,s)},p(i,s){n=We(t,[s&16&&i[10]]),_n(e,n)},d(i){i&&S(e)}}}function wi(r){let e=r[9],t,n=r[9]&&Sr(r);return{c(){n&&n.c(),t=De()},l(i){n&&n.l(i),t=De()},m(i,s){n&&n.m(i,s),O(i,t,s)},p(i,s){i[9]?e?$e(e,i[9])?(n.d(1),n=Sr(i),n.c(),n.m(t.parentNode,t)):n.p(i,s):(n=Sr(i),n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null),e=i[9]},d(i){i&&S(t),n&&n.d(i)}}}function Sa(r){let e,t,n,i,s=r[4],o=[];for(let c=0;c<s.length;c+=1)o[c]=wi($i(r,s,c));const a=r[8].default,l=Ce(a,r,r[7],null);let u=[vi,r[5],{width:r[2]},{height:r[2]},{stroke:r[1]},{"stroke-width":r[3]},{class:n=`tabler-icon tabler-icon-${r[0]} ${r[6].class??""}`}],f={};for(let c=0;c<u.length;c+=1)f=ce(f,u[c]);return{c(){e=Qn("svg");for(let c=0;c<o.length;c+=1)o[c].c();t=De(),l&&l.c(),this.h()},l(c){e=er(c,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var h=ne(e);for(let m=0;m<o.length;m+=1)o[m].l(h);t=De(),l&&l.l(h),h.forEach(S),this.h()},h(){_n(e,f)},m(c,h){O(c,e,h);for(let m=0;m<o.length;m+=1)o[m].m(e,null);H(e,t),l&&l.m(e,null),i=!0},p(c,[h]){if(h&16){s=c[4];let m;for(m=0;m<s.length;m+=1){const p=$i(c,s,m);o[m]?o[m].p(p,h):(o[m]=wi(p),o[m].c(),o[m].m(e,t))}for(;m<o.length;m+=1)o[m].d(1);o.length=s.length}l&&l.p&&(!i||h&128)&&Re(l,a,c,c[7],i?Ne(a,c[7],h,null):Fe(c[7]),null),_n(e,f=We(u,[vi,h&32&&c[5],(!i||h&4)&&{width:c[2]},(!i||h&4)&&{height:c[2]},(!i||h&2)&&{stroke:c[1]},(!i||h&8)&&{"stroke-width":c[3]},(!i||h&65&&n!==(n=`tabler-icon tabler-icon-${c[0]} ${c[6].class??""}`))&&{class:n}]))},i(c){i||(y(l,c),i=!0)},o(c){k(l,c),i=!1},d(c){c&&S(e),gn(o,c),l&&l.d(c)}}}function Ta(r,e,t){const n=["name","color","size","stroke","iconNode"];let i=tr(e,n),{$$slots:s={},$$scope:o}=e,{name:a}=e,{color:l="currentColor"}=e,{size:u=24}=e,{stroke:f=2}=e,{iconNode:c}=e;return r.$$set=h=>{t(6,e=ce(ce({},e),ke(h))),t(5,i=tr(e,n)),"name"in h&&t(0,a=h.name),"color"in h&&t(1,l=h.color),"size"in h&&t(2,u=h.size),"stroke"in h&&t(3,f=h.stroke),"iconNode"in h&&t(4,c=h.iconNode),"$$scope"in h&&t(7,o=h.$$scope)},e=ke(e),[a,l,u,f,c,i,e,o,s]}class Ia extends we{constructor(e){super(),ye(this,e,Ta,Sa,$e,{name:0,color:1,size:2,stroke:3,iconNode:4})}}const Ze=Ia;function Ca(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Ra(r){let e,t;const n=[{name:"align-center"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Ca]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Fa(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 6l16 0"}],["path",{d:"M8 12l8 0"}],["path",{d:"M6 18l12 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Na extends we{constructor(e){super(),ye(this,e,Fa,Ra,$e,{})}}const Pa=Na;function Ba(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Ma(r){let e,t;const n=[{name:"align-left"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function za(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 6l16 0"}],["path",{d:"M4 12l10 0"}],["path",{d:"M4 18l14 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Ua extends we{constructor(e){super(),ye(this,e,za,Ma,$e,{})}}const Da=Ua;function La(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function xa(r){let e,t;const n=[{name:"align-right"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[La]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Oa(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 6l16 0"}],["path",{d:"M10 12l10 0"}],["path",{d:"M6 18l14 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Ga extends we{constructor(e){super(),ye(this,e,Oa,xa,$e,{})}}const Ha=Ga;function ja(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Wa(r){let e,t;const n=[{name:"arrow-bar-to-down"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[ja]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Va(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 20l16 0"}],["path",{d:"M12 14l0 -10"}],["path",{d:"M12 14l4 -4"}],["path",{d:"M12 14l-4 -4"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class qa extends we{constructor(e){super(),ye(this,e,Va,Wa,$e,{})}}const Za=qa;function Xa(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Ka(r){let e,t;const n=[{name:"arrow-bar-to-up"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Xa]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Ya(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M12 10l0 10"}],["path",{d:"M12 10l4 4"}],["path",{d:"M12 10l-4 4"}],["path",{d:"M4 4l16 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Ja extends we{constructor(e){super(),ye(this,e,Ya,Ka,$e,{})}}const Qa=Ja;function el(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function tl(r){let e,t;const n=[{name:"arrow-down"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[el]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function nl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M12 5l0 14"}],["path",{d:"M18 13l-6 6"}],["path",{d:"M6 13l6 6"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class rl extends we{constructor(e){super(),ye(this,e,nl,tl,$e,{})}}const il=rl;function sl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function ol(r){let e,t;const n=[{name:"arrow-up"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[sl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function al(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M12 5l0 14"}],["path",{d:"M18 11l-6 -6"}],["path",{d:"M6 11l6 -6"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class ll extends we{constructor(e){super(),ye(this,e,al,ol,$e,{})}}const ul=ll;function fl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function cl(r){let e,t;const n=[{name:"bold"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[fl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function hl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class ml extends we{constructor(e){super(),ye(this,e,hl,cl,$e,{})}}const dl=ml;function pl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function _l(r){let e,t;const n=[{name:"box-align-bottom"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[pl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function gl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 14h16v5a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1v-5z"}],["path",{d:"M4 9v.01"}],["path",{d:"M4 4v.01"}],["path",{d:"M9 4v.01"}],["path",{d:"M15 4v.01"}],["path",{d:"M20 4v.01"}],["path",{d:"M20 9v.01"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class bl extends we{constructor(e){super(),ye(this,e,gl,_l,$e,{})}}const vl=bl;function $l(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function wl(r){let e,t;const n=[{name:"box-align-top"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[$l]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function yl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 9.505h16v-5a1 1 0 0 0 -1 -1h-14a1 1 0 0 0 -1 1v5z"}],["path",{d:"M4 14.505v-.01"}],["path",{d:"M4 19.505v-.01"}],["path",{d:"M9 19.505v-.01"}],["path",{d:"M15 19.505v-.01"}],["path",{d:"M20 19.505v-.01"}],["path",{d:"M20 14.505v-.01"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class El extends we{constructor(e){super(),ye(this,e,yl,wl,$e,{})}}const kl=El;function Al(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Sl(r){let e,t;const n=[{name:"brand-github-filled"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Al]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Tl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M5.315 2.1c.791 -.113 1.9 .145 3.333 .966l.272 .161l.16 .1l.397 -.083a13.3 13.3 0 0 1 4.59 -.08l.456 .08l.396 .083l.161 -.1c1.385 -.84 2.487 -1.17 3.322 -1.148l.164 .008l.147 .017l.076 .014l.05 .011l.144 .047a1 1 0 0 1 .53 .514a5.2 5.2 0 0 1 .397 2.91l-.047 .267l-.046 .196l.123 .163c.574 .795 .93 1.728 1.03 2.707l.023 .295l.007 .272c0 3.855 -1.659 5.883 -4.644 6.68l-.245 .061l-.132 .029l.014 .161l.008 .157l.004 .365l-.002 .213l-.003 3.834a1 1 0 0 1 -.883 .993l-.117 .007h-6a1 1 0 0 1 -.993 -.883l-.007 -.117v-.734c-1.818 .26 -3.03 -.424 -4.11 -1.878l-.535 -.766c-.28 -.396 -.455 -.579 -.589 -.644l-.048 -.019a1 1 0 0 1 .564 -1.918c.642 .188 1.074 .568 1.57 1.239l.538 .769c.76 1.079 1.36 1.459 2.609 1.191l.001 -.678l-.018 -.168a5.03 5.03 0 0 1 -.021 -.824l.017 -.185l.019 -.12l-.108 -.024c-2.976 -.71 -4.703 -2.573 -4.875 -6.139l-.01 -.31l-.004 -.292a5.6 5.6 0 0 1 .908 -3.051l.152 -.222l.122 -.163l-.045 -.196a5.2 5.2 0 0 1 .145 -2.642l.1 -.282l.106 -.253a1 1 0 0 1 .529 -.514l.144 -.047l.154 -.03z","stroke-width":"0",fill:"currentColor"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Il extends we{constructor(e){super(),ye(this,e,Tl,Sl,$e,{})}}const Cl=Il;function Rl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Fl(r){let e,t;const n=[{name:"brand-topbuzz"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Rl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Nl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4.417 8.655a.524 .524 0 0 1 -.405 -.622l.986 -4.617a.524 .524 0 0 1 .626 -.404l14.958 3.162c.285 .06 .467 .339 .406 .622l-.987 4.618a.524 .524 0 0 1 -.625 .404l-4.345 -.92c-.198 -.04 -.315 .024 -.353 .197l-2.028 9.49a.527 .527 0 0 1 -.625 .404l-4.642 -.982a.527 .527 0 0 1 -.406 -.622l2.028 -9.493c.037 -.17 -.031 -.274 -.204 -.31l-4.384 -.927z"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Pl extends we{constructor(e){super(),ye(this,e,Nl,Fl,$e,{})}}const Bl=Pl;function Ml(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function zl(r){let e,t;const n=[{name:"brand-vk"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Ml]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Ul(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M14 19h-4a8 8 0 0 1 -8 -8v-5h4v5a4 4 0 0 0 4 4h0v-9h4v4.5l.03 0a4.531 4.531 0 0 0 3.97 -4.496h4l-.342 1.711a6.858 6.858 0 0 1 -3.658 4.789h0a5.34 5.34 0 0 1 3.566 4.111l.434 2.389h0h-4a4.531 4.531 0 0 0 -3.97 -4.496v4.5z"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Dl extends we{constructor(e){super(),ye(this,e,Ul,zl,$e,{})}}const Ll=Dl;function xl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Ol(r){let e,t;const n=[{name:"chevron-down"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[xl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Gl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M6 9l6 6l6 -6"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Hl extends we{constructor(e){super(),ye(this,e,Gl,Ol,$e,{})}}const jl=Hl;function Wl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Vl(r){let e,t;const n=[{name:"copy"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Wl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function ql(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}],["path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Zl extends we{constructor(e){super(),ye(this,e,ql,Vl,$e,{})}}const Os=Zl;function Xl(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Kl(r){let e,t;const n=[{name:"device-floppy"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Xl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Yl(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}],["path",{d:"M14 4l0 4l-6 0l0 -4"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Jl extends we{constructor(e){super(),ye(this,e,Yl,Kl,$e,{})}}const Ql=Jl;function eu(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function tu(r){let e,t;const n=[{name:"help"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[eu]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function nu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}],["path",{d:"M12 17l0 .01"}],["path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class ru extends we{constructor(e){super(),ye(this,e,nu,tu,$e,{})}}const iu=ru;function su(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function ou(r){let e,t;const n=[{name:"history"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[su]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function au(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M12 8l0 4l2 2"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class lu extends we{constructor(e){super(),ye(this,e,au,ou,$e,{})}}const uu=lu;function fu(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function cu(r){let e,t;const n=[{name:"info-circle"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[fu]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function hu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}],["path",{d:"M12 9h.01"}],["path",{d:"M11 12h1v4h1"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class mu extends we{constructor(e){super(),ye(this,e,hu,cu,$e,{})}}const du=mu;function pu(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function _u(r){let e,t;const n=[{name:"italic"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function gu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M11 5l6 0"}],["path",{d:"M7 19l6 0"}],["path",{d:"M14 5l-4 14"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class bu extends we{constructor(e){super(),ye(this,e,gu,_u,$e,{})}}const vu=bu;function $u(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function wu(r){let e,t;const n=[{name:"line-height"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function yu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M3 8l3 -3l3 3"}],["path",{d:"M3 16l3 3l3 -3"}],["path",{d:"M6 5l0 14"}],["path",{d:"M13 6l7 0"}],["path",{d:"M13 12l7 0"}],["path",{d:"M13 18l7 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Eu extends we{constructor(e){super(),ye(this,e,yu,wu,$e,{})}}const ku=Eu;function Au(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Su(r){let e,t;const n=[{name:"minus"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Tu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M5 12l14 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Iu extends we{constructor(e){super(),ye(this,e,Tu,Su,$e,{})}}const Cu=Iu;function Ru(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Fu(r){let e,t;const n=[{name:"new-section"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Ru]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Nu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M9 12l6 0"}],["path",{d:"M12 9l0 6"}],["path",{d:"M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Pu extends we{constructor(e){super(),ye(this,e,Nu,Fu,$e,{})}}const Gs=Pu;function Bu(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Mu(r){let e,t;const n=[{name:"photo-down"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Bu]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function zu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M15 8h.01"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4"}],["path",{d:"M14 14l1 -1c.653 -.629 1.413 -.815 2.13 -.559"}],["path",{d:"M19 16v6"}],["path",{d:"M22 19l-3 3l-3 -3"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Uu extends we{constructor(e){super(),ye(this,e,zu,Mu,$e,{})}}const Du=Uu;function Lu(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function xu(r){let e,t;const n=[{name:"photo-up"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Lu]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Ou(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M15 8h.01"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526"}],["path",{d:"M19 22v-6"}],["path",{d:"M22 19l-3 -3l-3 3"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Gu extends we{constructor(e){super(),ye(this,e,Ou,xu,$e,{})}}const Hu=Gu;function ju(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Wu(r){let e,t;const n=[{name:"photo"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Vu(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M15 8h.01"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class qu extends we{constructor(e){super(),ye(this,e,Vu,Wu,$e,{})}}const Hs=qu;function Zu(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Xu(r){let e,t;const n=[{name:"plus"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Ku(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M12 5l0 14"}],["path",{d:"M5 12l14 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class Yu extends we{constructor(e){super(),ye(this,e,Ku,Xu,$e,{})}}const js=Yu;function Ju(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Qu(r){let e,t;const n=[{name:"rectangle"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Ju]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function ef(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class tf extends we{constructor(e){super(),ye(this,e,ef,Qu,$e,{})}}const nf=tf;function rf(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function sf(r){let e,t;const n=[{name:"settings"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[rf]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function of(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class af extends we{constructor(e){super(),ye(this,e,of,sf,$e,{})}}const lf=af;function uf(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function ff(r){let e,t;const n=[{name:"trash"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function cf(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 7l16 0"}],["path",{d:"M10 11l0 6"}],["path",{d:"M14 11l0 6"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class hf extends we{constructor(e){super(),ye(this,e,cf,ff,$e,{})}}const mf=hf;function df(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function pf(r){let e,t;const n=[{name:"upload"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[df]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function _f(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}],["path",{d:"M7 9l5 -5l5 5"}],["path",{d:"M12 4l0 12"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class gf extends we{constructor(e){super(),ye(this,e,_f,pf,$e,{})}}const bf=gf;function vf(r){let e;const t=r[2].default,n=Ce(t,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8)&&Re(n,t,i,i[3],e?Ne(t,i[3],s,null):Fe(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function $f(r){let e,t;const n=[{name:"x"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[vf]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)i=ce(i,n[s]);return e=new Ze({props:i}),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,[o]){const a=o&3?We(n,[n[0],o&2&&qe(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function wf(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=[["path",{d:"M18 6l-12 12"}],["path",{d:"M6 6l12 12"}]];return r.$$set=o=>{t(1,e=ce(ce({},e),ke(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ke(e),[s,e,n,i]}class yf extends we{constructor(e){super(),ye(this,e,wf,$f,$e,{})}}const Ef=yf;function kf(r){let e,t,n,i,s,o;const a=r[11].default,l=Ce(a,r,r[10],null);return{c(){e=J("main"),l&&l.c(),this.h()},l(u){e=Q(u,"MAIN",{role:!0,tabindex:!0,title:!0,class:!0,style:!0});var f=ne(e);l&&l.l(f),f.forEach(S),this.h()},h(){x(e,"role","button"),x(e,"tabindex",1),x(e,"title",r[4]),x(e,"class",t=nr(r[2])+" svelte-1nn75kw"),x(e,"style",n=`justify-content:${r[6]};width:${r[8]};${r[9]?`${r[9]};`:""}${r[3]};`),tt(e,"active",r[0]),tt(e,"disabled",r[1]),tt(e,"disablePadding",r[5]),tt(e,"border",r[7])},m(u,f){O(u,e,f),l&&l.m(e,null),i=!0,s||(o=[Ie(e,"click",r[12]),Ie(e,"mousemove",r[13]),Ie(e,"mouseout",r[14]),Ie(e,"mouseover",r[15]),Ie(e,"mouseup",r[16]),Ie(e,"mousedown",r[17]),Ie(e,"mouseenter",r[18]),Ie(e,"mouseleave",r[19]),Ie(e,"touchstart",r[20],{passive:!0}),Ie(e,"touchmove",r[21],{passive:!0}),Ie(e,"touchcancel",r[22],{passive:!0}),Ie(e,"touchend",r[23],{passive:!0}),Ie(e,"keydown",r[24]),Ie(e,"keyup",r[25]),Ie(e,"focus",r[26]),Ie(e,"focusin",r[27]),Ie(e,"focusout",r[28]),Ie(e,"blur",r[29])],s=!0)},p(u,[f]){l&&l.p&&(!i||f&1024)&&Re(l,a,u,u[10],i?Ne(a,u[10],f,null):Fe(u[10]),null),(!i||f&16)&&x(e,"title",u[4]),(!i||f&4&&t!==(t=nr(u[2])+" svelte-1nn75kw"))&&x(e,"class",t),(!i||f&840&&n!==(n=`justify-content:${u[6]};width:${u[8]};${u[9]?`${u[9]};`:""}${u[3]};`))&&x(e,"style",n),(!i||f&5)&&tt(e,"active",u[0]),(!i||f&6)&&tt(e,"disabled",u[1]),(!i||f&36)&&tt(e,"disablePadding",u[5]),(!i||f&132)&&tt(e,"border",u[7])},i(u){i||(y(l,u),i=!0)},o(u){k(l,u),i=!1},d(u){u&&S(e),l&&l.d(u),s=!1,pt(o)}}}function Af(r,e,t){let{$$slots:n={},$$scope:i}=e,{active:s=!1}=e,{disabled:o=!1}=e,{type:a="default"}=e,{style:l=""}=e,{title:u=""}=e,{disablePadding:f=!1}=e,{justifyContent:c="center"}=e,{border:h=!0}=e,{width:m="100%"}=e,{height:p=""}=e;function d(W){Ae.call(this,r,W)}function _(W){Ae.call(this,r,W)}function g(W){Ae.call(this,r,W)}function $(W){Ae.call(this,r,W)}function A(W){Ae.call(this,r,W)}function w(W){Ae.call(this,r,W)}function R(W){Ae.call(this,r,W)}function I(W){Ae.call(this,r,W)}function U(W){Ae.call(this,r,W)}function q(W){Ae.call(this,r,W)}function j(W){Ae.call(this,r,W)}function L(W){Ae.call(this,r,W)}function V(W){Ae.call(this,r,W)}function C(W){Ae.call(this,r,W)}function F(W){Ae.call(this,r,W)}function b(W){Ae.call(this,r,W)}function K(W){Ae.call(this,r,W)}function pe(W){Ae.call(this,r,W)}return r.$$set=W=>{"active"in W&&t(0,s=W.active),"disabled"in W&&t(1,o=W.disabled),"type"in W&&t(2,a=W.type),"style"in W&&t(3,l=W.style),"title"in W&&t(4,u=W.title),"disablePadding"in W&&t(5,f=W.disablePadding),"justifyContent"in W&&t(6,c=W.justifyContent),"border"in W&&t(7,h=W.border),"width"in W&&t(8,m=W.width),"height"in W&&t(9,p=W.height),"$$scope"in W&&t(10,i=W.$$scope)},[s,o,a,l,u,f,c,h,m,p,i,n,d,_,g,$,A,w,R,I,U,q,j,L,V,C,F,b,K,pe]}class nt extends we{constructor(e){super(),ye(this,e,Af,kf,$e,{active:0,disabled:1,type:2,style:3,title:4,disablePadding:5,justifyContent:6,border:7,width:8,height:9})}}const Sf=r=>({}),yi=r=>({}),Tf=r=>({}),Ei=r=>({});function ki(r){let e,t,n,i,s,o,a,l,u,f,c=r[4].title&&Ai(r);const h=r[5].default,m=Ce(h,r,r[8],null);let p=r[4].footer&&Ti(r);return{c(){e=J("button"),t=se(),n=J("div"),i=J("article"),c&&c.c(),s=se(),o=J("main"),m&&m.c(),a=se(),p&&p.c(),this.h()},l(d){e=Q(d,"BUTTON",{class:!0}),ne(e).forEach(S),t=oe(d),n=Q(d,"DIV",{class:!0});var _=ne(n);i=Q(_,"ARTICLE",{class:!0});var g=ne(i);c&&c.l(g),s=oe(g),o=Q(g,"MAIN",{class:!0});var $=ne(o);m&&m.l($),$.forEach(S),a=oe(g),p&&p.l(g),g.forEach(S),_.forEach(S),this.h()},h(){x(e,"class","backdrop fixed svelte-1fd19w4"),x(o,"class","svelte-1fd19w4"),x(i,"class","svelte-1fd19w4"),x(n,"class","container fixed svelte-1fd19w4")},m(d,_){O(d,e,_),O(d,t,_),O(d,n,_),H(n,i),c&&c.m(i,null),H(i,s),H(i,o),m&&m.m(o,null),H(i,a),p&&p.m(i,null),l=!0,u||(f=[Ie(e,"click",r[6]),Ie(n,"keypress",r[3])],u=!0)},p(d,_){d[4].title?c?(c.p(d,_),_&16&&y(c,1)):(c=Ai(d),c.c(),y(c,1),c.m(i,s)):c&&(Ge(),k(c,1,1,()=>{c=null}),He()),m&&m.p&&(!l||_&256)&&Re(m,h,d,d[8],l?Ne(h,d[8],_,null):Fe(d[8]),null),d[4].footer?p?(p.p(d,_),_&16&&y(p,1)):(p=Ti(d),p.c(),y(p,1),p.m(i,null)):p&&(Ge(),k(p,1,1,()=>{p=null}),He())},i(d){l||(y(c),y(m,d),y(p),l=!0)},o(d){k(c),k(m,d),k(p),l=!1},d(d){d&&S(e),d&&S(t),d&&S(n),c&&c.d(),m&&m.d(d),p&&p.d(),u=!1,pt(f)}}}function Ai(r){let e,t,n;const i=r[5].title,s=Ce(i,r,r[8],Ei);let o=r[1]&&Si(r);return{c(){e=J("header"),s&&s.c(),t=se(),o&&o.c(),this.h()},l(a){e=Q(a,"HEADER",{class:!0});var l=ne(e);s&&s.l(l),t=oe(l),o&&o.l(l),l.forEach(S),this.h()},h(){x(e,"class","svelte-1fd19w4")},m(a,l){O(a,e,l),s&&s.m(e,null),H(e,t),o&&o.m(e,null),n=!0},p(a,l){s&&s.p&&(!n||l&256)&&Re(s,i,a,a[8],n?Ne(i,a[8],l,Tf):Fe(a[8]),Ei),a[1]?o?(o.p(a,l),l&2&&y(o,1)):(o=Si(a),o.c(),y(o,1),o.m(e,null)):o&&(Ge(),k(o,1,1,()=>{o=null}),He())},i(a){n||(y(s,a),y(o),n=!0)},o(a){k(s,a),k(o),n=!1},d(a){a&&S(e),s&&s.d(a),o&&o.d()}}}function Si(r){let e,t;return e=new nt({props:{title:"Закрыть",width:"auto",border:!1,$$slots:{default:[If]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&256&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function If(r){let e,t;return e=new Ef({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Ti(r){let e,t;const n=r[5].footer,i=Ce(n,r,r[8],yi);return{c(){e=J("footer"),i&&i.c(),this.h()},l(s){e=Q(s,"FOOTER",{class:!0});var o=ne(e);i&&i.l(o),o.forEach(S),this.h()},h(){x(e,"class","svelte-1fd19w4")},m(s,o){O(s,e,o),i&&i.m(e,null),t=!0},p(s,o){i&&i.p&&(!t||o&256)&&Re(i,n,s,s[8],t?Ne(n,s[8],o,Sf):Fe(s[8]),yi)},i(s){t||(y(i,s),t=!0)},o(s){k(i,s),t=!1},d(s){s&&S(e),i&&i.d(s)}}}function Cf(r){let e,t,n=r[0]&&ki(r);return{c(){n&&n.c(),e=De()},l(i){n&&n.l(i),e=De()},m(i,s){n&&n.m(i,s),O(i,e,s),t=!0},p(i,[s]){i[0]?n?(n.p(i,s),s&1&&y(n,1)):(n=ki(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(Ge(),k(n,1,1,()=>{n=null}),He())},i(i){t||(y(n),t=!0)},o(i){k(n),t=!1},d(i){n&&n.d(i),i&&S(e)}}}function Rf(r,e,t){let{$$slots:n={},$$scope:i}=e;const s=$a(n);let{open:o=!0}=e,{closable:a=!0}=e;const l=yt();function u(p="cancel"){a&&l("close",{action:p},{cancelable:!0})&&t(0,o=!1)}function f(p){o&&p.key==="Escape"&&u("cancel")}function c(p){o&&(l("paste",{event:p}),p.stopPropagation())}wn(()=>(document.addEventListener("keyup",f),document.addEventListener("paste",c,{capture:!0}),()=>{document.removeEventListener("paste",c),document.removeEventListener("keyup",f)}));const h=()=>u("cancel"),m=()=>u("cancel");return r.$$set=p=>{"open"in p&&t(0,o=p.open),"closable"in p&&t(1,a=p.closable),"$$scope"in p&&t(8,i=p.$$scope)},[o,a,u,f,s,n,h,m,i]}class bn extends we{constructor(e){super(),ye(this,e,Rf,Cf,$e,{open:0,closable:1})}}const Ff=""+new URL("../assets/firefox_copy_helper.d346afe2.webp",import.meta.url).href;function Nf(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_,g,$;return{c(){e=J("main"),t=J("p"),n=ue(`Ваш браузер отключил или не поддерживает копирование изображений из скриптов. Вы можете
			скопировать эту копию фрейма вручную с помощью ПКМ.`),i=se(),s=J("img"),a=se(),l=J("p"),u=ue("Если это Firefox версии 87 и выше, вы можете включить опцию "),f=J("span"),c=ue("dom.events.asyncClipboard.clipboardItem"),h=ue(", открыв в новой вкладке страницу "),m=J("span"),p=ue("about:config"),d=ue(`. Тогда вы перестанете видеть это
			окно, а функционал копирования заработает корректно.`),_=se(),g=J("img"),this.h()},l(A){e=Q(A,"MAIN",{class:!0});var w=ne(e);t=Q(w,"P",{});var R=ne(t);n=fe(R,`Ваш браузер отключил или не поддерживает копирование изображений из скриптов. Вы можете
			скопировать эту копию фрейма вручную с помощью ПКМ.`),R.forEach(S),i=oe(w),s=Q(w,"IMG",{src:!0,alt:!0,class:!0}),a=oe(w),l=Q(w,"P",{});var I=ne(l);u=fe(I,"Если это Firefox версии 87 и выше, вы можете включить опцию "),f=Q(I,"SPAN",{class:!0});var U=ne(f);c=fe(U,"dom.events.asyncClipboard.clipboardItem"),U.forEach(S),h=fe(I,", открыв в новой вкладке страницу "),m=Q(I,"SPAN",{class:!0});var q=ne(m);p=fe(q,"about:config"),q.forEach(S),d=fe(I,`. Тогда вы перестанете видеть это
			окно, а функционал копирования заработает корректно.`),I.forEach(S),_=oe(w),g=Q(w,"IMG",{src:!0,alt:!0,class:!0}),w.forEach(S),this.h()},h(){Fn(s.src,o=r[1])||x(s,"src",o),x(s,"alt","Копия фрейма"),x(s,"class","svelte-1qucpf4"),x(f,"class","svelte-1qucpf4"),x(m,"class","svelte-1qucpf4"),Fn(g.src,$=Ff)||x(g,"src",$),x(g,"alt","Скриншот страницы about:config"),x(g,"class","svelte-1qucpf4"),x(e,"class","svelte-1qucpf4")},m(A,w){O(A,e,w),H(e,t),H(t,n),H(e,i),H(e,s),H(e,a),H(e,l),H(l,u),H(l,f),H(f,c),H(l,h),H(l,m),H(m,p),H(l,d),H(e,_),H(e,g)},p(A,w){w&2&&!Fn(s.src,o=A[1])&&x(s,"src",o)},d(A){A&&S(e)}}}function Pf(r){let e;return{c(){e=ue("Ваш браузер не поддерживает копирование")},l(t){e=fe(t,"Ваш браузер не поддерживает копирование")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Bf(r){let e,t;return e=new bn({props:{open:r[0]!=null,$$slots:{title:[Pf],default:[Nf]},$$scope:{ctx:r}}}),e.$on("close",r[3]),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&1&&(s.open=n[0]!=null),i&18&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Mf(r,e,t){let{fallbackBlob:n=null}=e,i=n,s="";wa(()=>{s&&URL.revokeObjectURL(s)});const o=()=>t(0,n=null);return r.$$set=a=>{"fallbackBlob"in a&&t(0,n=a.fallbackBlob)},r.$$.update=()=>{r.$$.dirty&7&&n!=i&&(s&&URL.revokeObjectURL(s),t(2,i=n),t(1,s=i?URL.createObjectURL(i):""))},[n,s,i,o]}class zf extends we{constructor(e){super(),ye(this,e,Mf,Bf,$e,{fallbackBlob:0})}}function Ii(r,e,t){const n=r.slice();return n[5]=e[t],n}const Uf=r=>({tab:r&2}),Ci=r=>({tab:r[5]});function Ri(r,e,t){const n=r.slice();return n[5]=e[t],n}const Df=r=>({tab:r&2}),Fi=r=>({tab:r[5]});function Ni(r){let e,t,n,i,s;const o=r[3].default,a=Ce(o,r,r[2],Fi);function l(){return r[4](r[5])}return{c(){e=J("section"),a&&a.c(),t=se(),this.h()},l(u){e=Q(u,"SECTION",{class:!0});var f=ne(e);a&&a.l(f),t=oe(f),f.forEach(S),this.h()},h(){x(e,"class","tab svelte-lu853g"),tt(e,"active",r[0]===r[5])},m(u,f){O(u,e,f),a&&a.m(e,null),H(e,t),n=!0,i||(s=Ie(e,"click",l),i=!0)},p(u,f){r=u,a&&a.p&&(!n||f&6)&&Re(a,o,r,r[2],n?Ne(o,r[2],f,Df):Fe(r[2]),Fi),(!n||f&3)&&tt(e,"active",r[0]===r[5])},i(u){n||(y(a,u),n=!0)},o(u){k(a,u),n=!1},d(u){u&&S(e),a&&a.d(u),i=!1,s()}}}function Pi(r){let e,t,n;const i=r[3].content,s=Ce(i,r,r[2],Ci);return{c(){e=J("section"),s&&s.c(),t=se(),this.h()},l(o){e=Q(o,"SECTION",{class:!0});var a=ne(e);s&&s.l(a),t=oe(a),a.forEach(S),this.h()},h(){x(e,"class","content svelte-lu853g"),tt(e,"hide",r[0]!==r[5])},m(o,a){O(o,e,a),s&&s.m(e,null),H(e,t),n=!0},p(o,a){s&&s.p&&(!n||a&6)&&Re(s,i,o,o[2],n?Ne(i,o[2],a,Uf):Fe(o[2]),Ci),(!n||a&3)&&tt(e,"hide",o[0]!==o[5])},i(o){n||(y(s,o),n=!0)},o(o){k(s,o),n=!1},d(o){o&&S(e),s&&s.d(o)}}}function Lf(r){let e,t,n,i,s=r[1],o=[];for(let c=0;c<s.length;c+=1)o[c]=Ni(Ri(r,s,c));const a=c=>k(o[c],1,1,()=>{o[c]=null});let l=r[1],u=[];for(let c=0;c<l.length;c+=1)u[c]=Pi(Ii(r,l,c));const f=c=>k(u[c],1,1,()=>{u[c]=null});return{c(){e=J("article"),t=J("header");for(let c=0;c<o.length;c+=1)o[c].c();n=se();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=Q(c,"ARTICLE",{class:!0});var h=ne(e);t=Q(h,"HEADER",{class:!0});var m=ne(t);for(let p=0;p<o.length;p+=1)o[p].l(m);m.forEach(S),n=oe(h);for(let p=0;p<u.length;p+=1)u[p].l(h);h.forEach(S),this.h()},h(){x(t,"class","svelte-lu853g"),x(e,"class","svelte-lu853g")},m(c,h){O(c,e,h),H(e,t);for(let m=0;m<o.length;m+=1)o[m].m(t,null);H(e,n);for(let m=0;m<u.length;m+=1)u[m].m(e,null);i=!0},p(c,[h]){if(h&7){s=c[1];let m;for(m=0;m<s.length;m+=1){const p=Ri(c,s,m);o[m]?(o[m].p(p,h),y(o[m],1)):(o[m]=Ni(p),o[m].c(),y(o[m],1),o[m].m(t,null))}for(Ge(),m=s.length;m<o.length;m+=1)a(m);He()}if(h&7){l=c[1];let m;for(m=0;m<l.length;m+=1){const p=Ii(c,l,m);u[m]?(u[m].p(p,h),y(u[m],1)):(u[m]=Pi(p),u[m].c(),y(u[m],1),u[m].m(e,null))}for(Ge(),m=l.length;m<u.length;m+=1)f(m);He()}},i(c){if(!i){for(let h=0;h<s.length;h+=1)y(o[h]);for(let h=0;h<l.length;h+=1)y(u[h]);i=!0}},o(c){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)k(o[h]);u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)k(u[h]);i=!1},d(c){c&&S(e),gn(o,c),gn(u,c)}}}function xf(r,e,t){let{$$slots:n={},$$scope:i}=e,{tabs:s}=e,{activeTab:o=s[0]}=e;const a=l=>t(0,o=l);return r.$$set=l=>{"tabs"in l&&t(1,s=l.tabs),"activeTab"in l&&t(0,o=l.activeTab),"$$scope"in l&&t(2,i=l.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(s.includes(o)||t(0,o=s[0]))},[o,s,i,n,a]}class Ws extends we{constructor(e){super(),ye(this,e,xf,Lf,$e,{tabs:1,activeTab:0})}}function Bi(r,e,t){const n=r.slice();return n[11]=e[t],n[13]=t,n}const Of=r=>({item:r&2,index:r&2}),Mi=r=>({item:r[11],index:r[13]});function zi(r,e){let t,n,i,s,o,a;const l=e[6].default,u=Ce(l,e,e[5],Mi);function f(){return e[9](e[11])}return{key:r,first:null,c(){t=J("article"),u&&u.c(),n=se(),this.h()},l(c){t=Q(c,"ARTICLE",{class:!0});var h=ne(t);u&&u.l(h),n=oe(h),h.forEach(S),this.h()},h(){x(t,"class","item svelte-xsb8mb"),tt(t,"active",e[11].id===e[0].id),this.first=t},m(c,h){O(c,t,h),u&&u.m(t,null),H(t,n),s=!0,o||(a=[ya(i=e[4].call(null,t,{isActive:e[11].id===e[0].id})),Ie(t,"click",f)],o=!0)},p(c,h){e=c,u&&u.p&&(!s||h&34)&&Re(u,l,e,e[5],s?Ne(l,e[5],h,Of):Fe(e[5]),Mi),i&&Ea(i.update)&&h&3&&i.update.call(null,{isActive:e[11].id===e[0].id}),(!s||h&3)&&tt(t,"active",e[11].id===e[0].id)},i(c){s||(y(u,c),s=!0)},o(c){k(u,c),s=!1},d(c){c&&S(t),u&&u.d(c),o=!1,pt(a)}}}function Gf(r){let e,t=[],n=new Map,i,s,o,a=r[1];const l=u=>u[11].id;for(let u=0;u<a.length;u+=1){let f=Bi(r,a,u),c=l(f);n.set(c,t[u]=zi(c,f))}return{c(){e=J("main");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=Q(u,"MAIN",{style:!0,class:!0});var f=ne(e);for(let c=0;c<t.length;c+=1)t[c].l(f);f.forEach(S),this.h()},h(){lt(e,"height",r[3]),lt(e,"min-height",r[3]),lt(e,"max-height",r[3]),x(e,"class","svelte-xsb8mb"),tt(e,"reverse",r[2])},m(u,f){O(u,e,f);for(let c=0;c<t.length;c+=1)t[c].m(e,null);i=!0,s||(o=[Ie(e,"drop",r[7]),Ie(e,"dragover",r[8])],s=!0)},p(u,[f]){f&35&&(a=u[1],Ge(),t=Ls(t,f,l,1,u,a,n,e,xs,zi,null,Bi),He()),(!i||f&8)&&lt(e,"height",u[3]),(!i||f&8)&&lt(e,"min-height",u[3]),(!i||f&8)&&lt(e,"max-height",u[3]),(!i||f&4)&&tt(e,"reverse",u[2])},i(u){if(!i){for(let f=0;f<a.length;f+=1)y(t[f]);i=!0}},o(u){for(let f=0;f<t.length;f+=1)k(t[f]);i=!1},d(u){u&&S(e);for(let f=0;f<t.length;f+=1)t[f].d();s=!1,pt(o)}}}function Hf(r,e,t){let{$$slots:n={},$$scope:i}=e,{items:s}=e,{active:o}=e,{reverse:a=!1}=e,{height:l="100%"}=e;const u={behavior:"smooth",block:"center"};function f(p,{isActive:d}){const _=()=>p.scrollIntoView(u);d&&requestAnimationFrame(_);let g=d;return{update({isActive:$}){g!=$&&(g=$)&&requestAnimationFrame(_)}}}function c(p){Ae.call(this,r,p)}function h(p){Ae.call(this,r,p)}const m=p=>t(0,o=p);return r.$$set=p=>{"items"in p&&t(1,s=p.items),"active"in p&&t(0,o=p.active),"reverse"in p&&t(2,a=p.reverse),"height"in p&&t(3,l=p.height),"$$scope"in p&&t(5,i=p.$$scope)},[o,s,a,l,f,i,n,c,h,m]}class Ur extends we{constructor(e){super(),ye(this,e,Hf,Gf,$e,{items:1,active:0,reverse:2,height:3})}}function jf(r){let e,t,n,i,s,o;return{c(){e=J("article"),t=J("canvas"),n=se(),i=J("canvas"),this.h()},l(a){e=Q(a,"ARTICLE",{class:!0});var l=ne(e);t=Q(l,"CANVAS",{class:!0}),ne(t).forEach(S),n=oe(l),i=Q(l,"CANVAS",{class:!0}),ne(i).forEach(S),l.forEach(S),this.h()},h(){x(t,"class","svelte-flcf9e"),x(i,"class","svelte-flcf9e"),x(e,"class","svelte-flcf9e")},m(a,l){O(a,e,l),H(e,t),r[4](t),H(e,n),H(e,i),r[5](i),s||(o=[Ie(e,"dragover",r[2]),Ie(e,"drop",r[3])],s=!0)},p:je,i:je,o:je,d(a){a&&S(e),r[4](null),r[5](null),s=!1,pt(o)}}}function Wf(r,e,t){let{webgl:n}=e,{ui:i}=e;function s(u){Ae.call(this,r,u)}function o(u){Ae.call(this,r,u)}function a(u){_e[u?"unshift":"push"](()=>{n=u,t(0,n)})}function l(u){_e[u?"unshift":"push"](()=>{i=u,t(1,i)})}return r.$$set=u=>{"webgl"in u&&t(0,n=u.webgl),"ui"in u&&t(1,i=u.ui)},[n,i,s,o,a,l]}class Vf extends we{constructor(e){super(),ye(this,e,Wf,jf,$e,{webgl:0,ui:1})}}function Ui(r){let e,t;return{c(){e=J("div"),t=ue(r[0]),this.h()},l(n){e=Q(n,"DIV",{class:!0});var i=ne(e);t=fe(i,r[0]),i.forEach(S),this.h()},h(){x(e,"class","svelte-12wuidl")},m(n,i){O(n,e,i),H(e,t)},p(n,i){i&1&&st(t,n[0])},d(n){n&&S(e)}}}function qf(r){let e,t,n;const i=r[3].default,s=Ce(i,r,r[2],null);let o=r[0]&&Ui(r);return{c(){e=J("label"),s&&s.c(),t=se(),o&&o.c(),this.h()},l(a){e=Q(a,"LABEL",{for:!0,class:!0});var l=ne(e);s&&s.l(l),t=oe(l),o&&o.l(l),l.forEach(S),this.h()},h(){x(e,"for",r[1]),x(e,"class","svelte-12wuidl"),tt(e,"error",r[0])},m(a,l){O(a,e,l),s&&s.m(e,null),H(e,t),o&&o.m(e,null),n=!0},p(a,[l]){s&&s.p&&(!n||l&4)&&Re(s,i,a,a[2],n?Ne(i,a[2],l,null):Fe(a[2]),null),a[0]?o?o.p(a,l):(o=Ui(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null),(!n||l&2)&&x(e,"for",a[1]),(!n||l&1)&&tt(e,"error",a[0])},i(a){n||(y(s,a),n=!0)},o(a){k(s,a),n=!1},d(a){a&&S(e),s&&s.d(a),o&&o.d()}}}function Zf(r,e,t){let{$$slots:n={},$$scope:i}=e,{error:s=""}=e,{for:o=void 0}=e;return r.$$set=a=>{"error"in a&&t(0,s=a.error),"for"in a&&t(1,o=a.for),"$$scope"in a&&t(2,i=a.$$scope)},[s,o,i,n]}class Xe extends we{constructor(e){super(),ye(this,e,Zf,qf,$e,{error:0,for:1})}}function Xf(r){let e,t,n;return{c(){e=J("input"),this.h()},l(i){e=Q(i,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){x(e,"type","range"),x(e,"min",r[1]),x(e,"max",r[2]),x(e,"step",r[3]),x(e,"class","svelte-1kebi6n")},m(i,s){O(i,e,s),At(e,r[0]),t||(n=[Ie(e,"change",r[5]),Ie(e,"input",r[5]),Ie(e,"input",r[6]),Ie(e,"change",r[7])],t=!0)},p(i,[s]){s&2&&x(e,"min",i[1]),s&4&&x(e,"max",i[2]),s&8&&x(e,"step",i[3]),s&1&&At(e,i[0])},i:je,o:je,d(i){i&&S(e),t=!1,pt(n)}}}function Kf(r,e,t){let{value:n}=e,{min:i}=e,{max:s}=e,{step:o=1}=e;const a=yt();function l(){n=ka(this.value),t(0,n)}const u=c=>a("input",Number(c.currentTarget.value)),f=c=>a("change",Number(c.currentTarget.value));return r.$$set=c=>{"value"in c&&t(0,n=c.value),"min"in c&&t(1,i=c.min),"max"in c&&t(2,s=c.max),"step"in c&&t(3,o=c.step)},[n,i,s,o,a,l,u,f]}class Yf extends we{constructor(e){super(),ye(this,e,Kf,Xf,$e,{value:0,min:1,max:2,step:3})}}function Di(r){let e,t,n;function i(o){r[16](o)}let s={min:r[3]??r[1],max:r[4]??r[2],step:r[5]};return r[0]!==void 0&&(s.value=r[0]),e=new Yf({props:s}),_e.push(()=>ge(e,"value",i)),e.$on("input",r[17]),e.$on("change",r[18]),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a&10&&(l.min=o[3]??o[1]),a&20&&(l.max=o[4]??o[2]),a&32&&(l.step=o[5]),!t&&a&1&&(t=!0,l.value=o[0],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Jf(r){let e,t;return e=new Cu({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Qf(r){let e,t;return e=new js({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function ec(r){let e,t,n,i,s,o,a,l,u,f,c,h,m=r[7]&&Di(r);return a=new nt({props:{disablePadding:!0,title:r[13],$$slots:{default:[Jf]},$$scope:{ctx:r}}}),a.$on("mousedown",r[21]),a.$on("mouseup",r[22]),u=new nt({props:{disablePadding:!0,title:r[13],$$slots:{default:[Qf]},$$scope:{ctx:r}}}),u.$on("mousedown",r[23]),u.$on("mouseup",r[24]),{c(){e=J("main"),m&&m.c(),t=se(),n=J("input"),s=se(),o=J("footer"),P(a.$$.fragment),l=se(),P(u.$$.fragment),this.h()},l(p){e=Q(p,"MAIN",{class:!0});var d=ne(e);m&&m.l(d),t=oe(d),n=Q(d,"INPUT",{class:!0}),s=oe(d),o=Q(d,"FOOTER",{class:!0});var _=ne(o);B(a.$$.fragment,_),l=oe(_),B(u.$$.fragment,_),_.forEach(S),d.forEach(S),this.h()},h(){n.value=i=+r[0].toFixed(r[6]),x(n,"class","svelte-bxcbqd"),x(o,"class","svelte-bxcbqd"),x(e,"class","svelte-bxcbqd")},m(p,d){O(p,e,d),m&&m.m(e,null),H(e,t),H(e,n),H(e,s),H(e,o),M(a,o,null),H(o,l),M(u,o,null),f=!0,c||(h=[Ie(n,"input",r[19]),Ie(n,"change",r[20])],c=!0)},p(p,[d]){p[7]?m?(m.p(p,d),d&128&&y(m,1)):(m=Di(p),m.c(),y(m,1),m.m(e,t)):m&&(Ge(),k(m,1,1,()=>{m=null}),He()),(!f||d&65&&i!==(i=+p[0].toFixed(p[6]))&&n.value!==i)&&(n.value=i);const _={};d&134217728&&(_.$$scope={dirty:d,ctx:p}),a.$set(_);const g={};d&134217728&&(g.$$scope={dirty:d,ctx:p}),u.$set(g)},i(p){f||(y(m),y(a.$$.fragment,p),y(u.$$.fragment,p),f=!0)},o(p){k(m),k(a.$$.fragment,p),k(u.$$.fragment,p),f=!1},d(p){p&&S(e),m&&m.d(),z(a),z(u),c=!1,pt(h)}}}function tc(r,e,t){let{value:n}=e,{min:i=-1/0}=e,{max:s=1/0}=e,{rangeMin:o=void 0}=e,{rangeMax:a=void 0}=e,{step:l=1}=e,{ctrlMultiplier:u=2}=e,{shiftMultiplier:f=5}=e,{precision:c=4}=e,{withRange:h=!1}=e;const m=yt();let p=-1,d=!1;function _(b){(!b||b.button===0)&&p!==-1&&(clearInterval(p),t(8,d=!1))}function g(b){let K=1;return b.ctrlKey&&(K*=u),b.shiftKey&&(K*=f),K}function $(b){t(0,n=+Math.min(s,Math.max(i,n+b)).toFixed(c)),m("input",n),m("change",n)}function A(b){_(),p=setInterval(()=>{t(8,d=!0),$(b)},100)}wn(()=>(document.addEventListener("mouseup",_),()=>document.removeEventListener("mouseup",_)));const w=`Шаг: ${l}
Ctrl: x${u}
Shift: x${f}`;function R(b){n=b,t(0,n)}function I(b){Ae.call(this,r,b)}function U(b){Ae.call(this,r,b)}const q=b=>{const K=Number(b.currentTarget.value);if(Number.isNaN(K)){b.currentTarget.value=(+n.toFixed(c)).toString();return}t(0,n=Math.min(s,Math.max(i,K))),m("input",n)},j=b=>m("change",Number(b.currentTarget.value)),L=b=>{b.button==0&&A(-g(b)*l)},V=b=>{b.button==0&&(d||$(-g(b)*l))},C=b=>{b.button==0&&A(+g(b)*l)},F=b=>{b.button==0&&(d||$(+g(b)*l))};return r.$$set=b=>{"value"in b&&t(0,n=b.value),"min"in b&&t(1,i=b.min),"max"in b&&t(2,s=b.max),"rangeMin"in b&&t(3,o=b.rangeMin),"rangeMax"in b&&t(4,a=b.rangeMax),"step"in b&&t(5,l=b.step),"ctrlMultiplier"in b&&t(14,u=b.ctrlMultiplier),"shiftMultiplier"in b&&t(15,f=b.shiftMultiplier),"precision"in b&&t(6,c=b.precision),"withRange"in b&&t(7,h=b.withRange)},[n,i,s,o,a,l,c,h,d,m,g,$,A,w,u,f,R,I,U,q,j,L,V,C,F]}class rt extends we{constructor(e){super(),ye(this,e,tc,ec,$e,{value:0,min:1,max:2,rangeMin:3,rangeMax:4,step:5,ctrlMultiplier:14,shiftMultiplier:15,precision:6,withRange:7})}}function nc(r){const e=r-1;return e*e*e+1}function mt(r,{delay:e=0,duration:t=400,easing:n=nc}={}){const i=getComputedStyle(r),s=+i.opacity,o=parseFloat(i.height),a=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),u=parseFloat(i.marginTop),f=parseFloat(i.marginBottom),c=parseFloat(i.borderTopWidth),h=parseFloat(i.borderBottomWidth);return{delay:e,duration:t,easing:n,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*s};height: ${m*o}px;padding-top: ${m*a}px;padding-bottom: ${m*l}px;margin-top: ${m*u}px;margin-bottom: ${m*f}px;border-top-width: ${m*c}px;border-bottom-width: ${m*h}px;`}}const rc=r=>({}),Li=r=>({}),ic=r=>({}),xi=r=>({});function sc(r){let e,t,n;const i=r[10].header,s=Ce(i,r,r[15],xi);return t=new jl({}),{c(){s&&s.c(),e=se(),P(t.$$.fragment)},l(o){s&&s.l(o),e=oe(o),B(t.$$.fragment,o)},m(o,a){s&&s.m(o,a),O(o,e,a),M(t,o,a),n=!0},p(o,a){s&&s.p&&(!n||a&32768)&&Re(s,i,o,o[15],n?Ne(i,o[15],a,ic):Fe(o[15]),xi)},i(o){n||(y(s,o),y(t.$$.fragment,o),n=!0)},o(o){k(s,o),k(t.$$.fragment,o),n=!1},d(o){s&&s.d(o),o&&S(e),z(t,o)}}}function Oi(r){let e,t,n,i,s,o;const a=r[10].content,l=Ce(a,r,r[15],Li);return{c(){e=J("article"),l&&l.c(),this.h()},l(u){e=Q(u,"ARTICLE",{style:!0,class:!0});var f=ne(e);l&&l.l(f),f.forEach(S),this.h()},h(){x(e,"style",t=`max-height:${r[7]}px;width:${r[6]}px;left:${r[9]}px;top:${r[8]}px;`),x(e,"class","svelte-1rlf41s")},m(u,f){O(u,e,f),l&&l.m(e,null),i=!0,s||(o=[Ie(e,"mouseover",r[13]),Ie(e,"mouseout",r[14])],s=!0)},p(u,f){l&&l.p&&(!i||f&32768)&&Re(l,a,u,u[15],i?Ne(a,u[15],f,rc):Fe(u[15]),Li),(!i||f&960&&t!==(t=`max-height:${u[7]}px;width:${u[6]}px;left:${u[9]}px;top:${u[8]}px;`))&&x(e,"style",t)},i(u){i||(y(l,u),Zt(()=>{n||(n=ht(e,mt,{duration:150},!0)),n.run(1)}),i=!0)},o(u){k(l,u),n||(n=ht(e,mt,{duration:150},!1)),n.run(0),i=!1},d(u){u&&S(e),l&&l.d(u),u&&n&&n.end(),s=!1,pt(o)}}}function oc(r){let e,t,n,i,s;t=new nt({props:{title:r[0],type:r[1],style:`height:${r[3].height};width:${r[3].width};`,justifyContent:"space-between",$$slots:{default:[sc]},$$scope:{ctx:r}}}),t.$on("click",r[11]),t.$on("focusout",r[12]);let o=(r[5]&&!r[2]||r[4])&&Oi(r);return{c(){e=J("main"),P(t.$$.fragment),n=se(),o&&o.c(),this.h()},l(a){e=Q(a,"MAIN",{style:!0,class:!0});var l=ne(e);B(t.$$.fragment,l),n=oe(l),o&&o.l(l),l.forEach(S),this.h()},h(){x(e,"style",i=`height:${r[3].height};width:${r[3].width};${r[3].main}`),x(e,"class","svelte-1rlf41s")},m(a,l){O(a,e,l),M(t,e,null),H(e,n),o&&o.m(e,null),s=!0},p(a,[l]){const u={};l&1&&(u.title=a[0]),l&2&&(u.type=a[1]),l&8&&(u.style=`height:${a[3].height};width:${a[3].width};`),l&32768&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),a[5]&&!a[2]||a[4]?o?(o.p(a,l),l&52&&y(o,1)):(o=Oi(a),o.c(),y(o,1),o.m(e,null)):o&&(Ge(),k(o,1,1,()=>{o=null}),He()),(!s||l&8&&i!==(i=`height:${a[3].height};width:${a[3].width};${a[3].main}`))&&x(e,"style",i)},i(a){s||(y(t.$$.fragment,a),y(o),s=!0)},o(a){k(t.$$.fragment,a),k(o),s=!1},d(a){a&&S(e),z(t),o&&o.d()}}}function ac(r,e,t){let{$$slots:n={},$$scope:i}=e,{title:s=""}=e,{type:o="default"}=e,{hideOnClick:a=!1}=e,{css:l={height:"48px",width:"100%",main:""}}=e,u=!1,f=!1,c=0,h=0,m=0,p=0;const d=A=>{const w=A.currentTarget;if(!w)throw new Error("Not found target for button in drop down");if(!(w instanceof HTMLElement))throw new Error("Target for button is not html element");const R=w.getBoundingClientRect(),I=(visualViewport==null?void 0:visualViewport.height)||720;t(6,c=R.width),t(8,m=R.bottom),t(9,p=R.left),t(7,h=I-m),t(4,u=!u)},_=()=>setTimeout(()=>t(4,u=!1),100),g=()=>t(5,f=!0),$=()=>t(5,f=!1);return r.$$set=A=>{"title"in A&&t(0,s=A.title),"type"in A&&t(1,o=A.type),"hideOnClick"in A&&t(2,a=A.hideOnClick),"css"in A&&t(3,l=A.css),"$$scope"in A&&t(15,i=A.$$scope)},[s,o,a,l,u,f,c,h,m,p,n,d,_,g,$,i]}class Vs extends we{constructor(e){super(),ye(this,e,ac,oc,$e,{title:0,type:1,hideOnClick:2,css:3})}}const lc=r=>({item:r&1}),Gi=r=>({item:r[0]});function Hi(r,e,t){const n=r.slice();return n[13]=e[t],n}const uc=r=>({item:r&2}),ji=r=>({item:r[13]});function fc(r){let e;return{c(){e=ue(r[0])},l(t){e=fe(t,r[0])},m(t,n){O(t,e,n)},p(t,n){n&1&&st(e,t[0])},d(t){t&&S(e)}}}function cc(r){let e;const t=r[8].default,n=Ce(t,r,r[12],Gi),i=n||fc(r);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){n?n.p&&(!e||o&4097)&&Re(n,t,s,s[12],e?Ne(t,s[12],o,lc):Fe(s[12]),Gi):i&&i.p&&(!e||o&1)&&i.p(s,e?o:-1)},i(s){e||(y(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function Wi(r){let e,t,n,i,s,o,a,l;function u(...m){return r[11](r[13],...m)}const f=r[8].default,c=Ce(f,r,r[12],ji),h=c||hc(r);return{c(){e=J("label"),t=J("input"),i=se(),h&&h.c(),s=se(),this.h()},l(m){e=Q(m,"LABEL",{class:!0});var p=ne(e);t=Q(p,"INPUT",{type:!0,class:!0}),i=oe(p),h&&h.l(p),s=oe(p),p.forEach(S),this.h()},h(){x(t,"type","radio"),t.__value=n=r[13],t.value=t.__value,x(t,"class","svelte-1plfxql"),r[10][0].push(t),x(e,"class","svelte-1plfxql"),tt(e,"active",r[13]===r[0])},m(m,p){O(m,e,p),H(e,t),t.checked=t.__value===r[0],H(e,i),h&&h.m(e,null),H(e,s),o=!0,a||(l=[Ie(t,"change",r[9]),Ie(t,"change",u)],a=!0)},p(m,p){r=m,(!o||p&2&&n!==(n=r[13]))&&(t.__value=n,t.value=t.__value),p&1&&(t.checked=t.__value===r[0]),c?c.p&&(!o||p&4098)&&Re(c,f,r,r[12],o?Ne(f,r[12],p,uc):Fe(r[12]),ji):h&&h.p&&(!o||p&2)&&h.p(r,o?p:-1),(!o||p&3)&&tt(e,"active",r[13]===r[0])},i(m){o||(y(h,m),o=!0)},o(m){k(h,m),o=!1},d(m){m&&S(e),r[10][0].splice(r[10][0].indexOf(t),1),h&&h.d(m),a=!1,pt(l)}}}function hc(r){let e=r[13]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,i){O(n,t,i)},p(n,i){i&2&&e!==(e=n[13]+"")&&st(t,e)},d(n){n&&S(t)}}}function Vi(r){let e,t,n=r[13]!=r[2]&&Wi(r);return{c(){n&&n.c(),e=De()},l(i){n&&n.l(i),e=De()},m(i,s){n&&n.m(i,s),O(i,e,s),t=!0},p(i,s){i[13]!=i[2]?n?(n.p(i,s),s&6&&y(n,1)):(n=Wi(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(Ge(),k(n,1,1,()=>{n=null}),He())},i(i){t||(y(n),t=!0)},o(i){k(n),t=!1},d(i){n&&n.d(i),i&&S(e)}}}function mc(r){let e,t,n=r[1],i=[];for(let o=0;o<n.length;o+=1)i[o]=Vi(Hi(r,n,o));const s=o=>k(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=De()},l(o){for(let a=0;a<i.length;a+=1)i[a].l(o);e=De()},m(o,a){for(let l=0;l<i.length;l+=1)i[l].m(o,a);O(o,e,a),t=!0},p(o,a){if(a&4231){n=o[1];let l;for(l=0;l<n.length;l+=1){const u=Hi(o,n,l);i[l]?(i[l].p(u,a),y(i[l],1)):(i[l]=Vi(u),i[l].c(),y(i[l],1),i[l].m(e.parentNode,e))}for(Ge(),l=n.length;l<i.length;l+=1)s(l);He()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)y(i[a]);t=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)k(i[a]);t=!1},d(o){gn(i,o),o&&S(e)}}}function dc(r){let e,t;return e=new Vs({props:{css:r[3],hideOnClick:r[4],type:r[5],title:r[6],$$slots:{content:[mc],header:[cc]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&8&&(s.css=n[3]),i&16&&(s.hideOnClick=n[4]),i&32&&(s.type=n[5]),i&64&&(s.title=n[6]),i&4103&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function pc(r,e,t){let{$$slots:n={},$$scope:i}=e,{value:s}=e,{items:o}=e,{placeholder:a=void 0}=e,{css:l={height:"48px",width:"100%",main:""}}=e,{hideOnClick:u=!1}=e,{type:f="default"}=e,{title:c=""}=e;const h=yt(),m=[[]];function p(){s=this.__value,t(0,s)}const d=(_,g)=>{g.currentTarget.checked&&h("change",{value:_})};return r.$$set=_=>{"value"in _&&t(0,s=_.value),"items"in _&&t(1,o=_.items),"placeholder"in _&&t(2,a=_.placeholder),"css"in _&&t(3,l=_.css),"hideOnClick"in _&&t(4,u=_.hideOnClick),"type"in _&&t(5,f=_.type),"title"in _&&t(6,c=_.title),"$$scope"in _&&t(12,i=_.$$scope)},[s,o,a,l,u,f,c,h,n,p,m,d,i]}class Pt extends we{constructor(e){super(),ye(this,e,pc,dc,$e,{value:0,items:1,placeholder:2,css:3,hideOnClick:4,type:5,title:6})}}function _c(r){let e,t,n,i=[{width:r[5]},{height:r[5]},{viewBox:r[4]},{style:n="--sx: "+r[3]+"; --sy: "+r[2]+"; --r: "+r[1]},r[6]],s={};for(let o=0;o<i.length;o+=1)s=ce(s,i[o]);return{c(){e=Qn("svg"),t=Qn("path"),this.h()},l(o){e=er(o,"svg",{width:!0,height:!0,viewBox:!0,style:!0});var a=ne(e);t=er(a,"path",{d:!0,class:!0}),ne(t).forEach(S),a.forEach(S),this.h()},h(){x(t,"d",r[0]),x(t,"class","svelte-6o90uh"),_n(e,s),tt(e,"svelte-6o90uh",!0)},m(o,a){O(o,e,a),H(e,t)},p(o,[a]){a&1&&x(t,"d",o[0]),_n(e,s=We(i,[a&32&&{width:o[5]},a&32&&{height:o[5]},a&16&&{viewBox:o[4]},a&14&&n!==(n="--sx: "+o[3]+"; --sy: "+o[2]+"; --r: "+o[1])&&{style:n},a&64&&o[6]])),tt(e,"svelte-6o90uh",!0)},i:je,o:je,d(o){o&&S(e)}}}function gc(r,e,t){let n,i,s,o,a,l;const u=["type","path","size","viewbox","flip","rotate"];let f=tr(e,u);const c={mdi:{size:24,viewbox:"0 0 24 24"},bootstrap:{size:24,viewbox:"0 0 16 16"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}};let{type:h=null}=e,{path:m}=e,{size:p=null}=e,{viewbox:d=null}=e,{flip:_="none"}=e,{rotate:g=0}=e;return r.$$set=$=>{e=ce(ce({},e),ke($)),t(6,f=tr(e,u)),"type"in $&&t(7,h=$.type),"path"in $&&t(0,m=$.path),"size"in $&&t(8,p=$.size),"viewbox"in $&&t(9,d=$.viewbox),"flip"in $&&t(10,_=$.flip),"rotate"in $&&t(11,g=$.rotate)},r.$$.update=()=>{r.$$.dirty&128&&t(12,n=h?c[h]:c.default),r.$$.dirty&4352&&t(5,i=p||n.size),r.$$.dirty&4608&&t(4,s=d||n.viewbox),r.$$.dirty&1024&&t(3,o=["both","horizontal"].includes(_)?"-1":"1"),r.$$.dirty&1024&&t(2,a=["both","vertical"].includes(_)?"-1":"1"),r.$$.dirty&2048&&t(1,l=isNaN(g)?g:g+"deg")},[m,l,a,o,s,i,f,h,p,d,_,g,n]}class Kr extends we{constructor(e){super(),ye(this,e,gc,_c,$e,{type:7,path:0,size:8,viewbox:9,flip:10,rotate:11})}}function bc(r){let e,t;const n=r[1].default,i=Ce(n,r,r[0],null);return{c(){e=J("article"),i&&i.c(),this.h()},l(s){e=Q(s,"ARTICLE",{class:!0});var o=ne(e);i&&i.l(o),o.forEach(S),this.h()},h(){x(e,"class","svelte-i0r9v3")},m(s,o){O(s,e,o),i&&i.m(e,null),t=!0},p(s,[o]){i&&i.p&&(!t||o&1)&&Re(i,n,s,s[0],t?Ne(n,s[0],o,null):Fe(s[0]),null)},i(s){t||(y(i,s),t=!0)},o(s){k(i,s),t=!1},d(s){s&&S(e),i&&i.d(s)}}}function vc(r,e,t){let{$$slots:n={},$$scope:i}=e;return r.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,n]}class Xt extends we{constructor(e){super(),ye(this,e,vc,bc,$e,{})}}function $c(r){let e,t,n,i,s,o,a,l,u,f,c,h;function m(g){r[2](g)}let p={step:r[1]};r[0].x!==void 0&&(p.value=r[0].x),i=new rt({props:p}),_e.push(()=>ge(i,"value",m)),i.$on("change",r[3]);function d(g){r[4](g)}let _={step:r[1]};return r[0].y!==void 0&&(_.value=r[0].y),f=new rt({props:_}),_e.push(()=>ge(f,"value",d)),f.$on("change",r[5]),{c(){e=J("section"),t=J("span"),n=ue("x"),P(i.$$.fragment),o=se(),a=J("section"),l=J("span"),u=ue("y"),P(f.$$.fragment),this.h()},l(g){e=Q(g,"SECTION",{class:!0});var $=ne(e);t=Q($,"SPAN",{class:!0});var A=ne(t);n=fe(A,"x"),A.forEach(S),B(i.$$.fragment,$),$.forEach(S),o=oe(g),a=Q(g,"SECTION",{class:!0});var w=ne(a);l=Q(w,"SPAN",{class:!0});var R=ne(l);u=fe(R,"y"),R.forEach(S),B(f.$$.fragment,w),w.forEach(S),this.h()},h(){x(t,"class","svelte-22x9w9"),x(e,"class","svelte-22x9w9"),x(l,"class","svelte-22x9w9"),x(a,"class","svelte-22x9w9")},m(g,$){O(g,e,$),H(e,t),H(t,n),M(i,e,null),O(g,o,$),O(g,a,$),H(a,l),H(l,u),M(f,a,null),h=!0},p(g,$){const A={};$&2&&(A.step=g[1]),!s&&$&1&&(s=!0,A.value=g[0].x,be(()=>s=!1)),i.$set(A);const w={};$&2&&(w.step=g[1]),!c&&$&1&&(c=!0,w.value=g[0].y,be(()=>c=!1)),f.$set(w)},i(g){h||(y(i.$$.fragment,g),y(f.$$.fragment,g),h=!0)},o(g){k(i.$$.fragment,g),k(f.$$.fragment,g),h=!1},d(g){g&&S(e),z(i),g&&S(o),g&&S(a),z(f)}}}function wc(r){let e,t;return e=new Xt({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&67&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function yc(r,e,t){let{value:n}=e,{step:i=1}=e;function s(u){r.$$.not_equal(n.x,u)&&(n.x=u,t(0,n))}function o(u){Ae.call(this,r,u)}function a(u){r.$$.not_equal(n.y,u)&&(n.y=u,t(0,n))}function l(u){Ae.call(this,r,u)}return r.$$set=u=>{"value"in u&&t(0,n=u.value),"step"in u&&t(1,i=u.step)},[n,i,s,o,a,l]}class yn extends we{constructor(e){super(),ye(this,e,yc,wc,$e,{value:0,step:1})}}function Ec(r){let e,t,n,i;return{c(){e=ue("Цвет"),t=J("input"),this.h()},l(s){e=fe(s,"Цвет"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){x(t,"type","color")},m(s,o){O(s,e,o),O(s,t,o),At(t,r[0].color),n||(i=[Ie(t,"input",r[2]),Ie(t,"change",r[1])],n=!0)},p(s,o){o&1&&At(t,s[0].color)},d(s){s&&S(e),s&&S(t),n=!1,pt(i)}}}function kc(r){let e,t,n,i;function s(a){r[3](a)}let o={};return r[0].offset!==void 0&&(o.value=r[0].offset),t=new yn({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[4]),{c(){e=ue("Сдвиг"),P(t.$$.fragment)},l(a){e=fe(a,"Сдвиг"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].offset,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function Ac(r){let e,t,n,i;function s(a){r[5](a)}let o={min:0,max:1e3};return r[0].blur!==void 0&&(o.value=r[0].blur),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[6]),{c(){e=ue("Размытие"),P(t.$$.fragment)},l(a){e=fe(a,"Размытие"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].blur,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function Sc(r){let e,t,n,i,s,o;return e=new Xe({props:{$$slots:{default:[Ec]},$$scope:{ctx:r}}}),n=new Xe({props:{$$slots:{default:[kc]},$$scope:{ctx:r}}}),s=new Xe({props:{$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),P(s.$$.fragment)},l(a){B(e.$$.fragment,a),t=oe(a),B(n.$$.fragment,a),i=oe(a),B(s.$$.fragment,a)},m(a,l){M(e,a,l),O(a,t,l),M(n,a,l),O(a,i,l),M(s,a,l),o=!0},p(a,l){const u={};l&129&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const f={};l&129&&(f.$$scope={dirty:l,ctx:a}),n.$set(f);const c={};l&129&&(c.$$scope={dirty:l,ctx:a}),s.$set(c)},i(a){o||(y(e.$$.fragment,a),y(n.$$.fragment,a),y(s.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(n.$$.fragment,a),k(s.$$.fragment,a),o=!1},d(a){z(e,a),a&&S(t),z(n,a),a&&S(i),z(s,a)}}}function Tc(r){let e,t;return e=new Xt({props:{$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&129&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Ic(r,e,t){let{value:n}=e;function i(f){Ae.call(this,r,f)}function s(){n.color=this.value,t(0,n)}function o(f){r.$$.not_equal(n.offset,f)&&(n.offset=f,t(0,n))}function a(f){Ae.call(this,r,f)}function l(f){r.$$.not_equal(n.blur,f)&&(n.blur=f,t(0,n))}function u(f){Ae.call(this,r,f)}return r.$$set=f=>{"value"in f&&t(0,n=f.value)},[n,i,s,o,a,l,u]}class Cc extends we{constructor(e){super(),ye(this,e,Ic,Tc,$e,{value:0})}}function Rc(r){let e,t,n;return{c(){e=J("input"),this.h()},l(i){e=Q(i,"INPUT",{type:!0}),this.h()},h(){x(e,"type","color")},m(i,s){O(i,e,s),At(e,r[0]),t||(n=Ie(e,"input",r[1]),t=!0)},p(i,[s]){s&1&&At(e,i[0])},i:je,o:je,d(i){i&&S(e),t=!1,n()}}}function Fc(r,e,t){let{value:n}=e;function i(){n=this.value,t(0,n)}return r.$$set=s=>{"value"in s&&t(0,n=s.value)},[n,i]}class ln extends we{constructor(e){super(),ye(this,e,Fc,Rc,$e,{value:0})}}function Nc(r){let e,t,n,i;function s(a){r[1](a)}let o={};return r[0].value!==void 0&&(o.value=r[0].value),t=new ln({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[2]),{c(){e=ue("Цвет"),P(t.$$.fragment)},l(a){e=fe(a,"Цвет"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].value,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function Pc(r){let e,t;return e=new Xe({props:{$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&9&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Bc(r,e,t){let{value:n}=e;function i(o){r.$$.not_equal(n.value,o)&&(n.value=o,t(0,n))}function s(o){Ae.call(this,r,o)}return r.$$set=o=>{"value"in o&&t(0,n=o.value)},[n,i,s]}class Mc extends we{constructor(e){super(),ye(this,e,Bc,Pc,$e,{value:0})}}function zc(r){let e;const t=r[4].default,n=Ce(t,r,r[6],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&64)&&Re(n,t,i,i[6],e?Ne(t,i[6],s,null):Fe(i[6]),null)},i(i){e||(y(n,i),e=!0)},o(i){k(n,i),e=!1},d(i){n&&n.d(i)}}}function Uc(r){let e,t;return e=new nt({props:{title:r[2],active:r[0],width:r[1],$$slots:{default:[zc]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&4&&(s.title=n[2]),i&1&&(s.active=n[0]),i&2&&(s.width=n[1]),i&64&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Dc(r,e,t){let{$$slots:n={},$$scope:i}=e,{value:s}=e,{width:o=""}=e,{title:a=""}=e;const l=yt(),u=()=>l("change",t(0,s=!s));return r.$$set=f=>{"value"in f&&t(0,s=f.value),"width"in f&&t(1,o=f.width),"title"in f&&t(2,a=f.title),"$$scope"in f&&t(6,i=f.$$scope)},[s,o,a,l,n,u,i]}class Yn extends we{constructor(e){super(),ye(this,e,Dc,Uc,$e,{value:0,width:1,title:2})}}function Lc(r){let e;return{c(){e=ue("Выбрать файл...")},l(t){e=fe(t,"Выбрать файл...")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function xc(r){let e,t,n,i,s,o,a;const l=r[5].default,u=Ce(l,r,r[4],null),f=u||Lc();return{c(){e=J("label"),f&&f.c(),t=se(),n=J("input"),this.h()},l(c){e=Q(c,"LABEL",{class:!0});var h=ne(e);f&&f.l(h),t=oe(h),n=Q(h,"INPUT",{accept:!0,type:!0,class:!0}),h.forEach(S),this.h()},h(){x(n,"accept",r[0]),x(n,"type","file"),x(n,"class","svelte-187m8cr"),x(e,"class",i=nr(r[2])+" svelte-187m8cr")},m(c,h){O(c,e,h),f&&f.m(e,null),H(e,t),H(e,n),s=!0,o||(a=Ie(n,"change",r[6]),o=!0)},p(c,[h]){u&&u.p&&(!s||h&16)&&Re(u,l,c,c[4],s?Ne(l,c[4],h,null):Fe(c[4]),null),(!s||h&1)&&x(n,"accept",c[0]),(!s||h&4&&i!==(i=nr(c[2])+" svelte-187m8cr"))&&x(e,"class",i)},i(c){s||(y(f,c),s=!0)},o(c){k(f,c),s=!1},d(c){c&&S(e),f&&f.d(c),o=!1,a()}}}function Oc(r,e,t){let{$$slots:n={},$$scope:i}=e,{accept:s=void 0}=e,{typeFilter:o=/.*/}=e,{class:a=""}=e;const l=yt(),u=f=>{const c=f.currentTarget.files;if(!c||c.length===0)return;const h=Array.from(c).filter(m=>{var p;return(p=m.type)==null?void 0:p.match(o)});h.length!==0&&(l("change",h),f.currentTarget.value="")};return r.$$set=f=>{"accept"in f&&t(0,s=f.accept),"typeFilter"in f&&t(1,o=f.typeFilter),"class"in f&&t(2,a=f.class),"$$scope"in f&&t(4,i=f.$$scope)},[s,o,a,l,i,n,u]}class Dr extends we{constructor(e){super(),ye(this,e,Oc,xc,$e,{accept:0,typeFilter:1,class:2})}}function Gc(r){let e;return{c(){e=ue("Выберите файл")},l(t){e=fe(t,"Выберите файл")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Hc(r){let e,t;return e=new nt({props:{$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function jc(r){let e,t,n,i,s,o,a,l;return t=new Dr({props:{accept:r[0],typeFilter:r[1],$$slots:{default:[Hc]},$$scope:{ctx:r}}}),t.$on("change",r[3]),{c(){e=J("main"),P(t.$$.fragment),n=se(),i=J("span"),s=ue("или перетащите сюда."),this.h()},l(u){e=Q(u,"MAIN",{class:!0});var f=ne(e);B(t.$$.fragment,f),n=oe(f),i=Q(f,"SPAN",{class:!0});var c=ne(i);s=fe(c,"или перетащите сюда."),c.forEach(S),f.forEach(S),this.h()},h(){x(i,"class","svelte-e7qrnw"),x(e,"class","svelte-e7qrnw")},m(u,f){O(u,e,f),M(t,e,null),H(e,n),H(e,i),H(i,s),o=!0,a||(l=[Ie(e,"dragover",Wc),Ie(e,"drop",r[2])],a=!0)},p(u,[f]){const c={};f&1&&(c.accept=u[0]),f&2&&(c.typeFilter=u[1]),f&32&&(c.$$scope={dirty:f,ctx:u}),t.$set(c)},i(u){o||(y(t.$$.fragment,u),o=!0)},o(u){k(t.$$.fragment,u),o=!1},d(u){u&&S(e),z(t),a=!1,pt(l)}}}const Wc=r=>r.preventDefault();function Vc(r,e,t){let{accept:n=void 0}=e,{typeFilter:i=/.*/g}=e;const s=yt();function o(l){var c;l.preventDefault();const u=(c=l.dataTransfer)==null?void 0:c.files;if(!u)return;const f=Array.from(u).filter(h=>{var m;return(m=h.type)==null?void 0:m.match(i)});f.length&&s("change",f)}function a(l){Ae.call(this,r,l)}return r.$$set=l=>{"accept"in l&&t(0,n=l.accept),"typeFilter"in l&&t(1,i=l.typeFilter)},[n,i,o,a]}class qs extends we{constructor(e){super(),ye(this,e,Vc,jc,$e,{accept:0,typeFilter:1})}}function qi(r){let e,t,n,i,s,o,a,l;return n=new Xe({props:{error:r[1],$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){e=J("section"),t=J("section"),P(n.$$.fragment),i=se(),s=J("section"),o=J("img"),this.h()},l(u){e=Q(u,"SECTION",{class:!0});var f=ne(e);t=Q(f,"SECTION",{class:!0});var c=ne(t);B(n.$$.fragment,c),c.forEach(S),i=oe(f),s=Q(f,"SECTION",{class:!0});var h=ne(s);o=Q(h,"IMG",{src:!0,alt:!0,class:!0}),h.forEach(S),f.forEach(S),this.h()},h(){x(t,"class","svelte-n6jyo5"),Fn(o.src,a=r[4])||x(o,"src",a),x(o,"alt",r[5]),x(o,"class","svelte-n6jyo5"),x(s,"class","svelte-n6jyo5"),x(e,"class","preview svelte-n6jyo5")},m(u,f){O(u,e,f),H(e,t),M(n,t,null),H(e,i),H(e,s),H(s,o),l=!0},p(u,f){const c={};f&2&&(c.error=u[1]),f&131110&&(c.$$scope={dirty:f,ctx:u}),n.$set(c),(!l||f&16&&!Fn(o.src,a=u[4]))&&x(o,"src",a),(!l||f&32)&&x(o,"alt",u[5])},i(u){l||(y(n.$$.fragment,u),l=!0)},o(u){k(n.$$.fragment,u),l=!1},d(u){u&&S(e),z(n)}}}function qc(r){let e,t,n,i;return{c(){e=ue("Название "),t=J("input"),this.h()},l(s){e=fe(s,"Название "),t=Q(s,"INPUT",{class:!0}),this.h()},h(){x(t,"class","svelte-n6jyo5")},m(s,o){O(s,e,o),O(s,t,o),At(t,r[5]),n||(i=[Ie(t,"input",r[11]),Ie(t,"input",r[12])],n=!0)},p(s,o){o&32&&t.value!==s[5]&&At(t,s[5])},d(s){s&&S(e),s&&S(t),n=!1,pt(i)}}}function Zc(r){let e,t,n,i;e=new qs({props:{accept:"image/*",typeFilter:/^image\//}}),e.$on("change",r[7]);let s=r[3]&&qi(r);return{c(){P(e.$$.fragment),t=se(),s&&s.c(),n=De()},l(o){B(e.$$.fragment,o),t=oe(o),s&&s.l(o),n=De()},m(o,a){M(e,o,a),O(o,t,a),s&&s.m(o,a),O(o,n,a),i=!0},p(o,a){o[3]?s?(s.p(o,a),a&8&&y(s,1)):(s=qi(o),s.c(),y(s,1),s.m(n.parentNode,n)):s&&(Ge(),k(s,1,1,()=>{s=null}),He())},i(o){i||(y(e.$$.fragment,o),y(s),i=!0)},o(o){k(e.$$.fragment,o),k(s),i=!1},d(o){z(e,o),o&&S(t),s&&s.d(o),o&&S(n)}}}function Xc(r){let e,t,n,i,s,o;return t=new Xt({props:{$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){e=J("article"),P(t.$$.fragment),n=se(),i=J("section"),s=ue(`Добавленные паттерны пропадут между перезагрузками страницы, но их можно сохранить в .meme
			файле.`),this.h()},l(a){e=Q(a,"ARTICLE",{class:!0});var l=ne(e);B(t.$$.fragment,l),n=oe(l),i=Q(l,"SECTION",{});var u=ne(i);s=fe(u,`Добавленные паттерны пропадут между перезагрузками страницы, но их можно сохранить в .meme
			файле.`),u.forEach(S),l.forEach(S),this.h()},h(){x(e,"class","svelte-n6jyo5")},m(a,l){O(a,e,l),M(t,e,null),H(e,n),H(e,i),H(i,s),o=!0},p(a,l){const u={};l&131134&&(u.$$scope={dirty:l,ctx:a}),t.$set(u)},i(a){o||(y(t.$$.fragment,a),o=!0)},o(a){k(t.$$.fragment,a),o=!1},d(a){a&&S(e),z(t)}}}function Kc(r){let e,t;return{c(){e=J("header"),t=ue("Добавить паттерн"),this.h()},l(n){e=Q(n,"HEADER",{slot:!0});var i=ne(e);t=fe(i,"Добавить паттерн"),i.forEach(S),this.h()},h(){x(e,"slot","title")},m(n,i){O(n,e,i),H(e,t)},p:je,d(n){n&&S(e)}}}function Yc(r){let e;return{c(){e=ue("Отмена")},l(t){e=fe(t,"Отмена")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Jc(r){let e;return{c(){e=ue("Добавить")},l(t){e=fe(t,"Добавить")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Qc(r){let e,t,n,i,s;return t=new nt({props:{width:"128px",type:"danger",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),t.$on("click",r[10]),i=new nt({props:{width:"128px",type:"primary",style:"margin-left:16px;",disabled:!r[5],$$slots:{default:[Jc]},$$scope:{ctx:r}}}),i.$on("click",r[9]),{c(){e=J("footer"),P(t.$$.fragment),n=se(),P(i.$$.fragment),this.h()},l(o){e=Q(o,"FOOTER",{slot:!0,class:!0});var a=ne(e);B(t.$$.fragment,a),n=oe(a),B(i.$$.fragment,a),a.forEach(S),this.h()},h(){x(e,"slot","footer"),x(e,"class","svelte-n6jyo5")},m(o,a){O(o,e,a),M(t,e,null),H(e,n),M(i,e,null),s=!0},p(o,a){const l={};a&131072&&(l.$$scope={dirty:a,ctx:o}),t.$set(l);const u={};a&32&&(u.disabled=!o[5]),a&131072&&(u.$$scope={dirty:a,ctx:o}),i.$set(u)},i(o){s||(y(t.$$.fragment,o),y(i.$$.fragment,o),s=!0)},o(o){k(t.$$.fragment,o),k(i.$$.fragment,o),s=!1},d(o){o&&S(e),z(t),z(i)}}}function eh(r){let e,t,n;function i(o){r[13](o)}let s={$$slots:{footer:[Qc],title:[Kc],default:[Xc]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.open=r[0]),e=new bn({props:s}),_e.push(()=>ge(e,"open",i)),e.$on("close",r[8]),e.$on("paste",r[14]),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,[a]){const l={};a&131134&&(l.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,l.open=o[0],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function th(r,e,t){let{open:n=!0}=e,{error:i=""}=e,{validateName:s=()=>""}=e,o=null,a="",l="";function u(w){o!=w&&(a&&(URL.revokeObjectURL(a),t(4,a="")),t(3,o=w),o&&(t(4,a=URL.createObjectURL(o)),t(5,l=o.name.substring(0,o.name.lastIndexOf(".")))))}function f(w){var U,q;const R=document.activeElement;if(R instanceof HTMLInputElement||R instanceof HTMLTextAreaElement)return;const I=(U=w.clipboardData)==null?void 0:U.items;if(I)for(let j=0;j<I.length;j++){const L=I[j];if(!((q=L.type)!=null&&q.match(/^image/)))continue;const V=L.getAsFile();V&&u(V);return}}function c(w){u(w.detail[0])}const h=yt();function m(w){var R;if(h("close",{action:"cancel"},{cancelable:!0})){t(0,n=!1);return}(R=w==null?void 0:w.preventDefault)==null||R.call(w)}function p(){if(!o)return;const w=s(l);if(w){t(1,i=w);return}h("submit",{action:"submit",image:o,name:l},{cancelable:!0})&&(t(0,n=!1),t(3,o=null),t(5,l=""),URL.revokeObjectURL(a),t(4,a=""))}wn(()=>()=>{a&&URL.revokeObjectURL(a)});const d=()=>m();function _(){l=this.value,t(5,l)}const g=()=>{t(1,i=s(l))};function $(w){n=w,t(0,n)}const A=w=>f(w.detail.event);return r.$$set=w=>{"open"in w&&t(0,n=w.open),"error"in w&&t(1,i=w.error),"validateName"in w&&t(2,s=w.validateName)},[n,i,s,o,a,l,f,c,m,p,d,_,g,$,A]}class nh extends we{constructor(e){super(),ye(this,e,th,eh,$e,{open:0,error:1,validateName:2})}}class rh{constructor(e=new Array){Te(this,"subscribers",new Set);this.patterns=e}subscribe(e){return this.subscribers.add(e),e(this.patterns),()=>{this.subscribers.delete(e)}}addPattern(...e){this.patterns=this.patterns.filter(t=>!e.find(n=>n.name==t.name)),this.patterns.push(...e),this.subscribers.forEach(t=>t(this.patterns))}getTexture(e){const t=this.patterns.find(n=>n.name==e);if(!t)throw new Error(`Not found pattern '${e}'`);return t.textureId}has(e){return this.patterns.find(n=>n.name==e)!=null}delete(e){this.patterns.splice(this.patterns.findIndex(t=>t.name==e),1),this.subscribers.forEach(t=>t(this.patterns))}clear(){this.patterns=[],this.subscribers.forEach(e=>e(this.patterns))}}const It=new rh;function ih(r){let e=r[17]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,i){O(n,t,i)},p(n,i){i&131072&&e!==(e=n[17]+"")&&st(t,e)},d(n){n&&S(t)}}}function sh(r){let e,t;return e=new js({props:{size:28}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function oh(r){let e,t,n,i,s,o;function a(u){r[5](u)}let l={items:r[2].map(Xi),$$slots:{default:[ih,({item:u})=>({17:u}),({item:u})=>u?131072:0]},$$scope:{ctx:r}};return r[0].name!==void 0&&(l.value=r[0].name),t=new Pt({props:l}),_e.push(()=>ge(t,"value",a)),s=new nt({props:{title:"Добавить изображение как паттерн",width:"fin-content",$$slots:{default:[sh]},$$scope:{ctx:r}}}),s.$on("click",r[6]),{c(){e=ue("Паттерн "),P(t.$$.fragment),i=se(),P(s.$$.fragment)},l(u){e=fe(u,"Паттерн "),B(t.$$.fragment,u),i=oe(u),B(s.$$.fragment,u)},m(u,f){O(u,e,f),M(t,u,f),O(u,i,f),M(s,u,f),o=!0},p(u,f){const c={};f&4&&(c.items=u[2].map(Xi)),f&393216&&(c.$$scope={dirty:f,ctx:u}),!n&&f&1&&(n=!0,c.value=u[0].name,be(()=>n=!1)),t.$set(c);const h={};f&262144&&(h.$$scope={dirty:f,ctx:u}),s.$set(h)},i(u){o||(y(t.$$.fragment,u),y(s.$$.fragment,u),o=!0)},o(u){k(t.$$.fragment,u),k(s.$$.fragment,u),o=!1},d(u){u&&S(e),z(t,u),u&&S(i),z(s,u)}}}function ah(r){let e,t,n,i;function s(a){r[7](a)}let o={withRange:!0,min:-360,max:360,step:.5};return r[0].rotate!==void 0&&(o.value=r[0].rotate),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[8]),{c(){e=ue("Поворот "),P(t.$$.fragment)},l(a){e=fe(a,"Поворот "),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].rotate,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function lh(r){let e,t,n,i;function s(a){r[9](a)}let o={};return r[0].shift!==void 0&&(o.value=r[0].shift),t=new yn({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[10]),{c(){e=ue("Сдвиг"),P(t.$$.fragment)},l(a){e=fe(a,"Сдвиг"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].shift,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function uh(r){let e;return{c(){e=ue("Авто")},l(t){e=fe(t,"Авто")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function fh(r){let e,t,n;return t=new Yn({props:{title:"Авто = растягивать по прямоугольнику",value:r[0].scale==="font",$$slots:{default:[uh]},$$scope:{ctx:r}}}),t.$on("change",r[11]),t.$on("change",r[12]),{c(){e=ue("Масштаб "),P(t.$$.fragment)},l(i){e=fe(i,"Масштаб "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=i[0].scale==="font"),s&262144&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function Zi(r){let e,t;return e=new Xe({props:{$$slots:{default:[ch]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&262145&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function ch(r){let e,t,n,i,s;function o(l){r[13](l)}let a={step:.1};return r[0].scale!==void 0&&(a.value=r[0].scale),n=new yn({props:a}),_e.push(()=>ge(n,"value",o)),n.$on("change",r[14]),{c(){e=J("div"),t=se(),P(n.$$.fragment)},l(l){e=Q(l,"DIV",{}),ne(e).forEach(S),t=oe(l),B(n.$$.fragment,l)},m(l,u){O(l,e,u),O(l,t,u),M(n,l,u),s=!0},p(l,u){const f={};!i&&u&1&&(i=!0,f.value=l[0].scale,be(()=>i=!1)),n.$set(f)},i(l){s||(y(n.$$.fragment,l),s=!0)},o(l){k(n.$$.fragment,l),s=!1},d(l){l&&S(e),l&&S(t),z(n,l)}}}function hh(r){let e,t,n,i,s,o,a,l,u,f,c,h;e=new Xe({props:{for:"ignore",$$slots:{default:[oh]},$$scope:{ctx:r}}}),n=new Xe({props:{$$slots:{default:[ah]},$$scope:{ctx:r}}}),s=new Xe({props:{$$slots:{default:[lh]},$$scope:{ctx:r}}}),a=new Xe({props:{$$slots:{default:[fh]},$$scope:{ctx:r}}});let m=r[0].scale!=="font"&&Zi(r);function p(_){r[15](_)}let d={validateName:r[3]};return r[1]!==void 0&&(d.open=r[1]),f=new nh({props:d}),_e.push(()=>ge(f,"open",p)),f.$on("submit",r[4]),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),P(s.$$.fragment),o=se(),P(a.$$.fragment),l=se(),m&&m.c(),u=se(),P(f.$$.fragment)},l(_){B(e.$$.fragment,_),t=oe(_),B(n.$$.fragment,_),i=oe(_),B(s.$$.fragment,_),o=oe(_),B(a.$$.fragment,_),l=oe(_),m&&m.l(_),u=oe(_),B(f.$$.fragment,_)},m(_,g){M(e,_,g),O(_,t,g),M(n,_,g),O(_,i,g),M(s,_,g),O(_,o,g),M(a,_,g),O(_,l,g),m&&m.m(_,g),O(_,u,g),M(f,_,g),h=!0},p(_,[g]){const $={};g&262151&&($.$$scope={dirty:g,ctx:_}),e.$set($);const A={};g&262145&&(A.$$scope={dirty:g,ctx:_}),n.$set(A);const w={};g&262145&&(w.$$scope={dirty:g,ctx:_}),s.$set(w);const R={};g&262145&&(R.$$scope={dirty:g,ctx:_}),a.$set(R),_[0].scale!=="font"?m?(m.p(_,g),g&1&&y(m,1)):(m=Zi(_),m.c(),y(m,1),m.m(u.parentNode,u)):m&&(Ge(),k(m,1,1,()=>{m=null}),He());const I={};!c&&g&2&&(c=!0,I.open=_[1],be(()=>c=!1)),f.$set(I)},i(_){h||(y(e.$$.fragment,_),y(n.$$.fragment,_),y(s.$$.fragment,_),y(a.$$.fragment,_),y(m),y(f.$$.fragment,_),h=!0)},o(_){k(e.$$.fragment,_),k(n.$$.fragment,_),k(s.$$.fragment,_),k(a.$$.fragment,_),k(m),k(f.$$.fragment,_),h=!1},d(_){z(e,_),_&&S(t),z(n,_),_&&S(i),z(s,_),_&&S(o),z(a,_),_&&S(l),m&&m.d(_),_&&S(u),z(f,_)}}}const Xi=r=>r.name;function mh(r,e,t){let n;Tt(r,It,w=>t(2,n=w));let{value:i}=e;const s=yt();function o(w){return It.has(w)?"Это имя уже занято":""}function a(w){s("addPattern",w.detail),t(0,i.name=w.detail.name,i)}let l=!1;function u(w){r.$$.not_equal(i.name,w)&&(i.name=w,t(0,i))}const f=()=>t(1,l=!0);function c(w){r.$$.not_equal(i.rotate,w)&&(i.rotate=w,t(0,i))}function h(w){Ae.call(this,r,w)}function m(w){r.$$.not_equal(i.shift,w)&&(i.shift=w,t(0,i))}function p(w){Ae.call(this,r,w)}const d=w=>t(0,i.scale=w.detail?"font":{x:1,y:1},i);function _(w){Ae.call(this,r,w)}function g(w){r.$$.not_equal(i.scale,w)&&(i.scale=w,t(0,i))}function $(w){Ae.call(this,r,w)}function A(w){l=w,t(1,l)}return r.$$set=w=>{"value"in w&&t(0,i=w.value)},[i,l,n,o,a,u,f,c,h,m,p,d,_,g,$,A]}class dh extends we{constructor(e){super(),ye(this,e,mh,hh,$e,{value:0})}}function ph(r){let e,t,n,i;function s(a){r[1](a)}let o={};return r[0].color1!==void 0&&(o.value=r[0].color1),t=new ln({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[2]),{c(){e=ue("Слева"),P(t.$$.fragment)},l(a){e=fe(a,"Слева"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].color1,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function _h(r){let e,t,n,i;function s(a){r[3](a)}let o={};return r[0].color2!==void 0&&(o.value=r[0].color2),t=new ln({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[4]),{c(){e=ue("Справа"),P(t.$$.fragment)},l(a){e=fe(a,"Справа"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].color2,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function gh(r){let e,t,n,i;function s(a){r[5](a)}let o={};return r[0].color3!==void 0&&(o.value=r[0].color3),t=new ln({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[6]),{c(){e=ue("Сверху"),P(t.$$.fragment)},l(a){e=fe(a,"Сверху"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].color3,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function bh(r){let e,t,n,i;function s(a){r[7](a)}let o={};return r[0].color4!==void 0&&(o.value=r[0].color4),t=new ln({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[8]),{c(){e=ue("Снизу"),P(t.$$.fragment)},l(a){e=fe(a,"Снизу"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].color4,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function vh(r){let e,t,n,i,s,o,a,l;return e=new Xe({props:{$$slots:{default:[ph]},$$scope:{ctx:r}}}),n=new Xe({props:{$$slots:{default:[_h]},$$scope:{ctx:r}}}),s=new Xe({props:{$$slots:{default:[gh]},$$scope:{ctx:r}}}),a=new Xe({props:{$$slots:{default:[bh]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),P(s.$$.fragment),o=se(),P(a.$$.fragment)},l(u){B(e.$$.fragment,u),t=oe(u),B(n.$$.fragment,u),i=oe(u),B(s.$$.fragment,u),o=oe(u),B(a.$$.fragment,u)},m(u,f){M(e,u,f),O(u,t,f),M(n,u,f),O(u,i,f),M(s,u,f),O(u,o,f),M(a,u,f),l=!0},p(u,[f]){const c={};f&513&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const h={};f&513&&(h.$$scope={dirty:f,ctx:u}),n.$set(h);const m={};f&513&&(m.$$scope={dirty:f,ctx:u}),s.$set(m);const p={};f&513&&(p.$$scope={dirty:f,ctx:u}),a.$set(p)},i(u){l||(y(e.$$.fragment,u),y(n.$$.fragment,u),y(s.$$.fragment,u),y(a.$$.fragment,u),l=!0)},o(u){k(e.$$.fragment,u),k(n.$$.fragment,u),k(s.$$.fragment,u),k(a.$$.fragment,u),l=!1},d(u){z(e,u),u&&S(t),z(n,u),u&&S(i),z(s,u),u&&S(o),z(a,u)}}}function $h(r,e,t){let{value:n}=e;function i(h){r.$$.not_equal(n.color1,h)&&(n.color1=h,t(0,n))}function s(h){Ae.call(this,r,h)}function o(h){r.$$.not_equal(n.color2,h)&&(n.color2=h,t(0,n))}function a(h){Ae.call(this,r,h)}function l(h){r.$$.not_equal(n.color3,h)&&(n.color3=h,t(0,n))}function u(h){Ae.call(this,r,h)}function f(h){r.$$.not_equal(n.color4,h)&&(n.color4=h,t(0,n))}function c(h){Ae.call(this,r,h)}return r.$$set=h=>{"value"in h&&t(0,n=h.value)},[n,i,s,o,a,l,u,f,c]}class wh extends we{constructor(e){super(),ye(this,e,$h,vh,$e,{value:0})}}function yh(r){let e,t,n,i;return{c(){e=J("textarea"),this.h()},l(s){e=Q(s,"TEXTAREA",{rows:!0,class:!0}),ne(e).forEach(S),this.h()},h(){var s,o;e.value=r[1],x(e,"rows",t=((o=(s=r[1])==null?void 0:s.split(`
`))==null?void 0:o.length)||1),x(e,"class","svelte-1g0ox8l")},m(s,o){O(s,e,o),n||(i=Ie(e,"change",r[2]),n=!0)},p(s,[o]){var a,l;o&2&&(e.value=s[1]),o&2&&t!==(t=((l=(a=s[1])==null?void 0:a.split(`
`))==null?void 0:l.length)||1)&&x(e,"rows",t)},i:je,o:je,d(s){s&&S(e),n=!1,i()}}}function Eh(r,e,t){let{value:n}=e,i="";const s=o=>{try{t(0,n=JSON.parse(o.currentTarget.value))}catch(a){console.warn(a)}};return r.$$set=o=>{"value"in o&&t(0,n=o.value)},r.$$.update=()=>{r.$$.dirty&1&&t(1,i=JSON.stringify(n,void 0,4))},[n,i,s]}class kh extends we{constructor(e){super(),ye(this,e,Eh,yh,$e,{value:0})}}function Ah(r){let e,t,n,i,s,o;return{c(){e=J("main"),t=J("input"),n=se(),i=J("span"),this.h()},l(a){e=Q(a,"MAIN",{class:!0});var l=ne(e);t=Q(l,"INPUT",{type:!0,class:!0}),n=oe(l),i=Q(l,"SPAN",{class:!0}),ne(i).forEach(S),l.forEach(S),this.h()},h(){x(t,"type","checkbox"),x(t,"class","svelte-75vcyd"),x(i,"class","svelte-75vcyd"),x(e,"class","svelte-75vcyd")},m(a,l){O(a,e,l),H(e,t),t.checked=r[0],H(e,n),H(e,i),s||(o=[Ie(t,"change",r[2]),Ie(t,"input",r[3]),Ie(t,"change",r[4])],s=!0)},p(a,[l]){l&1&&(t.checked=a[0])},i:je,o:je,d(a){a&&S(e),s=!1,pt(o)}}}function Sh(r,e,t){let{value:n}=e;const i=yt();function s(){n=this.checked,t(0,n)}const o=l=>i("input",l.currentTarget.checked),a=l=>i("change",l.currentTarget.checked);return r.$$set=l=>{"value"in l&&t(0,n=l.value)},[n,i,s,o,a]}class Th extends we{constructor(e){super(),ye(this,e,Sh,Ah,$e,{value:0})}}function Ki(r){const e=r[0].settings.type;r[19]=e}function Ih(r){let e=r[2][r[20]]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,i){O(n,t,i)},p(n,i){i&1048576&&e!==(e=n[2][n[20]]+"")&&st(t,e)},d(n){n&&S(t)}}}function Yi(r){let e,t;return e=new Xt({props:{$$slots:{default:[Mh]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&2097153&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Ch(r){let e,t,n,i,s;function o(l){r[12](l)}let a={};return r[0].settings!==void 0&&(a.value=r[0].settings),t=new kh({props:a}),_e.push(()=>ge(t,"value",o)),{c(){e=J("div"),P(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ne(e);B(t.$$.fragment,u),u.forEach(S)},m(l,u){O(l,e,u),M(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,be(()=>n=!1)),t.$set(f)},i(l){s||(y(t.$$.fragment,l),l&&Zt(()=>{i||(i=ht(e,mt,{},!0)),i.run(1)}),s=!0)},o(l){k(t.$$.fragment,l),l&&(i||(i=ht(e,mt,{},!1)),i.run(0)),s=!1},d(l){l&&S(e),z(t),l&&i&&i.end()}}}function Rh(r){let e,t,n,i,s;function o(l){r[11](l)}let a={};return r[0].settings!==void 0&&(a.value=r[0].settings),t=new wh({props:a}),_e.push(()=>ge(t,"value",o)),{c(){e=J("div"),P(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ne(e);B(t.$$.fragment,u),u.forEach(S)},m(l,u){O(l,e,u),M(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,be(()=>n=!1)),t.$set(f)},i(l){s||(y(t.$$.fragment,l),l&&Zt(()=>{i||(i=ht(e,mt,{},!0)),i.run(1)}),s=!0)},o(l){k(t.$$.fragment,l),l&&(i||(i=ht(e,mt,{},!1)),i.run(0)),s=!1},d(l){l&&S(e),z(t),l&&i&&i.end()}}}function Fh(r){let e,t,n,i,s;function o(l){r[8](l)}let a={};return r[0].settings!==void 0&&(a.value=r[0].settings),t=new dh({props:a}),_e.push(()=>ge(t,"value",o)),t.$on("change",r[9]),t.$on("addPattern",r[10]),{c(){e=J("div"),P(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ne(e);B(t.$$.fragment,u),u.forEach(S)},m(l,u){O(l,e,u),M(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,be(()=>n=!1)),t.$set(f)},i(l){s||(y(t.$$.fragment,l),l&&Zt(()=>{i||(i=ht(e,mt,{},!0)),i.run(1)}),s=!0)},o(l){k(t.$$.fragment,l),l&&(i||(i=ht(e,mt,{},!1)),i.run(0)),s=!1},d(l){l&&S(e),z(t),l&&i&&i.end()}}}function Nh(r){let e,t,n,i,s;function o(l){r[6](l)}let a={};return r[0].settings!==void 0&&(a.value=r[0].settings),t=new Mc({props:a}),_e.push(()=>ge(t,"value",o)),t.$on("change",r[7]),{c(){e=J("div"),P(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ne(e);B(t.$$.fragment,u),u.forEach(S)},m(l,u){O(l,e,u),M(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,be(()=>n=!1)),t.$set(f)},i(l){s||(y(t.$$.fragment,l),l&&Zt(()=>{i||(i=ht(e,mt,{},!0)),i.run(1)}),s=!0)},o(l){k(t.$$.fragment,l),l&&(i||(i=ht(e,mt,{},!1)),i.run(0)),s=!1},d(l){l&&S(e),z(t),l&&i&&i.end()}}}function Ph(r){let e,t,n;return t=new rt({props:{withRange:!0,min:0,max:100,step:1,value:100-r[0].alpha*100}}),t.$on("change",r[13]),t.$on("input",r[14]),{c(){e=ue("Прозрачность (%) "),P(t.$$.fragment)},l(i){e=fe(i,"Прозрачность (%) "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=100-i[0].alpha*100),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function Bh(r){let e,t,n;return t=new Th({props:{value:r[0].shadow!==void 0}}),t.$on("change",r[15]),t.$on("change",r[16]),{c(){e=ue("Тень "),P(t.$$.fragment)},l(i){e=fe(i,"Тень "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=i[0].shadow!==void 0),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function Ji(r){let e,t,n,i;function s(a){r[17](a)}let o={};return r[0].shadow!==void 0&&(o.value=r[0].shadow),t=new Cc({props:o}),_e.push(()=>ge(t,"value",s)),t.$on("change",r[18]),{c(){e=J("div"),P(t.$$.fragment)},l(a){e=Q(a,"DIV",{});var l=ne(e);B(t.$$.fragment,l),l.forEach(S)},m(a,l){O(a,e,l),M(t,e,null),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].shadow,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t)}}}function Mh(r){Ki(r);let e,t,n,i,s,o,a,l,u,f;const c=[Nh,Fh,Rh,Ch],h=[];function m(d,_){return d[19]==="color"?0:d[19]==="pattern"?1:d[19]==="gradient4"?2:3}e=m(r),t=h[e]=c[e](r),s=new Xe({props:{$$slots:{default:[Ph]},$$scope:{ctx:r}}}),a=new Xe({props:{$$slots:{default:[Bh]},$$scope:{ctx:r}}});let p=r[0].shadow&&Ji(r);return{c(){t.c(),n=se(),i=J("div"),P(s.$$.fragment),o=se(),P(a.$$.fragment),l=se(),p&&p.c()},l(d){t.l(d),n=oe(d),i=Q(d,"DIV",{});var _=ne(i);B(s.$$.fragment,_),o=oe(_),B(a.$$.fragment,_),l=oe(_),p&&p.l(_),_.forEach(S)},m(d,_){h[e].m(d,_),O(d,n,_),O(d,i,_),M(s,i,null),H(i,o),M(a,i,null),H(i,l),p&&p.m(i,null),f=!0},p(d,_){Ki(d);let g=e;e=m(d),e===g?h[e].p(d,_):(Ge(),k(h[g],1,1,()=>{h[g]=null}),He(),t=h[e],t?t.p(d,_):(t=h[e]=c[e](d),t.c()),y(t,1),t.m(n.parentNode,n));const $={};_&2097153&&($.$$scope={dirty:_,ctx:d}),s.$set($);const A={};_&2097153&&(A.$$scope={dirty:_,ctx:d}),a.$set(A),d[0].shadow?p?(p.p(d,_),_&1&&y(p,1)):(p=Ji(d),p.c(),y(p,1),p.m(i,null)):p&&(Ge(),k(p,1,1,()=>{p=null}),He())},i(d){f||(y(t),y(s.$$.fragment,d),y(a.$$.fragment,d),y(p),d&&Zt(()=>{u||(u=ht(i,mt,{},!0)),u.run(1)}),f=!0)},o(d){k(t),k(s.$$.fragment,d),k(a.$$.fragment,d),k(p),d&&(u||(u=ht(i,mt,{},!1)),u.run(0)),f=!1},d(d){h[e].d(d),d&&S(n),d&&S(i),z(s),z(a),p&&p.d(),d&&u&&u.end()}}}function zh(r){let e,t,n,i,s;n=new Pt({props:{value:r[0].settings.type,items:r[3],$$slots:{default:[Ih,({item:a})=>({20:a}),({item:a})=>a?1048576:0]},$$scope:{ctx:r}}}),n.$on("change",r[1]),n.$on("change",r[5]);let o=r[0].settings.type!=="disabled"&&Yi(r);return{c(){e=J("article"),t=J("header"),P(n.$$.fragment),i=se(),o&&o.c(),this.h()},l(a){e=Q(a,"ARTICLE",{class:!0});var l=ne(e);t=Q(l,"HEADER",{});var u=ne(t);B(n.$$.fragment,u),u.forEach(S),i=oe(l),o&&o.l(l),l.forEach(S),this.h()},h(){x(e,"class","svelte-1b7lwvz")},m(a,l){O(a,e,l),H(e,t),M(n,t,null),H(e,i),o&&o.m(e,null),s=!0},p(a,[l]){const u={};l&1&&(u.value=a[0].settings.type),l&3145728&&(u.$$scope={dirty:l,ctx:a}),n.$set(u),a[0].settings.type!=="disabled"?o?(o.p(a,l),l&1&&y(o,1)):(o=Yi(a),o.c(),y(o,1),o.m(e,null)):o&&(Ge(),k(o,1,1,()=>{o=null}),He())},i(a){s||(y(n.$$.fragment,a),y(o),s=!0)},o(a){k(n.$$.fragment,a),k(o),s=!1},d(a){a&&S(e),z(n),o&&o.d()}}}function Uh(r,e,t){let{value:n}=e,{defaults:i}=e;function s(I){const U=i.find(q=>q.type===I.detail.value);if(!U)throw new Error(`Not found default value for type ${I.detail.value}`);t(0,n.settings=structuredClone(U),n)}const o={disabled:"Выключить",color:"Цвет",pattern:"Паттерн",gradient4:"Градиент (крестовой)"},a=Object.keys(o);function l(I){Ae.call(this,r,I)}function u(I){r.$$.not_equal(n.settings,I)&&(n.settings=I,t(0,n))}function f(I){Ae.call(this,r,I)}function c(I){r.$$.not_equal(n.settings,I)&&(n.settings=I,t(0,n))}function h(I){Ae.call(this,r,I)}function m(I){Ae.call(this,r,I)}function p(I){r.$$.not_equal(n.settings,I)&&(n.settings=I,t(0,n))}function d(I){r.$$.not_equal(n.settings,I)&&(n.settings=I,t(0,n))}function _(I){Ae.call(this,r,I)}const g=I=>{t(0,n.alpha=(100-I.detail)/100,n)},$=I=>{t(0,n.shadow=I.detail?{blur:10,color:"#000000",offset:{x:0,y:0}}:void 0,n)};function A(I){Ae.call(this,r,I)}function w(I){r.$$.not_equal(n.shadow,I)&&(n.shadow=I,t(0,n))}function R(I){Ae.call(this,r,I)}return r.$$set=I=>{"value"in I&&t(0,n=I.value),"defaults"in I&&t(4,i=I.defaults)},[n,s,o,a,i,l,u,f,c,h,m,p,d,_,g,$,A,w,R]}class Zs extends we{constructor(e){super(),ye(this,e,Uh,zh,$e,{value:0,defaults:4})}}function an({italic:r,smallCaps:e,bold:t,family:n},i){return`${r?"italic":"normal"} ${e?"small-caps":"normal"} ${t?"bold":"normal"} ${i}px ${n}`}class An{constructor(e){Te(this,"subscribers",new Set);this.value=e}update(e){this.set(e(this.value))}subscribe(e){return e(this.value),this.subscribers.add(e),()=>{this.subscribers.delete(e)}}set(e){this.value=e,this.subscribers.forEach(t=>t(e))}}function rn(r){return JSON.parse(JSON.stringify(r))}const Xs={case:"UPPER",align:"center",baseline:"middle",lineSpacing:-.125,fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!1,family:"Impact",italic:!1,smallCaps:!1},strokeWidth:14,experimental:{}};function Dh(r,e){return e.case=r.case,e.fill=rn(r.fill),e.stroke=rn(r.stroke),e.font=rn(r.font),r.lineSpacing!==void 0&&(e.lineSpacing=r.lineSpacing),r.strokeWidth!==void 0&&(e.strokeWidth=r.strokeWidth),e}const Lh=[{name:"TRUE IMPACT",case:"UPPER",fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!1,family:"Impact",italic:!1,smallCaps:!1}},{name:"post-ironic lobster",case:"lower",fill:{settings:{type:"color",value:"#ffffff"},alpha:1,shadow:{color:"#000000",blur:15,offset:{x:0,y:0}}},stroke:{settings:{type:"disabled"},alpha:1},font:{bold:!1,family:"Lobster",italic:!1,smallCaps:!1}},{name:"Helvetica bold subtitles",case:"As is",fill:{alpha:1,settings:{type:"color",value:"#ffffff"}},stroke:{alpha:1,settings:{type:"color",value:"#000000"}},lineSpacing:-.15,strokeWidth:16.85,font:{bold:!0,family:"Helvetica",italic:!1,smallCaps:!1}},{name:"Arial subtitles",case:"As is",fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!1,family:"Arial",italic:!1,smallCaps:!1}},{name:"Arial bold subtitles",case:"As is",fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!0,family:"Arial",italic:!1,smallCaps:!1}},{name:"Black Arial",case:"As is",fill:{settings:{type:"color",value:"#000000"},alpha:1},stroke:{settings:{type:"disabled"},alpha:1},font:{bold:!1,family:"Arial",italic:!1,smallCaps:!1}},{name:"Black Arial bold",case:"As is",fill:{settings:{type:"color",value:"#000000"},alpha:1},stroke:{settings:{type:"disabled"},alpha:1},font:{bold:!0,family:"Arial",italic:!1,smallCaps:!1}},{name:"Black Helvetica bold",case:"As is",fill:{settings:{type:"color",value:"#000000"},alpha:1},stroke:{settings:{type:"disabled"},alpha:1},lineSpacing:-.15,strokeWidth:16.85,font:{bold:!0,family:"Helvetica",italic:!1,smallCaps:!1}}],xh=Pn(Lh);var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function On(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ks={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,s){function o(u,f){if(!i[u]){if(!n[u]){var c=typeof On=="function"&&On;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var m=i[u]={exports:{}};n[u][0].call(m.exports,function(p){var d=n[u][1][p];return o(d||p)},m,m.exports,t,n,i,s)}return i[u].exports}for(var a=typeof On=="function"&&On,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){var s=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,f,c,h,m,p,d,_=[],g=0,$=l.length,A=$,w=s.getTypeOf(l)!=="string";g<l.length;)A=$-g,c=w?(u=l[g++],f=g<$?l[g++]:0,g<$?l[g++]:0):(u=l.charCodeAt(g++),f=g<$?l.charCodeAt(g++):0,g<$?l.charCodeAt(g++):0),h=u>>2,m=(3&u)<<4|f>>4,p=1<A?(15&f)<<2|c>>6:64,d=2<A?63&c:64,_.push(a.charAt(h)+a.charAt(m)+a.charAt(p)+a.charAt(d));return _.join("")},i.decode=function(l){var u,f,c,h,m,p,d=0,_=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var $,A=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&A--,l.charAt(l.length-2)===a.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=o.uint8array?new Uint8Array(0|A):new Array(0|A);d<l.length;)u=a.indexOf(l.charAt(d++))<<2|(h=a.indexOf(l.charAt(d++)))>>4,f=(15&h)<<4|(m=a.indexOf(l.charAt(d++)))>>2,c=(3&m)<<6|(p=a.indexOf(l.charAt(d++))),$[_++]=u,m!==64&&($[_++]=f),p!==64&&($[_++]=c);return $}},{"./support":30,"./utils":32}],2:[function(t,n,i){var s=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(f,c,h,m,p){this.compressedSize=f,this.uncompressedSize=c,this.crc32=h,this.compression=m,this.compressedContent=p}u.prototype={getContentWorker:function(){var f=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,c,h){return f.pipe(new a).pipe(new l("uncompressedSize")).pipe(c.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var s=t("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,f,c,h){var m=o,p=h+c;u^=-1;for(var d=h;d<p;d++)u=u>>>8^m[255&(u^f[d])];return-1^u}(0|l,a,a.length,0):function(u,f,c,h){var m=o,p=h+c;u^=-1;for(var d=h;d<p;d++)u=u>>>8^m[255&(u^f.charCodeAt(d))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),u=s?"uint8array":"array";function f(c,h){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(f,l),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,c.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(h){c.push({data:h,meta:c.meta})}},i.compressWorker=function(c){return new f("Deflate",c)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function s(m,p){var d,_="";for(d=0;d<p;d++)_+=String.fromCharCode(255&m),m>>>=8;return _}function o(m,p,d,_,g,$){var A,w,R=m.file,I=m.compression,U=$!==u.utf8encode,q=a.transformTo("string",$(R.name)),j=a.transformTo("string",u.utf8encode(R.name)),L=R.comment,V=a.transformTo("string",$(L)),C=a.transformTo("string",u.utf8encode(L)),F=j.length!==R.name.length,b=C.length!==L.length,K="",pe="",W="",he=R.dir,re=R.date,Ee={crc32:0,compressedSize:0,uncompressedSize:0};p&&!d||(Ee.crc32=m.crc32,Ee.compressedSize=m.compressedSize,Ee.uncompressedSize=m.uncompressedSize);var X=0;p&&(X|=8),U||!F&&!b||(X|=2048);var Z=0,ee=0;he&&(Z|=16),g==="UNIX"?(ee=798,Z|=function(me,Le){var Oe=me;return me||(Oe=Le?16893:33204),(65535&Oe)<<16}(R.unixPermissions,he)):(ee=20,Z|=function(me){return 63&(me||0)}(R.dosPermissions)),A=re.getUTCHours(),A<<=6,A|=re.getUTCMinutes(),A<<=5,A|=re.getUTCSeconds()/2,w=re.getUTCFullYear()-1980,w<<=4,w|=re.getUTCMonth()+1,w<<=5,w|=re.getUTCDate(),F&&(pe=s(1,1)+s(f(q),4)+j,K+="up"+s(pe.length,2)+pe),b&&(W=s(1,1)+s(f(V),4)+C,K+="uc"+s(W.length,2)+W);var te="";return te+=`
\0`,te+=s(X,2),te+=I.magic,te+=s(A,2),te+=s(w,2),te+=s(Ee.crc32,4),te+=s(Ee.compressedSize,4),te+=s(Ee.uncompressedSize,4),te+=s(q.length,2),te+=s(K.length,2),{fileRecord:c.LOCAL_FILE_HEADER+te+q+K,dirRecord:c.CENTRAL_FILE_HEADER+s(ee,2)+te+s(V.length,2)+"\0\0\0\0"+s(Z,4)+s(_,4)+q+K+V}}var a=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),f=t("../crc32"),c=t("../signature");function h(m,p,d,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=d,this.encodeFileName=_,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(m){var p=m.meta.percent||0,d=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:d?(p+100*(d-_-1))/d:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var p=this.streamFiles&&!m.file.dir;if(p){var d=o(m,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var p=this.streamFiles&&!m.file.dir,d=o(m,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),p)this.push({data:function(_){return c.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var d=this.bytesWritten-m,_=function(g,$,A,w,R){var I=a.transformTo("string",R(w));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(g,2)+s(g,2)+s($,4)+s(A,4)+s(I.length,2)+I}(this.dirRecords.length,d,m,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var p=this;return m.on("data",function(d){p.processChunk(d)}),m.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),m.on("error",function(d){p.error(d)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var p=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var d=0;d<p.length;d++)try{p[d].error(m)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,p=0;p<m.length;p++)m[p].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var s=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(a,l,u){var f=new o(l.streamFiles,u,l.platform,l.encodeFileName),c=0;try{a.forEach(function(h,m){c++;var p=function($,A){var w=$||A,R=s[w];if(!R)throw new Error(w+" is not a valid compression method !");return R}(m.options.compression,l.compression),d=m.options.compressionOptions||l.compressionOptions||{},_=m.dir,g=m.date;m._compressWorker(p,d).withStreamInfo("file",{name:h,dir:_,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=c}catch(h){f.error(h)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var s=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),f=t("./nodejsUtils");function c(h){return new o.Promise(function(m,p){var d=h.decompressed.getContentWorker().pipe(new u);d.on("error",function(_){p(_)}).on("end",function(){d.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(h,m){var p=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),f.isNode&&f.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(d){var _=new l(m);return _.load(d),_}).then(function(d){var _=[o.Promise.resolve(d)],g=d.files;if(m.checkCRC32)for(var $=0;$<g.length;$++)_.push(c(g[$]));return o.Promise.all(_)}).then(function(d){for(var _=d.shift(),g=_.files,$=0;$<g.length;$++){var A=g[$],w=A.fileNameStr,R=s.resolve(A.fileNameStr);p.file(R,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:m.createFolders}),A.dir||(p.file(R).unsafeOriginalName=w)}return _.zipComment.length&&(p.comment=_.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var s=t("../utils"),o=t("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var s=t("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var f=this;a.on("data",function(c,h){f.push(c)||f._helper.pause(),u&&u(h)}).on("error",function(c){f.emit("error",c)}).on("end",function(){f.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,i){function s(R,I,U){var q,j=a.getTypeOf(I),L=a.extend(U||{},f);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(R=g(R)),L.createFolders&&(q=_(R))&&$.call(this,q,!0);var V=j==="string"&&L.binary===!1&&L.base64===!1;U&&U.binary!==void 0||(L.binary=!V),(I instanceof c&&I.uncompressedSize===0||L.dir||!I||I.length===0)&&(L.base64=!1,L.binary=!0,I="",L.compression="STORE",j="string");var C=null;C=I instanceof c||I instanceof l?I:p.isNode&&p.isStream(I)?new d(R,I):a.prepareContent(R,I,L.binary,L.optimizedBinaryString,L.base64);var F=new h(R,C,L);this.files[R]=F}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),f=t("./defaults"),c=t("./compressedObject"),h=t("./zipObject"),m=t("./generate"),p=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),_=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var I=R.lastIndexOf("/");return 0<I?R.substring(0,I):""},g=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},$=function(R,I){return I=I!==void 0?I:f.createFolders,R=g(R),this.files[R]||s.call(this,R,null,{dir:!0,createFolders:I}),this.files[R]};function A(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var I,U,q;for(I in this.files)q=this.files[I],(U=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&R(U,q)},filter:function(R){var I=[];return this.forEach(function(U,q){R(U,q)&&I.push(q)}),I},file:function(R,I,U){if(arguments.length!==1)return R=this.root+R,s.call(this,R,I,U),this;if(A(R)){var q=R;return this.filter(function(L,V){return!V.dir&&q.test(L)})}var j=this.files[this.root+R];return j&&!j.dir?j:null},folder:function(R){if(!R)return this;if(A(R))return this.filter(function(j,L){return L.dir&&R.test(j)});var I=this.root+R,U=$.call(this,I),q=this.clone();return q.root=U.name,q},remove:function(R){R=this.root+R;var I=this.files[R];if(I||(R.slice(-1)!=="/"&&(R+="/"),I=this.files[R]),I&&!I.dir)delete this.files[R];else for(var U=this.filter(function(j,L){return L.name.slice(0,R.length)===R}),q=0;q<U.length;q++)delete this.files[U[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var I,U={};try{if((U=a.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");a.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var q=U.comment||this.comment||"";I=m.generateWorker(this,U,q)}catch(j){(I=new l("error")).error(j)}return new u(I,U.type||"string",U.mimeType)},generateAsync:function(R,I){return this.generateInternalStream(R).accumulate(I)},generateNodeStream:function(R,I){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(I)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var s=t("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),f=a.charCodeAt(2),c=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===u&&this.data[h+2]===f&&this.data[h+3]===c)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),f=a.charCodeAt(2),c=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&u===h[1]&&f===h[2]&&c===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var s=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,i){var s=t("./Uint8ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var s=t("./DataReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var s=t("./ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var s=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),f=t("./Uint8ArrayReader");n.exports=function(c){var h=s.getTypeOf(c);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new u(c):o.uint8array?new f(s.transformTo("uint8array",c)):new a(s.transformTo("array",c)):new l(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var s=t("./GenericWorker"),o=t("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var s=t("./GenericWorker"),o=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=s.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(t,n,i){var s=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),u=t("../support"),f=t("../external"),c=null;if(u.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,d){return new f.Promise(function(_,g){var $=[],A=p._internalType,w=p._outputType,R=p._mimeType;p.on("data",function(I,U){$.push(I),d&&d(U)}).on("error",function(I){$=[],g(I)}).on("end",function(){try{var I=function(U,q,j){switch(U){case"blob":return s.newBlob(s.transformTo("arraybuffer",q),j);case"base64":return l.encode(q);default:return s.transformTo(U,q)}}(w,function(U,q){var j,L=0,V=null,C=0;for(j=0;j<q.length;j++)C+=q[j].length;switch(U){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(V=new Uint8Array(C),j=0;j<q.length;j++)V.set(q[j],L),L+=q[j].length;return V;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+U+"'")}}(A,$),R);_(I)}catch(U){g(U)}$=[]}).resume()})}function m(p,d,_){var g=d;switch(d){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=_,s.checkSupport(g),this._worker=p.pipe(new o(g)),p.lock()}catch($){this._worker=new a("error"),this._worker.error($)}}m.prototype={accumulate:function(p){return h(this,p)},on:function(p,d){var _=this;return p==="data"?this._worker.on(p,function(g){d.call(_,g.data,g.meta)}):this._worker.on(p,function(){s.delay(d,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var s=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function c(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(p){var d,_,g,$,A,w=p.length,R=0;for($=0;$<w;$++)(64512&(_=p.charCodeAt($)))==55296&&$+1<w&&(64512&(g=p.charCodeAt($+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),$++),R+=_<128?1:_<2048?2:_<65536?3:4;for(d=o.uint8array?new Uint8Array(R):new Array(R),$=A=0;A<R;$++)(64512&(_=p.charCodeAt($)))==55296&&$+1<w&&(64512&(g=p.charCodeAt($+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),$++),_<128?d[A++]=_:(_<2048?d[A++]=192|_>>>6:(_<65536?d[A++]=224|_>>>12:(d[A++]=240|_>>>18,d[A++]=128|_>>>12&63),d[A++]=128|_>>>6&63),d[A++]=128|63&_);return d}(m)},i.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(p){var d,_,g,$,A=p.length,w=new Array(2*A);for(d=_=0;d<A;)if((g=p[d++])<128)w[_++]=g;else if(4<($=u[g]))w[_++]=65533,d+=$-1;else{for(g&=$===2?31:$===3?15:7;1<$&&d<A;)g=g<<6|63&p[d++],$--;1<$?w[_++]=65533:g<65536?w[_++]=g:(g-=65536,w[_++]=55296|g>>10&1023,w[_++]=56320|1023&g)}return w.length!==_&&(w.subarray?w=w.subarray(0,_):w.length=_),s.applyFromCharCode(w)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(c,l),c.prototype.processChunk=function(m){var p=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var d=p;(p=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),p.set(d,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var _=function($,A){var w;for((A=A||$.length)>$.length&&(A=$.length),w=A-1;0<=w&&(192&$[w])==128;)w--;return w<0||w===0?A:w+u[$[w]]>A?w:A}(p),g=p;_!==p.length&&(o.uint8array?(g=p.subarray(0,_),this.leftOver=p.subarray(_,p.length)):(g=p.slice(0,_),this.leftOver=p.slice(_,p.length))),this.push({data:i.utf8decode(g),meta:m.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,s.inherits(h,l),h.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var s=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function u(d){return d}function f(d,_){for(var g=0;g<d.length;++g)_[g]=255&d.charCodeAt(g);return _}t("setimmediate"),i.newBlob=function(d,_){i.checkSupport("blob");try{return new Blob([d],{type:_})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(d),g.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(d,_,g){var $=[],A=0,w=d.length;if(w<=g)return String.fromCharCode.apply(null,d);for(;A<w;)_==="array"||_==="nodebuffer"?$.push(String.fromCharCode.apply(null,d.slice(A,Math.min(A+g,w)))):$.push(String.fromCharCode.apply(null,d.subarray(A,Math.min(A+g,w)))),A+=g;return $.join("")},stringifyByChar:function(d){for(var _="",g=0;g<d.length;g++)_+=String.fromCharCode(d[g]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(d){var _=65536,g=i.getTypeOf(d),$=!0;if(g==="uint8array"?$=c.applyCanBeUsed.uint8array:g==="nodebuffer"&&($=c.applyCanBeUsed.nodebuffer),$)for(;1<_;)try{return c.stringifyByChunk(d,g,_)}catch{_=Math.floor(_/2)}return c.stringifyByChar(d)}function m(d,_){for(var g=0;g<d.length;g++)_[g]=d[g];return _}i.applyFromCharCode=h;var p={};p.string={string:u,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return p.string.uint8array(d).buffer},uint8array:function(d){return f(d,new Uint8Array(d.length))},nodebuffer:function(d){return f(d,a.allocBuffer(d.length))}},p.array={string:h,array:u,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return a.newBufferFrom(d)}},p.arraybuffer={string:function(d){return h(new Uint8Array(d))},array:function(d){return m(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:u,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return a.newBufferFrom(new Uint8Array(d))}},p.uint8array={string:h,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:u,nodebuffer:function(d){return a.newBufferFrom(d)}},p.nodebuffer={string:h,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return p.nodebuffer.uint8array(d).buffer},uint8array:function(d){return m(d,new Uint8Array(d.length))},nodebuffer:u},i.transformTo=function(d,_){if(_=_||"",!d)return _;i.checkSupport(d);var g=i.getTypeOf(_);return p[g][d](_)},i.resolve=function(d){for(var _=d.split("/"),g=[],$=0;$<_.length;$++){var A=_[$];A==="."||A===""&&$!==0&&$!==_.length-1||(A===".."?g.pop():g.push(A))}return g.join("/")},i.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(d)?"nodebuffer":s.uint8array&&d instanceof Uint8Array?"uint8array":s.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(d){if(!s[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(d){var _,g,$="";for(g=0;g<(d||"").length;g++)$+="\\x"+((_=d.charCodeAt(g))<16?"0":"")+_.toString(16).toUpperCase();return $},i.delay=function(d,_,g){setImmediate(function(){d.apply(g||null,_||[])})},i.inherits=function(d,_){function g(){}g.prototype=_.prototype,d.prototype=new g},i.extend=function(){var d,_,g={};for(d=0;d<arguments.length;d++)for(_ in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],_)&&g[_]===void 0&&(g[_]=arguments[d][_]);return g},i.prepareContent=function(d,_,g,$,A){return l.Promise.resolve(_).then(function(w){return s.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new l.Promise(function(R,I){var U=new FileReader;U.onload=function(q){R(q.target.result)},U.onerror=function(q){I(q.target.error)},U.readAsArrayBuffer(w)}):w}).then(function(w){var R=i.getTypeOf(w);return R?(R==="arraybuffer"?w=i.transformTo("uint8array",w):R==="string"&&(A?w=o.decode(w):g&&$!==!0&&(w=function(I){return f(I,s.uint8array?new Uint8Array(I.length):new Array(I.length))}(w))),w):l.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),u=t("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(c)+")")}},isSignature:function(c,h){var m=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===h;return this.reader.setIndex(m),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",m=o.transformTo(h,c);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,h,m,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[c]={id:c,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,h;for(c=0;c<this.files.length;c++)h=this.files[c],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(c=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var h=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var p=h-m;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=s(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),f=t("./compressions"),c=t("./support");function h(m,p){this.options=m,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var p,d;if(m.skip(22),this.fileNameLength=m.readInt(2),d=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(_){for(var g in f)if(Object.prototype.hasOwnProperty.call(f,g)&&f[g].magic===_)return f[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var p=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(p),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var p,d,_,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)p=m.readInt(2),d=m.readInt(2),_=m.readData(d),this.extraFields[p]={id:p,length:d,value:_};m.setIndex(g)},handleUTF8:function(){var m=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var d=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var p=s(m.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:u.utf8decode(p.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var p=s(m.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:u.utf8decode(p.readData(m.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function s(p,d,_){this.name=p,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=d,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),f=t("./stream/GenericWorker");s.prototype={internalStream:function(p){var d=null,_="string";try{if(!p)throw new Error("No output type specified.");var g=(_=p.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),d=this._decompressWorker();var $=!this._dataBinary;$&&!g&&(d=d.pipe(new l.Utf8EncodeWorker)),!$&&g&&(d=d.pipe(new l.Utf8DecodeWorker))}catch(A){(d=new f("error")).error(A)}return new o(d,_,"")},async:function(p,d){return this.internalStream(p).accumulate(d)},nodeStream:function(p,d){return this.internalStream(p||"nodebuffer").toNodejsStream(d)},_compressWorker:function(p,d){if(this._data instanceof u&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(_,p,d)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<c.length;m++)s.prototype[c[m]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,f=new l(p),c=s.document.createTextNode("");f.observe(c,{characterData:!0}),o=function(){c.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var d=s.document.createElement("script");d.onreadystatechange=function(){p(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},s.document.documentElement.appendChild(d)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var m=[];function p(){var d,_;a=!0;for(var g=m.length;g;){for(_=m,m=[],d=-1;++d<g;)_[d]();g=m.length}a=!1}n.exports=function(d){m.push(d)!==1||a||o()}}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var s=t("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function c(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,g!==o&&d(this,g)}function h(g,$,A){this.promise=g,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function m(g,$,A){s(function(){var w;try{w=$(A)}catch(R){return a.reject(g,R)}w===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,w)})}function p(g){var $=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof $=="function")return function(){$.apply(g,arguments)}}function d(g,$){var A=!1;function w(U){A||(A=!0,a.reject(g,U))}function R(U){A||(A=!0,a.resolve(g,U))}var I=_(function(){$(R,w)});I.status==="error"&&w(I.value)}function _(g,$){var A={};try{A.value=g($),A.status="success"}catch(w){A.status="error",A.value=w}return A}(n.exports=c).prototype.finally=function(g){if(typeof g!="function")return this;var $=this.constructor;return this.then(function(A){return $.resolve(g()).then(function(){return A})},function(A){return $.resolve(g()).then(function(){throw A})})},c.prototype.catch=function(g){return this.then(null,g)},c.prototype.then=function(g,$){if(typeof g!="function"&&this.state===u||typeof $!="function"&&this.state===l)return this;var A=new this.constructor(o);return this.state!==f?m(A,this.state===u?g:$,this.outcome):this.queue.push(new h(A,g,$)),A},h.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){a.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,$){var A=_(p,$);if(A.status==="error")return a.reject(g,A.value);var w=A.value;if(w)d(g,w);else{g.state=u,g.outcome=$;for(var R=-1,I=g.queue.length;++R<I;)g.queue[R].callFulfilled($)}return g},a.reject=function(g,$){g.state=l,g.outcome=$;for(var A=-1,w=g.queue.length;++A<w;)g.queue[A].callRejected($);return g},c.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},c.reject=function(g){var $=new this(o);return a.reject($,g)},c.all=function(g){var $=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=g.length,w=!1;if(!A)return this.resolve([]);for(var R=new Array(A),I=0,U=-1,q=new this(o);++U<A;)j(g[U],U);return q;function j(L,V){$.resolve(L).then(function(C){R[V]=C,++I!==A||w||(w=!0,a.resolve(q,R))},function(C){w||(w=!0,a.reject(q,C))})}},c.race=function(g){var $=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=g.length,w=!1;if(!A)return this.resolve([]);for(var R=-1,I=new this(o);++R<A;)U=g[R],$.resolve(U).then(function(q){w||(w=!0,a.resolve(I,q))},function(q){w||(w=!0,a.reject(I,q))});var U;return I}},{immediate:36}],38:[function(t,n,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var s=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),f=Object.prototype.toString,c=0,h=-1,m=0,p=8;function d(g){if(!(this instanceof d))return new d(g);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var A=s.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(A!==c)throw new Error(l[A]);if($.header&&s.deflateSetHeader(this.strm,$.header),$.dictionary){var w;if(w=typeof $.dictionary=="string"?a.string2buf($.dictionary):f.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(A=s.deflateSetDictionary(this.strm,w))!==c)throw new Error(l[A]);this._dict_set=!0}}function _(g,$){var A=new d($);if(A.push(g,!0),A.err)throw A.msg||l[A.err];return A.result}d.prototype.push=function(g,$){var A,w,R=this.strm,I=this.options.chunkSize;if(this.ended)return!1;w=$===~~$?$:$===!0?4:0,typeof g=="string"?R.input=a.string2buf(g):f.call(g)==="[object ArrayBuffer]"?R.input=new Uint8Array(g):R.input=g,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(I),R.next_out=0,R.avail_out=I),(A=s.deflate(R,w))!==1&&A!==c)return this.onEnd(A),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(R.output,R.next_out))):this.onData(o.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&A!==1);return w===4?(A=s.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===c):w!==2||(this.onEnd(c),!(R.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Deflate=d,i.deflate=_,i.deflateRaw=function(g,$){return($=$||{}).raw=!0,_(g,$)},i.gzip=function(g,$){return($=$||{}).gzip=!0,_(g,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),f=t("./zlib/zstream"),c=t("./zlib/gzheader"),h=Object.prototype.toString;function m(d){if(!(this instanceof m))return new m(d);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},d||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||d&&d.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var g=s.inflateInit2(this.strm,_.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}function p(d,_){var g=new m(_);if(g.push(d,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(d,_){var g,$,A,w,R,I,U=this.strm,q=this.options.chunkSize,j=this.options.dictionary,L=!1;if(this.ended)return!1;$=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof d=="string"?U.input=a.binstring2buf(d):h.call(d)==="[object ArrayBuffer]"?U.input=new Uint8Array(d):U.input=d,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new o.Buf8(q),U.next_out=0,U.avail_out=q),(g=s.inflate(U,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&j&&(I=typeof j=="string"?a.string2buf(j):h.call(j)==="[object ArrayBuffer]"?new Uint8Array(j):j,g=s.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&L===!0&&(g=l.Z_OK,L=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&g!==l.Z_STREAM_END&&(U.avail_in!==0||$!==l.Z_FINISH&&$!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=a.utf8border(U.output,U.next_out),w=U.next_out-A,R=a.buf2string(U.output,A),U.next_out=w,U.avail_out=q-w,w&&o.arraySet(U.output,U.output,A,w,0),this.onData(R)):this.onData(o.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(L=!0)}while((0<U.avail_in||U.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&($=l.Z_FINISH),$===l.Z_FINISH?(g=s.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):$!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(U.avail_out=0))},m.prototype.onData=function(d){this.chunks.push(d)},m.prototype.onEnd=function(d){d===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},i.Inflate=m,i.inflate=p,i.inflateRaw=function(d,_){return(_=_||{}).raw=!0,p(d,_)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(l[c]=f[c])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,f,c,h){if(u.subarray&&l.subarray)l.set(u.subarray(f,f+c),h);else for(var m=0;m<c;m++)l[h+m]=u[f+m]},flattenChunks:function(l){var u,f,c,h,m,p;for(u=c=0,f=l.length;u<f;u++)c+=l[u].length;for(p=new Uint8Array(c),u=h=0,f=l.length;u<f;u++)m=l[u],p.set(m,h),h+=m.length;return p}},a={arraySet:function(l,u,f,c,h){for(var m=0;m<c;m++)l[h+m]=u[f+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(t,n,i){var s=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(c,h){if(h<65537&&(c.subarray&&a||!c.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(c,h));for(var m="",p=0;p<h;p++)m+=String.fromCharCode(c[p]);return m}l[254]=l[254]=1,i.string2buf=function(c){var h,m,p,d,_,g=c.length,$=0;for(d=0;d<g;d++)(64512&(m=c.charCodeAt(d)))==55296&&d+1<g&&(64512&(p=c.charCodeAt(d+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),d++),$+=m<128?1:m<2048?2:m<65536?3:4;for(h=new s.Buf8($),d=_=0;_<$;d++)(64512&(m=c.charCodeAt(d)))==55296&&d+1<g&&(64512&(p=c.charCodeAt(d+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),d++),m<128?h[_++]=m:(m<2048?h[_++]=192|m>>>6:(m<65536?h[_++]=224|m>>>12:(h[_++]=240|m>>>18,h[_++]=128|m>>>12&63),h[_++]=128|m>>>6&63),h[_++]=128|63&m);return h},i.buf2binstring=function(c){return f(c,c.length)},i.binstring2buf=function(c){for(var h=new s.Buf8(c.length),m=0,p=h.length;m<p;m++)h[m]=c.charCodeAt(m);return h},i.buf2string=function(c,h){var m,p,d,_,g=h||c.length,$=new Array(2*g);for(m=p=0;m<g;)if((d=c[m++])<128)$[p++]=d;else if(4<(_=l[d]))$[p++]=65533,m+=_-1;else{for(d&=_===2?31:_===3?15:7;1<_&&m<g;)d=d<<6|63&c[m++],_--;1<_?$[p++]=65533:d<65536?$[p++]=d:(d-=65536,$[p++]=55296|d>>10&1023,$[p++]=56320|1023&d)}return f($,p)},i.utf8border=function(c,h){var m;for((h=h||c.length)>c.length&&(h=c.length),m=h-1;0<=m&&(192&c[m])==128;)m--;return m<0||m===0?h:m+l[c[m]]>h?m:h}},{"./common":41}],43:[function(t,n,i){n.exports=function(s,o,a,l){for(var u=65535&s|0,f=s>>>16&65535|0,c=0;a!==0;){for(a-=c=2e3<a?2e3:a;f=f+(u=u+o[l++]|0)|0,--c;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();n.exports=function(o,a,l,u){var f=s,c=u+l;o^=-1;for(var h=u;h<c;h++)o=o>>>8^f[255&(o^a[h])];return-1^o}},{}],46:[function(t,n,i){var s,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),u=t("./crc32"),f=t("./messages"),c=0,h=4,m=0,p=-2,d=-1,_=4,g=2,$=8,A=9,w=286,R=30,I=19,U=2*w+1,q=15,j=3,L=258,V=L+j+1,C=42,F=113,b=1,K=2,pe=3,W=4;function he(v,ie){return v.msg=f[ie],ie}function re(v){return(v<<1)-(4<v?9:0)}function Ee(v){for(var ie=v.length;0<=--ie;)v[ie]=0}function X(v){var ie=v.state,Y=ie.pending;Y>v.avail_out&&(Y=v.avail_out),Y!==0&&(o.arraySet(v.output,ie.pending_buf,ie.pending_out,Y,v.next_out),v.next_out+=Y,ie.pending_out+=Y,v.total_out+=Y,v.avail_out-=Y,ie.pending-=Y,ie.pending===0&&(ie.pending_out=0))}function Z(v,ie){a._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,ie),v.block_start=v.strstart,X(v.strm)}function ee(v,ie){v.pending_buf[v.pending++]=ie}function te(v,ie){v.pending_buf[v.pending++]=ie>>>8&255,v.pending_buf[v.pending++]=255&ie}function me(v,ie){var Y,N,E=v.max_chain_length,G=v.strstart,ae=v.prev_length,T=v.nice_match,D=v.strstart>v.w_size-V?v.strstart-(v.w_size-V):0,le=v.window,ve=v.w_mask,de=v.prev,Se=v.strstart+L,xe=le[G+ae-1],Me=le[G+ae];v.prev_length>=v.good_match&&(E>>=2),T>v.lookahead&&(T=v.lookahead);do if(le[(Y=ie)+ae]===Me&&le[Y+ae-1]===xe&&le[Y]===le[G]&&le[++Y]===le[G+1]){G+=2,Y++;do;while(le[++G]===le[++Y]&&le[++G]===le[++Y]&&le[++G]===le[++Y]&&le[++G]===le[++Y]&&le[++G]===le[++Y]&&le[++G]===le[++Y]&&le[++G]===le[++Y]&&le[++G]===le[++Y]&&G<Se);if(N=L-(Se-G),G=Se-L,ae<N){if(v.match_start=ie,T<=(ae=N))break;xe=le[G+ae-1],Me=le[G+ae]}}while((ie=de[ie&ve])>D&&--E!=0);return ae<=v.lookahead?ae:v.lookahead}function Le(v){var ie,Y,N,E,G,ae,T,D,le,ve,de=v.w_size;do{if(E=v.window_size-v.lookahead-v.strstart,v.strstart>=de+(de-V)){for(o.arraySet(v.window,v.window,de,de,0),v.match_start-=de,v.strstart-=de,v.block_start-=de,ie=Y=v.hash_size;N=v.head[--ie],v.head[ie]=de<=N?N-de:0,--Y;);for(ie=Y=de;N=v.prev[--ie],v.prev[ie]=de<=N?N-de:0,--Y;);E+=de}if(v.strm.avail_in===0)break;if(ae=v.strm,T=v.window,D=v.strstart+v.lookahead,le=E,ve=void 0,ve=ae.avail_in,le<ve&&(ve=le),Y=ve===0?0:(ae.avail_in-=ve,o.arraySet(T,ae.input,ae.next_in,ve,D),ae.state.wrap===1?ae.adler=l(ae.adler,T,ve,D):ae.state.wrap===2&&(ae.adler=u(ae.adler,T,ve,D)),ae.next_in+=ve,ae.total_in+=ve,ve),v.lookahead+=Y,v.lookahead+v.insert>=j)for(G=v.strstart-v.insert,v.ins_h=v.window[G],v.ins_h=(v.ins_h<<v.hash_shift^v.window[G+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[G+j-1])&v.hash_mask,v.prev[G&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=G,G++,v.insert--,!(v.lookahead+v.insert<j)););}while(v.lookahead<V&&v.strm.avail_in!==0)}function Oe(v,ie){for(var Y,N;;){if(v.lookahead<V){if(Le(v),v.lookahead<V&&ie===c)return b;if(v.lookahead===0)break}if(Y=0,v.lookahead>=j&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+j-1])&v.hash_mask,Y=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),Y!==0&&v.strstart-Y<=v.w_size-V&&(v.match_length=me(v,Y)),v.match_length>=j)if(N=a._tr_tally(v,v.strstart-v.match_start,v.match_length-j),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=j){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+j-1])&v.hash_mask,Y=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else N=a._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(N&&(Z(v,!1),v.strm.avail_out===0))return b}return v.insert=v.strstart<j-1?v.strstart:j-1,ie===h?(Z(v,!0),v.strm.avail_out===0?pe:W):v.last_lit&&(Z(v,!1),v.strm.avail_out===0)?b:K}function Pe(v,ie){for(var Y,N,E;;){if(v.lookahead<V){if(Le(v),v.lookahead<V&&ie===c)return b;if(v.lookahead===0)break}if(Y=0,v.lookahead>=j&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+j-1])&v.hash_mask,Y=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=j-1,Y!==0&&v.prev_length<v.max_lazy_match&&v.strstart-Y<=v.w_size-V&&(v.match_length=me(v,Y),v.match_length<=5&&(v.strategy===1||v.match_length===j&&4096<v.strstart-v.match_start)&&(v.match_length=j-1)),v.prev_length>=j&&v.match_length<=v.prev_length){for(E=v.strstart+v.lookahead-j,N=a._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-j),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=E&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+j-1])&v.hash_mask,Y=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=j-1,v.strstart++,N&&(Z(v,!1),v.strm.avail_out===0))return b}else if(v.match_available){if((N=a._tr_tally(v,0,v.window[v.strstart-1]))&&Z(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return b}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(N=a._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<j-1?v.strstart:j-1,ie===h?(Z(v,!0),v.strm.avail_out===0?pe:W):v.last_lit&&(Z(v,!1),v.strm.avail_out===0)?b:K}function ze(v,ie,Y,N,E){this.good_length=v,this.max_lazy=ie,this.nice_length=Y,this.max_chain=N,this.func=E}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*U),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),Ee(this.dyn_ltree),Ee(this.dyn_dtree),Ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(q+1),this.heap=new o.Buf16(2*w+1),Ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),Ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(v){var ie;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=g,(ie=v.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?C:F,v.adler=ie.wrap===2?0:1,ie.last_flush=c,a._tr_init(ie),m):he(v,p)}function it(v){var ie=Ve(v);return ie===m&&function(Y){Y.window_size=2*Y.w_size,Ee(Y.head),Y.max_lazy_match=s[Y.level].max_lazy,Y.good_match=s[Y.level].good_length,Y.nice_match=s[Y.level].nice_length,Y.max_chain_length=s[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=j-1,Y.match_available=0,Y.ins_h=0}(v.state),ie}function at(v,ie,Y,N,E,G){if(!v)return p;var ae=1;if(ie===d&&(ie=6),N<0?(ae=0,N=-N):15<N&&(ae=2,N-=16),E<1||A<E||Y!==$||N<8||15<N||ie<0||9<ie||G<0||_<G)return he(v,p);N===8&&(N=9);var T=new Be;return(v.state=T).strm=v,T.wrap=ae,T.gzhead=null,T.w_bits=N,T.w_size=1<<T.w_bits,T.w_mask=T.w_size-1,T.hash_bits=E+7,T.hash_size=1<<T.hash_bits,T.hash_mask=T.hash_size-1,T.hash_shift=~~((T.hash_bits+j-1)/j),T.window=new o.Buf8(2*T.w_size),T.head=new o.Buf16(T.hash_size),T.prev=new o.Buf16(T.w_size),T.lit_bufsize=1<<E+6,T.pending_buf_size=4*T.lit_bufsize,T.pending_buf=new o.Buf8(T.pending_buf_size),T.d_buf=1*T.lit_bufsize,T.l_buf=3*T.lit_bufsize,T.level=ie,T.strategy=G,T.method=Y,it(v)}s=[new ze(0,0,0,0,function(v,ie){var Y=65535;for(Y>v.pending_buf_size-5&&(Y=v.pending_buf_size-5);;){if(v.lookahead<=1){if(Le(v),v.lookahead===0&&ie===c)return b;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var N=v.block_start+Y;if((v.strstart===0||v.strstart>=N)&&(v.lookahead=v.strstart-N,v.strstart=N,Z(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-V&&(Z(v,!1),v.strm.avail_out===0))return b}return v.insert=0,ie===h?(Z(v,!0),v.strm.avail_out===0?pe:W):(v.strstart>v.block_start&&(Z(v,!1),v.strm.avail_out),b)}),new ze(4,4,8,4,Oe),new ze(4,5,16,8,Oe),new ze(4,6,32,32,Oe),new ze(4,4,16,16,Pe),new ze(8,16,32,32,Pe),new ze(8,16,128,128,Pe),new ze(8,32,128,256,Pe),new ze(32,128,258,1024,Pe),new ze(32,258,258,4096,Pe)],i.deflateInit=function(v,ie){return at(v,ie,$,15,8,0)},i.deflateInit2=at,i.deflateReset=it,i.deflateResetKeep=Ve,i.deflateSetHeader=function(v,ie){return v&&v.state?v.state.wrap!==2?p:(v.state.gzhead=ie,m):p},i.deflate=function(v,ie){var Y,N,E,G;if(!v||!v.state||5<ie||ie<0)return v?he(v,p):p;if(N=v.state,!v.output||!v.input&&v.avail_in!==0||N.status===666&&ie!==h)return he(v,v.avail_out===0?-5:p);if(N.strm=v,Y=N.last_flush,N.last_flush=ie,N.status===C)if(N.wrap===2)v.adler=0,ee(N,31),ee(N,139),ee(N,8),N.gzhead?(ee(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),ee(N,255&N.gzhead.time),ee(N,N.gzhead.time>>8&255),ee(N,N.gzhead.time>>16&255),ee(N,N.gzhead.time>>24&255),ee(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),ee(N,255&N.gzhead.os),N.gzhead.extra&&N.gzhead.extra.length&&(ee(N,255&N.gzhead.extra.length),ee(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(v.adler=u(v.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=69):(ee(N,0),ee(N,0),ee(N,0),ee(N,0),ee(N,0),ee(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),ee(N,3),N.status=F);else{var ae=$+(N.w_bits-8<<4)<<8;ae|=(2<=N.strategy||N.level<2?0:N.level<6?1:N.level===6?2:3)<<6,N.strstart!==0&&(ae|=32),ae+=31-ae%31,N.status=F,te(N,ae),N.strstart!==0&&(te(N,v.adler>>>16),te(N,65535&v.adler)),v.adler=1}if(N.status===69)if(N.gzhead.extra){for(E=N.pending;N.gzindex<(65535&N.gzhead.extra.length)&&(N.pending!==N.pending_buf_size||(N.gzhead.hcrc&&N.pending>E&&(v.adler=u(v.adler,N.pending_buf,N.pending-E,E)),X(v),E=N.pending,N.pending!==N.pending_buf_size));)ee(N,255&N.gzhead.extra[N.gzindex]),N.gzindex++;N.gzhead.hcrc&&N.pending>E&&(v.adler=u(v.adler,N.pending_buf,N.pending-E,E)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=73)}else N.status=73;if(N.status===73)if(N.gzhead.name){E=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>E&&(v.adler=u(v.adler,N.pending_buf,N.pending-E,E)),X(v),E=N.pending,N.pending===N.pending_buf_size)){G=1;break}G=N.gzindex<N.gzhead.name.length?255&N.gzhead.name.charCodeAt(N.gzindex++):0,ee(N,G)}while(G!==0);N.gzhead.hcrc&&N.pending>E&&(v.adler=u(v.adler,N.pending_buf,N.pending-E,E)),G===0&&(N.gzindex=0,N.status=91)}else N.status=91;if(N.status===91)if(N.gzhead.comment){E=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>E&&(v.adler=u(v.adler,N.pending_buf,N.pending-E,E)),X(v),E=N.pending,N.pending===N.pending_buf_size)){G=1;break}G=N.gzindex<N.gzhead.comment.length?255&N.gzhead.comment.charCodeAt(N.gzindex++):0,ee(N,G)}while(G!==0);N.gzhead.hcrc&&N.pending>E&&(v.adler=u(v.adler,N.pending_buf,N.pending-E,E)),G===0&&(N.status=103)}else N.status=103;if(N.status===103&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&X(v),N.pending+2<=N.pending_buf_size&&(ee(N,255&v.adler),ee(N,v.adler>>8&255),v.adler=0,N.status=F)):N.status=F),N.pending!==0){if(X(v),v.avail_out===0)return N.last_flush=-1,m}else if(v.avail_in===0&&re(ie)<=re(Y)&&ie!==h)return he(v,-5);if(N.status===666&&v.avail_in!==0)return he(v,-5);if(v.avail_in!==0||N.lookahead!==0||ie!==c&&N.status!==666){var T=N.strategy===2?function(D,le){for(var ve;;){if(D.lookahead===0&&(Le(D),D.lookahead===0)){if(le===c)return b;break}if(D.match_length=0,ve=a._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,ve&&(Z(D,!1),D.strm.avail_out===0))return b}return D.insert=0,le===h?(Z(D,!0),D.strm.avail_out===0?pe:W):D.last_lit&&(Z(D,!1),D.strm.avail_out===0)?b:K}(N,ie):N.strategy===3?function(D,le){for(var ve,de,Se,xe,Me=D.window;;){if(D.lookahead<=L){if(Le(D),D.lookahead<=L&&le===c)return b;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=j&&0<D.strstart&&(de=Me[Se=D.strstart-1])===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]){xe=D.strstart+L;do;while(de===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]&&de===Me[++Se]&&Se<xe);D.match_length=L-(xe-Se),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=j?(ve=a._tr_tally(D,1,D.match_length-j),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(ve=a._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),ve&&(Z(D,!1),D.strm.avail_out===0))return b}return D.insert=0,le===h?(Z(D,!0),D.strm.avail_out===0?pe:W):D.last_lit&&(Z(D,!1),D.strm.avail_out===0)?b:K}(N,ie):s[N.level].func(N,ie);if(T!==pe&&T!==W||(N.status=666),T===b||T===pe)return v.avail_out===0&&(N.last_flush=-1),m;if(T===K&&(ie===1?a._tr_align(N):ie!==5&&(a._tr_stored_block(N,0,0,!1),ie===3&&(Ee(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),X(v),v.avail_out===0))return N.last_flush=-1,m}return ie!==h?m:N.wrap<=0?1:(N.wrap===2?(ee(N,255&v.adler),ee(N,v.adler>>8&255),ee(N,v.adler>>16&255),ee(N,v.adler>>24&255),ee(N,255&v.total_in),ee(N,v.total_in>>8&255),ee(N,v.total_in>>16&255),ee(N,v.total_in>>24&255)):(te(N,v.adler>>>16),te(N,65535&v.adler)),X(v),0<N.wrap&&(N.wrap=-N.wrap),N.pending!==0?m:1)},i.deflateEnd=function(v){var ie;return v&&v.state?(ie=v.state.status)!==C&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==F&&ie!==666?he(v,p):(v.state=null,ie===F?he(v,-3):m):p},i.deflateSetDictionary=function(v,ie){var Y,N,E,G,ae,T,D,le,ve=ie.length;if(!v||!v.state||(G=(Y=v.state).wrap)===2||G===1&&Y.status!==C||Y.lookahead)return p;for(G===1&&(v.adler=l(v.adler,ie,ve,0)),Y.wrap=0,ve>=Y.w_size&&(G===0&&(Ee(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),le=new o.Buf8(Y.w_size),o.arraySet(le,ie,ve-Y.w_size,Y.w_size,0),ie=le,ve=Y.w_size),ae=v.avail_in,T=v.next_in,D=v.input,v.avail_in=ve,v.next_in=0,v.input=ie,Le(Y);Y.lookahead>=j;){for(N=Y.strstart,E=Y.lookahead-(j-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[N+j-1])&Y.hash_mask,Y.prev[N&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=N,N++,--E;);Y.strstart=N,Y.lookahead=j-1,Le(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=j-1,Y.match_available=0,v.next_in=T,v.input=D,v.avail_in=ae,Y.wrap=G,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(s,o){var a,l,u,f,c,h,m,p,d,_,g,$,A,w,R,I,U,q,j,L,V,C,F,b,K;a=s.state,l=s.next_in,b=s.input,u=l+(s.avail_in-5),f=s.next_out,K=s.output,c=f-(o-s.avail_out),h=f+(s.avail_out-257),m=a.dmax,p=a.wsize,d=a.whave,_=a.wnext,g=a.window,$=a.hold,A=a.bits,w=a.lencode,R=a.distcode,I=(1<<a.lenbits)-1,U=(1<<a.distbits)-1;e:do{A<15&&($+=b[l++]<<A,A+=8,$+=b[l++]<<A,A+=8),q=w[$&I];t:for(;;){if($>>>=j=q>>>24,A-=j,(j=q>>>16&255)===0)K[f++]=65535&q;else{if(!(16&j)){if(!(64&j)){q=w[(65535&q)+($&(1<<j)-1)];continue t}if(32&j){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}L=65535&q,(j&=15)&&(A<j&&($+=b[l++]<<A,A+=8),L+=$&(1<<j)-1,$>>>=j,A-=j),A<15&&($+=b[l++]<<A,A+=8,$+=b[l++]<<A,A+=8),q=R[$&U];n:for(;;){if($>>>=j=q>>>24,A-=j,!(16&(j=q>>>16&255))){if(!(64&j)){q=R[(65535&q)+($&(1<<j)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(V=65535&q,A<(j&=15)&&($+=b[l++]<<A,(A+=8)<j&&($+=b[l++]<<A,A+=8)),m<(V+=$&(1<<j)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if($>>>=j,A-=j,(j=f-c)<V){if(d<(j=V-j)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(F=g,(C=0)===_){if(C+=p-j,j<L){for(L-=j;K[f++]=g[C++],--j;);C=f-V,F=K}}else if(_<j){if(C+=p+_-j,(j-=_)<L){for(L-=j;K[f++]=g[C++],--j;);if(C=0,_<L){for(L-=j=_;K[f++]=g[C++],--j;);C=f-V,F=K}}}else if(C+=_-j,j<L){for(L-=j;K[f++]=g[C++],--j;);C=f-V,F=K}for(;2<L;)K[f++]=F[C++],K[f++]=F[C++],K[f++]=F[C++],L-=3;L&&(K[f++]=F[C++],1<L&&(K[f++]=F[C++]))}else{for(C=f-V;K[f++]=K[C++],K[f++]=K[C++],K[f++]=K[C++],2<(L-=3););L&&(K[f++]=K[C++],1<L&&(K[f++]=K[C++]))}break}}break}}while(l<u&&f<h);l-=L=A>>3,$&=(1<<(A-=L<<3))-1,s.next_in=l,s.next_out=f,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=f<h?h-f+257:257-(f-h),a.hold=$,a.bits=A}},{}],49:[function(t,n,i){var s=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),f=1,c=2,h=0,m=-2,p=1,d=852,_=592;function g(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(C){var F;return C&&C.state?(F=C.state,C.total_in=C.total_out=F.total=0,C.msg="",F.wrap&&(C.adler=1&F.wrap),F.mode=p,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(d),F.distcode=F.distdyn=new s.Buf32(_),F.sane=1,F.back=-1,h):m}function w(C){var F;return C&&C.state?((F=C.state).wsize=0,F.whave=0,F.wnext=0,A(C)):m}function R(C,F){var b,K;return C&&C.state?(K=C.state,F<0?(b=0,F=-F):(b=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?m:(K.window!==null&&K.wbits!==F&&(K.window=null),K.wrap=b,K.wbits=F,w(C))):m}function I(C,F){var b,K;return C?(K=new $,(C.state=K).window=null,(b=R(C,F))!==h&&(C.state=null),b):m}var U,q,j=!0;function L(C){if(j){var F;for(U=new s.Buf32(512),q=new s.Buf32(32),F=0;F<144;)C.lens[F++]=8;for(;F<256;)C.lens[F++]=9;for(;F<280;)C.lens[F++]=7;for(;F<288;)C.lens[F++]=8;for(u(f,C.lens,0,288,U,0,C.work,{bits:9}),F=0;F<32;)C.lens[F++]=5;u(c,C.lens,0,32,q,0,C.work,{bits:5}),j=!1}C.lencode=U,C.lenbits=9,C.distcode=q,C.distbits=5}function V(C,F,b,K){var pe,W=C.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new s.Buf8(W.wsize)),K>=W.wsize?(s.arraySet(W.window,F,b-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(K<(pe=W.wsize-W.wnext)&&(pe=K),s.arraySet(W.window,F,b-K,pe,W.wnext),(K-=pe)?(s.arraySet(W.window,F,b-K,K,0),W.wnext=K,W.whave=W.wsize):(W.wnext+=pe,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=pe))),0}i.inflateReset=w,i.inflateReset2=R,i.inflateResetKeep=A,i.inflateInit=function(C){return I(C,15)},i.inflateInit2=I,i.inflate=function(C,F){var b,K,pe,W,he,re,Ee,X,Z,ee,te,me,Le,Oe,Pe,ze,Be,Ve,it,at,v,ie,Y,N,E=0,G=new s.Buf8(4),ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return m;(b=C.state).mode===12&&(b.mode=13),he=C.next_out,pe=C.output,Ee=C.avail_out,W=C.next_in,K=C.input,re=C.avail_in,X=b.hold,Z=b.bits,ee=re,te=Ee,ie=h;e:for(;;)switch(b.mode){case p:if(b.wrap===0){b.mode=13;break}for(;Z<16;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(2&b.wrap&&X===35615){G[b.check=0]=255&X,G[1]=X>>>8&255,b.check=a(b.check,G,2,0),Z=X=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&X)<<8)+(X>>8))%31){C.msg="incorrect header check",b.mode=30;break}if((15&X)!=8){C.msg="unknown compression method",b.mode=30;break}if(Z-=4,v=8+(15&(X>>>=4)),b.wbits===0)b.wbits=v;else if(v>b.wbits){C.msg="invalid window size",b.mode=30;break}b.dmax=1<<v,C.adler=b.check=1,b.mode=512&X?10:12,Z=X=0;break;case 2:for(;Z<16;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(b.flags=X,(255&b.flags)!=8){C.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){C.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=X>>8&1),512&b.flags&&(G[0]=255&X,G[1]=X>>>8&255,b.check=a(b.check,G,2,0)),Z=X=0,b.mode=3;case 3:for(;Z<32;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}b.head&&(b.head.time=X),512&b.flags&&(G[0]=255&X,G[1]=X>>>8&255,G[2]=X>>>16&255,G[3]=X>>>24&255,b.check=a(b.check,G,4,0)),Z=X=0,b.mode=4;case 4:for(;Z<16;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}b.head&&(b.head.xflags=255&X,b.head.os=X>>8),512&b.flags&&(G[0]=255&X,G[1]=X>>>8&255,b.check=a(b.check,G,2,0)),Z=X=0,b.mode=5;case 5:if(1024&b.flags){for(;Z<16;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}b.length=X,b.head&&(b.head.extra_len=X),512&b.flags&&(G[0]=255&X,G[1]=X>>>8&255,b.check=a(b.check,G,2,0)),Z=X=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(re<(me=b.length)&&(me=re),me&&(b.head&&(v=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),s.arraySet(b.head.extra,K,W,me,v)),512&b.flags&&(b.check=a(b.check,K,me,W)),re-=me,W+=me,b.length-=me),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(re===0)break e;for(me=0;v=K[W+me++],b.head&&v&&b.length<65536&&(b.head.name+=String.fromCharCode(v)),v&&me<re;);if(512&b.flags&&(b.check=a(b.check,K,me,W)),re-=me,W+=me,v)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(re===0)break e;for(me=0;v=K[W+me++],b.head&&v&&b.length<65536&&(b.head.comment+=String.fromCharCode(v)),v&&me<re;);if(512&b.flags&&(b.check=a(b.check,K,me,W)),re-=me,W+=me,v)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;Z<16;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(X!==(65535&b.check)){C.msg="header crc mismatch",b.mode=30;break}Z=X=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),C.adler=b.check=0,b.mode=12;break;case 10:for(;Z<32;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}C.adler=b.check=g(X),Z=X=0,b.mode=11;case 11:if(b.havedict===0)return C.next_out=he,C.avail_out=Ee,C.next_in=W,C.avail_in=re,b.hold=X,b.bits=Z,2;C.adler=b.check=1,b.mode=12;case 12:if(F===5||F===6)break e;case 13:if(b.last){X>>>=7&Z,Z-=7&Z,b.mode=27;break}for(;Z<3;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}switch(b.last=1&X,Z-=1,3&(X>>>=1)){case 0:b.mode=14;break;case 1:if(L(b),b.mode=20,F!==6)break;X>>>=2,Z-=2;break e;case 2:b.mode=17;break;case 3:C.msg="invalid block type",b.mode=30}X>>>=2,Z-=2;break;case 14:for(X>>>=7&Z,Z-=7&Z;Z<32;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if((65535&X)!=(X>>>16^65535)){C.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&X,Z=X=0,b.mode=15,F===6)break e;case 15:b.mode=16;case 16:if(me=b.length){if(re<me&&(me=re),Ee<me&&(me=Ee),me===0)break e;s.arraySet(pe,K,W,me,he),re-=me,W+=me,Ee-=me,he+=me,b.length-=me;break}b.mode=12;break;case 17:for(;Z<14;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(b.nlen=257+(31&X),X>>>=5,Z-=5,b.ndist=1+(31&X),X>>>=5,Z-=5,b.ncode=4+(15&X),X>>>=4,Z-=4,286<b.nlen||30<b.ndist){C.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;Z<3;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}b.lens[ae[b.have++]]=7&X,X>>>=3,Z-=3}for(;b.have<19;)b.lens[ae[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,Y={bits:b.lenbits},ie=u(0,b.lens,0,19,b.lencode,0,b.work,Y),b.lenbits=Y.bits,ie){C.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;ze=(E=b.lencode[X&(1<<b.lenbits)-1])>>>16&255,Be=65535&E,!((Pe=E>>>24)<=Z);){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(Be<16)X>>>=Pe,Z-=Pe,b.lens[b.have++]=Be;else{if(Be===16){for(N=Pe+2;Z<N;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(X>>>=Pe,Z-=Pe,b.have===0){C.msg="invalid bit length repeat",b.mode=30;break}v=b.lens[b.have-1],me=3+(3&X),X>>>=2,Z-=2}else if(Be===17){for(N=Pe+3;Z<N;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}Z-=Pe,v=0,me=3+(7&(X>>>=Pe)),X>>>=3,Z-=3}else{for(N=Pe+7;Z<N;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}Z-=Pe,v=0,me=11+(127&(X>>>=Pe)),X>>>=7,Z-=7}if(b.have+me>b.nlen+b.ndist){C.msg="invalid bit length repeat",b.mode=30;break}for(;me--;)b.lens[b.have++]=v}}if(b.mode===30)break;if(b.lens[256]===0){C.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,Y={bits:b.lenbits},ie=u(f,b.lens,0,b.nlen,b.lencode,0,b.work,Y),b.lenbits=Y.bits,ie){C.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,Y={bits:b.distbits},ie=u(c,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,Y),b.distbits=Y.bits,ie){C.msg="invalid distances set",b.mode=30;break}if(b.mode=20,F===6)break e;case 20:b.mode=21;case 21:if(6<=re&&258<=Ee){C.next_out=he,C.avail_out=Ee,C.next_in=W,C.avail_in=re,b.hold=X,b.bits=Z,l(C,te),he=C.next_out,pe=C.output,Ee=C.avail_out,W=C.next_in,K=C.input,re=C.avail_in,X=b.hold,Z=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;ze=(E=b.lencode[X&(1<<b.lenbits)-1])>>>16&255,Be=65535&E,!((Pe=E>>>24)<=Z);){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(ze&&!(240&ze)){for(Ve=Pe,it=ze,at=Be;ze=(E=b.lencode[at+((X&(1<<Ve+it)-1)>>Ve)])>>>16&255,Be=65535&E,!(Ve+(Pe=E>>>24)<=Z);){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}X>>>=Ve,Z-=Ve,b.back+=Ve}if(X>>>=Pe,Z-=Pe,b.back+=Pe,b.length=Be,ze===0){b.mode=26;break}if(32&ze){b.back=-1,b.mode=12;break}if(64&ze){C.msg="invalid literal/length code",b.mode=30;break}b.extra=15&ze,b.mode=22;case 22:if(b.extra){for(N=b.extra;Z<N;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}b.length+=X&(1<<b.extra)-1,X>>>=b.extra,Z-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;ze=(E=b.distcode[X&(1<<b.distbits)-1])>>>16&255,Be=65535&E,!((Pe=E>>>24)<=Z);){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(!(240&ze)){for(Ve=Pe,it=ze,at=Be;ze=(E=b.distcode[at+((X&(1<<Ve+it)-1)>>Ve)])>>>16&255,Be=65535&E,!(Ve+(Pe=E>>>24)<=Z);){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}X>>>=Ve,Z-=Ve,b.back+=Ve}if(X>>>=Pe,Z-=Pe,b.back+=Pe,64&ze){C.msg="invalid distance code",b.mode=30;break}b.offset=Be,b.extra=15&ze,b.mode=24;case 24:if(b.extra){for(N=b.extra;Z<N;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}b.offset+=X&(1<<b.extra)-1,X>>>=b.extra,Z-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){C.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(Ee===0)break e;if(me=te-Ee,b.offset>me){if((me=b.offset-me)>b.whave&&b.sane){C.msg="invalid distance too far back",b.mode=30;break}Le=me>b.wnext?(me-=b.wnext,b.wsize-me):b.wnext-me,me>b.length&&(me=b.length),Oe=b.window}else Oe=pe,Le=he-b.offset,me=b.length;for(Ee<me&&(me=Ee),Ee-=me,b.length-=me;pe[he++]=Oe[Le++],--me;);b.length===0&&(b.mode=21);break;case 26:if(Ee===0)break e;pe[he++]=b.length,Ee--,b.mode=21;break;case 27:if(b.wrap){for(;Z<32;){if(re===0)break e;re--,X|=K[W++]<<Z,Z+=8}if(te-=Ee,C.total_out+=te,b.total+=te,te&&(C.adler=b.check=b.flags?a(b.check,pe,te,he-te):o(b.check,pe,te,he-te)),te=Ee,(b.flags?X:g(X))!==b.check){C.msg="incorrect data check",b.mode=30;break}Z=X=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;Z<32;){if(re===0)break e;re--,X+=K[W++]<<Z,Z+=8}if(X!==(4294967295&b.total)){C.msg="incorrect length check",b.mode=30;break}Z=X=0}b.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return m}return C.next_out=he,C.avail_out=Ee,C.next_in=W,C.avail_in=re,b.hold=X,b.bits=Z,(b.wsize||te!==C.avail_out&&b.mode<30&&(b.mode<27||F!==4))&&V(C,C.output,C.next_out,te-C.avail_out)?(b.mode=31,-4):(ee-=C.avail_in,te-=C.avail_out,C.total_in+=ee,C.total_out+=te,b.total+=te,b.wrap&&te&&(C.adler=b.check=b.flags?a(b.check,pe,te,C.next_out-te):o(b.check,pe,te,C.next_out-te)),C.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(ee==0&&te===0||F===4)&&ie===h&&(ie=-5),ie)},i.inflateEnd=function(C){if(!C||!C.state)return m;var F=C.state;return F.window&&(F.window=null),C.state=null,h},i.inflateGetHeader=function(C,F){var b;return C&&C.state&&2&(b=C.state).wrap?((b.head=F).done=!1,h):m},i.inflateSetDictionary=function(C,F){var b,K=F.length;return C&&C.state?(b=C.state).wrap!==0&&b.mode!==11?m:b.mode===11&&o(1,F,K,0)!==b.check?-3:V(C,F,K,K)?(b.mode=31,-4):(b.havedict=1,h):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,c,h,m,p,d,_,g){var $,A,w,R,I,U,q,j,L,V=g.bits,C=0,F=0,b=0,K=0,pe=0,W=0,he=0,re=0,Ee=0,X=0,Z=null,ee=0,te=new s.Buf16(16),me=new s.Buf16(16),Le=null,Oe=0;for(C=0;C<=15;C++)te[C]=0;for(F=0;F<m;F++)te[c[h+F]]++;for(pe=V,K=15;1<=K&&te[K]===0;K--);if(K<pe&&(pe=K),K===0)return p[d++]=20971520,p[d++]=20971520,g.bits=1,0;for(b=1;b<K&&te[b]===0;b++);for(pe<b&&(pe=b),C=re=1;C<=15;C++)if(re<<=1,(re-=te[C])<0)return-1;if(0<re&&(f===0||K!==1))return-1;for(me[1]=0,C=1;C<15;C++)me[C+1]=me[C]+te[C];for(F=0;F<m;F++)c[h+F]!==0&&(_[me[c[h+F]]++]=F);if(U=f===0?(Z=Le=_,19):f===1?(Z=o,ee-=257,Le=a,Oe-=257,256):(Z=l,Le=u,-1),C=b,I=d,he=F=X=0,w=-1,R=(Ee=1<<(W=pe))-1,f===1&&852<Ee||f===2&&592<Ee)return 1;for(;;){for(q=C-he,L=_[F]<U?(j=0,_[F]):_[F]>U?(j=Le[Oe+_[F]],Z[ee+_[F]]):(j=96,0),$=1<<C-he,b=A=1<<W;p[I+(X>>he)+(A-=$)]=q<<24|j<<16|L|0,A!==0;);for($=1<<C-1;X&$;)$>>=1;if($!==0?(X&=$-1,X+=$):X=0,F++,--te[C]==0){if(C===K)break;C=c[h+_[F]]}if(pe<C&&(X&R)!==w){for(he===0&&(he=pe),I+=b,re=1<<(W=C-he);W+he<K&&!((re-=te[W+he])<=0);)W++,re<<=1;if(Ee+=1<<W,f===1&&852<Ee||f===2&&592<Ee)return 1;p[w=X&R]=pe<<24|W<<16|I-d|0}}return X!==0&&(p[I+X]=C-he<<24|64<<16|0),g.bits=pe,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var s=t("../utils/common"),o=0,a=1;function l(E){for(var G=E.length;0<=--G;)E[G]=0}var u=0,f=29,c=256,h=c+1+f,m=30,p=19,d=2*h+1,_=15,g=16,$=7,A=256,w=16,R=17,I=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(h+2));l(V);var C=new Array(2*m);l(C);var F=new Array(512);l(F);var b=new Array(256);l(b);var K=new Array(f);l(K);var pe,W,he,re=new Array(m);function Ee(E,G,ae,T,D){this.static_tree=E,this.extra_bits=G,this.extra_base=ae,this.elems=T,this.max_length=D,this.has_stree=E&&E.length}function X(E,G){this.dyn_tree=E,this.max_code=0,this.stat_desc=G}function Z(E){return E<256?F[E]:F[256+(E>>>7)]}function ee(E,G){E.pending_buf[E.pending++]=255&G,E.pending_buf[E.pending++]=G>>>8&255}function te(E,G,ae){E.bi_valid>g-ae?(E.bi_buf|=G<<E.bi_valid&65535,ee(E,E.bi_buf),E.bi_buf=G>>g-E.bi_valid,E.bi_valid+=ae-g):(E.bi_buf|=G<<E.bi_valid&65535,E.bi_valid+=ae)}function me(E,G,ae){te(E,ae[2*G],ae[2*G+1])}function Le(E,G){for(var ae=0;ae|=1&E,E>>>=1,ae<<=1,0<--G;);return ae>>>1}function Oe(E,G,ae){var T,D,le=new Array(_+1),ve=0;for(T=1;T<=_;T++)le[T]=ve=ve+ae[T-1]<<1;for(D=0;D<=G;D++){var de=E[2*D+1];de!==0&&(E[2*D]=Le(le[de]++,de))}}function Pe(E){var G;for(G=0;G<h;G++)E.dyn_ltree[2*G]=0;for(G=0;G<m;G++)E.dyn_dtree[2*G]=0;for(G=0;G<p;G++)E.bl_tree[2*G]=0;E.dyn_ltree[2*A]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function ze(E){8<E.bi_valid?ee(E,E.bi_buf):0<E.bi_valid&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function Be(E,G,ae,T){var D=2*G,le=2*ae;return E[D]<E[le]||E[D]===E[le]&&T[G]<=T[ae]}function Ve(E,G,ae){for(var T=E.heap[ae],D=ae<<1;D<=E.heap_len&&(D<E.heap_len&&Be(G,E.heap[D+1],E.heap[D],E.depth)&&D++,!Be(G,T,E.heap[D],E.depth));)E.heap[ae]=E.heap[D],ae=D,D<<=1;E.heap[ae]=T}function it(E,G,ae){var T,D,le,ve,de=0;if(E.last_lit!==0)for(;T=E.pending_buf[E.d_buf+2*de]<<8|E.pending_buf[E.d_buf+2*de+1],D=E.pending_buf[E.l_buf+de],de++,T===0?me(E,D,G):(me(E,(le=b[D])+c+1,G),(ve=U[le])!==0&&te(E,D-=K[le],ve),me(E,le=Z(--T),ae),(ve=q[le])!==0&&te(E,T-=re[le],ve)),de<E.last_lit;);me(E,A,G)}function at(E,G){var ae,T,D,le=G.dyn_tree,ve=G.stat_desc.static_tree,de=G.stat_desc.has_stree,Se=G.stat_desc.elems,xe=-1;for(E.heap_len=0,E.heap_max=d,ae=0;ae<Se;ae++)le[2*ae]!==0?(E.heap[++E.heap_len]=xe=ae,E.depth[ae]=0):le[2*ae+1]=0;for(;E.heap_len<2;)le[2*(D=E.heap[++E.heap_len]=xe<2?++xe:0)]=1,E.depth[D]=0,E.opt_len--,de&&(E.static_len-=ve[2*D+1]);for(G.max_code=xe,ae=E.heap_len>>1;1<=ae;ae--)Ve(E,le,ae);for(D=Se;ae=E.heap[1],E.heap[1]=E.heap[E.heap_len--],Ve(E,le,1),T=E.heap[1],E.heap[--E.heap_max]=ae,E.heap[--E.heap_max]=T,le[2*D]=le[2*ae]+le[2*T],E.depth[D]=(E.depth[ae]>=E.depth[T]?E.depth[ae]:E.depth[T])+1,le[2*ae+1]=le[2*T+1]=D,E.heap[1]=D++,Ve(E,le,1),2<=E.heap_len;);E.heap[--E.heap_max]=E.heap[1],function(Me,dt){var xt,bt,Bt,Je,Qt,un,vt=dt.dyn_tree,fn=dt.max_code,pa=dt.stat_desc.static_tree,_a=dt.stat_desc.has_stree,ga=dt.stat_desc.extra_bits,bi=dt.stat_desc.extra_base,kn=dt.stat_desc.max_length,Ln=0;for(Je=0;Je<=_;Je++)Me.bl_count[Je]=0;for(vt[2*Me.heap[Me.heap_max]+1]=0,xt=Me.heap_max+1;xt<d;xt++)kn<(Je=vt[2*vt[2*(bt=Me.heap[xt])+1]+1]+1)&&(Je=kn,Ln++),vt[2*bt+1]=Je,fn<bt||(Me.bl_count[Je]++,Qt=0,bi<=bt&&(Qt=ga[bt-bi]),un=vt[2*bt],Me.opt_len+=un*(Je+Qt),_a&&(Me.static_len+=un*(pa[2*bt+1]+Qt)));if(Ln!==0){do{for(Je=kn-1;Me.bl_count[Je]===0;)Je--;Me.bl_count[Je]--,Me.bl_count[Je+1]+=2,Me.bl_count[kn]--,Ln-=2}while(0<Ln);for(Je=kn;Je!==0;Je--)for(bt=Me.bl_count[Je];bt!==0;)fn<(Bt=Me.heap[--xt])||(vt[2*Bt+1]!==Je&&(Me.opt_len+=(Je-vt[2*Bt+1])*vt[2*Bt],vt[2*Bt+1]=Je),bt--)}}(E,G),Oe(le,xe,E.bl_count)}function v(E,G,ae){var T,D,le=-1,ve=G[1],de=0,Se=7,xe=4;for(ve===0&&(Se=138,xe=3),G[2*(ae+1)+1]=65535,T=0;T<=ae;T++)D=ve,ve=G[2*(T+1)+1],++de<Se&&D===ve||(de<xe?E.bl_tree[2*D]+=de:D!==0?(D!==le&&E.bl_tree[2*D]++,E.bl_tree[2*w]++):de<=10?E.bl_tree[2*R]++:E.bl_tree[2*I]++,le=D,xe=(de=0)===ve?(Se=138,3):D===ve?(Se=6,3):(Se=7,4))}function ie(E,G,ae){var T,D,le=-1,ve=G[1],de=0,Se=7,xe=4;for(ve===0&&(Se=138,xe=3),T=0;T<=ae;T++)if(D=ve,ve=G[2*(T+1)+1],!(++de<Se&&D===ve)){if(de<xe)for(;me(E,D,E.bl_tree),--de!=0;);else D!==0?(D!==le&&(me(E,D,E.bl_tree),de--),me(E,w,E.bl_tree),te(E,de-3,2)):de<=10?(me(E,R,E.bl_tree),te(E,de-3,3)):(me(E,I,E.bl_tree),te(E,de-11,7));le=D,xe=(de=0)===ve?(Se=138,3):D===ve?(Se=6,3):(Se=7,4)}}l(re);var Y=!1;function N(E,G,ae,T){te(E,(u<<1)+(T?1:0),3),function(D,le,ve,de){ze(D),de&&(ee(D,ve),ee(D,~ve)),s.arraySet(D.pending_buf,D.window,le,ve,D.pending),D.pending+=ve}(E,G,ae,!0)}i._tr_init=function(E){Y||(function(){var G,ae,T,D,le,ve=new Array(_+1);for(D=T=0;D<f-1;D++)for(K[D]=T,G=0;G<1<<U[D];G++)b[T++]=D;for(b[T-1]=D,D=le=0;D<16;D++)for(re[D]=le,G=0;G<1<<q[D];G++)F[le++]=D;for(le>>=7;D<m;D++)for(re[D]=le<<7,G=0;G<1<<q[D]-7;G++)F[256+le++]=D;for(ae=0;ae<=_;ae++)ve[ae]=0;for(G=0;G<=143;)V[2*G+1]=8,G++,ve[8]++;for(;G<=255;)V[2*G+1]=9,G++,ve[9]++;for(;G<=279;)V[2*G+1]=7,G++,ve[7]++;for(;G<=287;)V[2*G+1]=8,G++,ve[8]++;for(Oe(V,h+1,ve),G=0;G<m;G++)C[2*G+1]=5,C[2*G]=Le(G,5);pe=new Ee(V,U,c+1,h,_),W=new Ee(C,q,0,m,_),he=new Ee(new Array(0),j,0,p,$)}(),Y=!0),E.l_desc=new X(E.dyn_ltree,pe),E.d_desc=new X(E.dyn_dtree,W),E.bl_desc=new X(E.bl_tree,he),E.bi_buf=0,E.bi_valid=0,Pe(E)},i._tr_stored_block=N,i._tr_flush_block=function(E,G,ae,T){var D,le,ve=0;0<E.level?(E.strm.data_type===2&&(E.strm.data_type=function(de){var Se,xe=4093624447;for(Se=0;Se<=31;Se++,xe>>>=1)if(1&xe&&de.dyn_ltree[2*Se]!==0)return o;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return a;for(Se=32;Se<c;Se++)if(de.dyn_ltree[2*Se]!==0)return a;return o}(E)),at(E,E.l_desc),at(E,E.d_desc),ve=function(de){var Se;for(v(de,de.dyn_ltree,de.l_desc.max_code),v(de,de.dyn_dtree,de.d_desc.max_code),at(de,de.bl_desc),Se=p-1;3<=Se&&de.bl_tree[2*L[Se]+1]===0;Se--);return de.opt_len+=3*(Se+1)+5+5+4,Se}(E),D=E.opt_len+3+7>>>3,(le=E.static_len+3+7>>>3)<=D&&(D=le)):D=le=ae+5,ae+4<=D&&G!==-1?N(E,G,ae,T):E.strategy===4||le===D?(te(E,2+(T?1:0),3),it(E,V,C)):(te(E,4+(T?1:0),3),function(de,Se,xe,Me){var dt;for(te(de,Se-257,5),te(de,xe-1,5),te(de,Me-4,4),dt=0;dt<Me;dt++)te(de,de.bl_tree[2*L[dt]+1],3);ie(de,de.dyn_ltree,Se-1),ie(de,de.dyn_dtree,xe-1)}(E,E.l_desc.max_code+1,E.d_desc.max_code+1,ve+1),it(E,E.dyn_ltree,E.dyn_dtree)),Pe(E),T&&ze(E)},i._tr_tally=function(E,G,ae){return E.pending_buf[E.d_buf+2*E.last_lit]=G>>>8&255,E.pending_buf[E.d_buf+2*E.last_lit+1]=255&G,E.pending_buf[E.l_buf+E.last_lit]=255&ae,E.last_lit++,G===0?E.dyn_ltree[2*ae]++:(E.matches++,G--,E.dyn_ltree[2*(b[ae]+c+1)]++,E.dyn_dtree[2*Z(G)]++),E.last_lit===E.lit_bufsize-1},i._tr_align=function(E){te(E,2,3),me(E,A,V),function(G){G.bi_valid===16?(ee(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)}(E)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,f,c,h=1,m={},p=!1,d=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){$(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,R=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=R,w}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",A,!1):o.attachEvent("onmessage",A),function(w){o.postMessage(c+w,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(w){$(w.data)},function(w){f.port2.postMessage(w)}):d&&"onreadystatechange"in d.createElement("script")?(u=d.documentElement,function(w){var R=d.createElement("script");R.onreadystatechange=function(){$(w),R.onreadystatechange=null,u.removeChild(R),R=null},u.appendChild(R)}):function(w){setTimeout($,0,w)},_.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var R=new Array(arguments.length-1),I=0;I<R.length;I++)R[I]=arguments[I+1];var U={callback:w,args:R};return m[h]=U,l(h),h++},_.clearImmediate=g}function g(w){delete m[w]}function $(w){if(p)setTimeout($,0,w);else{var R=m[w];if(R){p=!0;try{(function(I){var U=I.callback,q=I.args;switch(q.length){case 0:U();break;case 1:U(q[0]);break;case 2:U(q[0],q[1]);break;case 3:U(q[0],q[1],q[2]);break;default:U.apply(a,q)}})(R)}finally{g(w),p=!1}}}}function A(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(c)===0&&$(+w.data.slice(c.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ks);var Gh=Ks.exports;const rr=Oh(Gh),Hh=""+new URL("../assets/fonts_metrics.129dbd9a.zip",import.meta.url).href;function jh(r,e){if(r>e.k*256)return r/e.k;const{size:t,height:n}=e.metrics;let i=0,s=t.length-1;for(;s-i>1;){const o=Math.round((i+s)/2);n[o]<=r?i=o:n[o]>r&&(s=o)}return t[i]}function Wh(r){const{family:e,italic:t,bold:n,smallCaps:i}=r,s=[e];return t&&s.push("italic"),n&&s.push("bold"),i&&s.push("small-caps"),s.join("_")}class Vh{constructor(){Te(this,"data")}get(e){if(!this.data)return{k:1,metrics:{height:[0,1],size:[0,1]}};const t=Wh(e),n=this.data.get(t);if(!n)throw new Error(`Not found font statistics for ${t}`);return n}}const qh=Pn(["Impact","Lobster","Arial","Helvetica","Next art","Pacifico","Caveat","Comforter"]);function Zh(){return Xh(Hh)}function Xh(r){const e=new Vh;return{store:e,then:fetch(r).then(t=>t.blob()).then(t=>rr.loadAsync(t)).then(t=>Promise.all(Object.entries(t.files).map(([n,i])=>i.async("string").then(s=>[n.substring(0,n.length-5),JSON.parse(s)])))).then(t=>e.data=new Map(t))}}function Kh(r=document.fonts){const e=new Array;return r.forEach(t=>e.push(t.load().catch(n=>(console.warn(`Failed load font ${t.family}: ${n.message}`),t)))),Promise.all(e)}var Yh="M13,6L15,4L16.42,5.42L12,9.84L7.58,5.42L9,4L11,6V2H13V6M3,11H21V13H3V11M13,18V22H11V18L9,20L7.58,18.58L12,14.16L16.42,18.58L15,20L13,18Z";function Qi(r,e,t){const n=r.slice();return n[24]=e[t],n}function Jh(r){let e,t;return e=new vu({props:{size:20}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Qh(r){let e,t;return e=new dl({props:{size:20}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function em(r){let e,t;return{c(){e=J("span"),t=ue("Аа"),this.h()},l(n){e=Q(n,"SPAN",{style:!0});var i=ne(e);t=fe(i,"Аа"),i.forEach(S),this.h()},h(){lt(e,"font-size","20px"),lt(e,"font-variant","small-caps")},m(n,i){O(n,e,i),H(e,t)},p:je,d(n){n&&S(e)}}}function tm(r){let e,t;return e=new Ha({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function nm(r){let e,t;return e=new Pa({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function rm(r){let e,t;return e=new Da({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function im(r){let e,t,n,i;const s=[rm,nm,tm],o=[];function a(l,u){return l[23]=="left"?0:l[23]=="center"?1:l[23]=="right"?2:-1}return~(e=a(r))&&(t=o[e]=s[e](r)),{c(){t&&t.c(),n=De()},l(l){t&&t.l(l),n=De()},m(l,u){~e&&o[e].m(l,u),O(l,n,u),i=!0},p(l,u){let f=e;e=a(l),e!==f&&(t&&(Ge(),k(o[f],1,1,()=>{o[f]=null}),He()),~e?(t=o[e],t||(t=o[e]=s[e](l),t.c()),y(t,1),t.m(n.parentNode,n)):t=null)},i(l){i||(y(t),i=!0)},o(l){k(t),i=!1},d(l){~e&&o[e].d(l),l&&S(n)}}}function sm(r){let e,t;return e=new Za({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function om(r){let e,t;return e=new Kr({props:{type:"mdi",path:Yh}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function am(r){let e,t;return e=new Qa({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function lm(r){let e,t,n,i;const s=[am,om,sm],o=[];function a(l,u){return l[23]=="top"?0:l[23]=="middle"?1:l[23]=="bottom"?2:-1}return~(e=a(r))&&(t=o[e]=s[e](r)),{c(){t&&t.c(),n=De()},l(l){t&&t.l(l),n=De()},m(l,u){~e&&o[e].m(l,u),O(l,n,u),i=!0},p(l,u){let f=e;e=a(l),e===f?~e&&o[e].p(l,u):(t&&(Ge(),k(o[f],1,1,()=>{o[f]=null}),He()),~e?(t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(n.parentNode,n)):t=null)},i(l){i||(y(t),i=!0)},o(l){k(t),i=!1},d(l){~e&&o[e].d(l),l&&S(n)}}}function um(r){let e,t;return e=new ku({}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function es(r){let e,t,n,i,s,o,a;return{c(){e=J("label"),t=J("input"),n=se(),i=ue(r[24]),s=se(),this.h()},l(l){e=Q(l,"LABEL",{class:!0});var u=ne(e);t=Q(u,"INPUT",{type:!0,style:!0}),n=oe(u),i=fe(u,r[24]),s=oe(u),u.forEach(S),this.h()},h(){x(t,"type","radio"),t.__value=r[24],t.value=t.__value,lt(t,"display","none"),r[18][0].push(t),x(e,"class","svelte-ebxik1")},m(l,u){O(l,e,u),H(e,t),t.checked=t.__value===r[4],H(e,n),H(e,i),H(e,s),o||(a=Ie(t,"change",r[17]),o=!0)},p(l,u){u&16&&(t.checked=t.__value===l[4])},d(l){l&&S(e),r[18][0].splice(r[18][0].indexOf(t),1),o=!1,a()}}}function fm(r){let e,t,n,i,s;function o(f){r[16](f)}let a={min:-1,step:.125,precision:3};r[4]!==void 0&&(a.value=r[4]),t=new rt({props:a}),_e.push(()=>ge(t,"value",o));let l=[0,.5,1,1.25],u=[];for(let f=0;f<4;f+=1)u[f]=es(Qi(r,l,f));return{c(){e=J("section"),P(t.$$.fragment),i=se();for(let f=0;f<4;f+=1)u[f].c();this.h()},l(f){e=Q(f,"SECTION",{slot:!0,class:!0});var c=ne(e);B(t.$$.fragment,c),i=oe(c);for(let h=0;h<4;h+=1)u[h].l(c);c.forEach(S),this.h()},h(){x(e,"slot","content"),x(e,"class","spacing-values svelte-ebxik1")},m(f,c){O(f,e,c),M(t,e,null),H(e,i);for(let h=0;h<4;h+=1)u[h].m(e,null);s=!0},p(f,c){const h={};if(!n&&c&16&&(n=!0,h.value=f[4],be(()=>n=!1)),t.$set(h),c&16){l=[0,.5,1,1.25];let m;for(m=0;m<4;m+=1){const p=Qi(f,l,m);u[m]?u[m].p(p,c):(u[m]=es(p),u[m].c(),u[m].m(e,null))}for(;m<4;m+=1)u[m].d(1)}},i(f){s||(y(t.$$.fragment,f),s=!0)},o(f){k(t.$$.fragment,f),s=!1},d(f){f&&S(e),z(t),gn(u,f)}}}function cm(r){let e,t=r[23]+"",n;return{c(){e=J("section"),n=ue(t),this.h()},l(i){e=Q(i,"SECTION",{style:!0});var s=ne(e);n=fe(s,t),s.forEach(S),this.h()},h(){lt(e,"font-family",r[23])},m(i,s){O(i,e,s),H(e,n)},p(i,s){s&8388608&&t!==(t=i[23]+"")&&st(n,t),s&8388608&&lt(e,"font-family",i[23])},d(i){i&&S(e)}}}function hm(r){let e;return{c(){e=ue("строчные")},l(t){e=fe(t,"строчные")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function mm(r){let e;return{c(){e=ue("КАПС")},l(t){e=fe(t,"КАПС")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function dm(r){let e;return{c(){e=ue("Как есть")},l(t){e=fe(t,"Как есть")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function pm(r){let e;function t(s,o){if(s[23]==="As is")return dm;if(s[23]==="UPPER")return mm;if(s[23]==="lower")return hm}let n=t(r),i=n&&n(r);return{c(){i&&i.c(),e=De()},l(s){i&&i.l(s),e=De()},m(s,o){i&&i.m(s,o),O(s,e,o)},p(s,o){n!==(n=t(s))&&(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i&&i.d(s),s&&S(e)}}}function _m(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_,g,$,A,w,R,I,U,q;function j(ee){r[6](ee)}let L={title:"Курсив",$$slots:{default:[Jh]},$$scope:{ctx:r}};r[0].italic!==void 0&&(L.value=r[0].italic),t=new Yn({props:L}),_e.push(()=>ge(t,"value",j)),t.$on("change",r[7]);function V(ee){r[8](ee)}let C={title:"Жирный",$$slots:{default:[Qh]},$$scope:{ctx:r}};r[0].bold!==void 0&&(C.value=r[0].bold),s=new Yn({props:C}),_e.push(()=>ge(s,"value",V)),s.$on("change",r[9]);function F(ee){r[10](ee)}let b={title:"Капитель",$$slots:{default:[em]},$$scope:{ctx:r}};r[0].smallCaps!==void 0&&(b.value=r[0].smallCaps),l=new Yn({props:b}),_e.push(()=>ge(l,"value",F)),l.$on("change",r[11]);function K(ee){r[12](ee)}let pe={title:"Выравнивание",items:["left","center","right"],$$slots:{default:[im,({item:ee})=>({23:ee}),({item:ee})=>ee?8388608:0]},$$scope:{ctx:r}};r[2]!==void 0&&(pe.value=r[2]),c=new Pt({props:pe}),_e.push(()=>ge(c,"value",K)),c.$on("change",r[13]);function W(ee){r[14](ee)}let he={title:"Позиционирование",items:["top","middle","bottom"],$$slots:{default:[lm,({item:ee})=>({23:ee}),({item:ee})=>ee?8388608:0]},$$scope:{ctx:r}};r[3]!==void 0&&(he.value=r[3]),p=new Pt({props:he}),_e.push(()=>ge(p,"value",W)),p.$on("change",r[15]),g=new Vs({props:{title:"Междустрочный интервал",css:{height:"48px",main:"min-width:100px",width:"100%"},$$slots:{content:[fm],header:[um]},$$scope:{ctx:r}}});function re(ee){r[19](ee)}let Ee={title:"Шрифт",items:r[5],$$slots:{default:[cm,({item:ee})=>({23:ee}),({item:ee})=>ee?8388608:0]},$$scope:{ctx:r}};r[0].family!==void 0&&(Ee.value=r[0].family),A=new Pt({props:Ee}),_e.push(()=>ge(A,"value",re)),A.$on("change",r[20]);function X(ee){r[21](ee)}let Z={title:"Регистр",items:["As is","UPPER","lower"],$$slots:{default:[pm,({item:ee})=>({23:ee}),({item:ee})=>ee?8388608:0]},$$scope:{ctx:r}};return r[1]!==void 0&&(Z.value=r[1]),I=new Pt({props:Z}),_e.push(()=>ge(I,"value",X)),I.$on("change",r[22]),{c(){e=J("article"),P(t.$$.fragment),i=se(),P(s.$$.fragment),a=se(),P(l.$$.fragment),f=se(),P(c.$$.fragment),m=se(),P(p.$$.fragment),_=se(),P(g.$$.fragment),$=se(),P(A.$$.fragment),R=se(),P(I.$$.fragment),this.h()},l(ee){e=Q(ee,"ARTICLE",{class:!0});var te=ne(e);B(t.$$.fragment,te),i=oe(te),B(s.$$.fragment,te),a=oe(te),B(l.$$.fragment,te),f=oe(te),B(c.$$.fragment,te),m=oe(te),B(p.$$.fragment,te),_=oe(te),B(g.$$.fragment,te),$=oe(te),B(A.$$.fragment,te),R=oe(te),B(I.$$.fragment,te),te.forEach(S),this.h()},h(){x(e,"class","svelte-ebxik1")},m(ee,te){O(ee,e,te),M(t,e,null),H(e,i),M(s,e,null),H(e,a),M(l,e,null),H(e,f),M(c,e,null),H(e,m),M(p,e,null),H(e,_),M(g,e,null),H(e,$),M(A,e,null),H(e,R),M(I,e,null),q=!0},p(ee,[te]){const me={};te&134217728&&(me.$$scope={dirty:te,ctx:ee}),!n&&te&1&&(n=!0,me.value=ee[0].italic,be(()=>n=!1)),t.$set(me);const Le={};te&134217728&&(Le.$$scope={dirty:te,ctx:ee}),!o&&te&1&&(o=!0,Le.value=ee[0].bold,be(()=>o=!1)),s.$set(Le);const Oe={};te&134217728&&(Oe.$$scope={dirty:te,ctx:ee}),!u&&te&1&&(u=!0,Oe.value=ee[0].smallCaps,be(()=>u=!1)),l.$set(Oe);const Pe={};te&142606336&&(Pe.$$scope={dirty:te,ctx:ee}),!h&&te&4&&(h=!0,Pe.value=ee[2],be(()=>h=!1)),c.$set(Pe);const ze={};te&142606336&&(ze.$$scope={dirty:te,ctx:ee}),!d&&te&8&&(d=!0,ze.value=ee[3],be(()=>d=!1)),p.$set(ze);const Be={};te&134217744&&(Be.$$scope={dirty:te,ctx:ee}),g.$set(Be);const Ve={};te&32&&(Ve.items=ee[5]),te&142606336&&(Ve.$$scope={dirty:te,ctx:ee}),!w&&te&1&&(w=!0,Ve.value=ee[0].family,be(()=>w=!1)),A.$set(Ve);const it={};te&142606336&&(it.$$scope={dirty:te,ctx:ee}),!U&&te&2&&(U=!0,it.value=ee[1],be(()=>U=!1)),I.$set(it)},i(ee){q||(y(t.$$.fragment,ee),y(s.$$.fragment,ee),y(l.$$.fragment,ee),y(c.$$.fragment,ee),y(p.$$.fragment,ee),y(g.$$.fragment,ee),y(A.$$.fragment,ee),y(I.$$.fragment,ee),q=!0)},o(ee){k(t.$$.fragment,ee),k(s.$$.fragment,ee),k(l.$$.fragment,ee),k(c.$$.fragment,ee),k(p.$$.fragment,ee),k(g.$$.fragment,ee),k(A.$$.fragment,ee),k(I.$$.fragment,ee),q=!1},d(ee){ee&&S(e),z(t),z(s),z(l),z(c),z(p),z(g),z(A),z(I)}}}function gm(r,e,t){let n;Tt(r,qh,L=>t(5,n=L));let{font:i}=e,{textCase:s}=e,{align:o}=e,{baseline:a}=e,{spacing:l}=e;const u=[[]];function f(L){r.$$.not_equal(i.italic,L)&&(i.italic=L,t(0,i))}function c(L){Ae.call(this,r,L)}function h(L){r.$$.not_equal(i.bold,L)&&(i.bold=L,t(0,i))}function m(L){Ae.call(this,r,L)}function p(L){r.$$.not_equal(i.smallCaps,L)&&(i.smallCaps=L,t(0,i))}function d(L){Ae.call(this,r,L)}function _(L){o=L,t(2,o)}function g(L){Ae.call(this,r,L)}function $(L){a=L,t(3,a)}function A(L){Ae.call(this,r,L)}function w(L){l=L,t(4,l)}function R(){l=this.__value,t(4,l)}function I(L){r.$$.not_equal(i.family,L)&&(i.family=L,t(0,i))}function U(L){Ae.call(this,r,L)}function q(L){s=L,t(1,s)}function j(L){Ae.call(this,r,L)}return r.$$set=L=>{"font"in L&&t(0,i=L.font),"textCase"in L&&t(1,s=L.textCase),"align"in L&&t(2,o=L.align),"baseline"in L&&t(3,a=L.baseline),"spacing"in L&&t(4,l=L.spacing)},[i,s,o,a,l,n,f,c,h,m,p,d,_,g,$,A,w,R,u,I,U,q,j]}class bm extends we{constructor(e){super(),ye(this,e,gm,_m,$e,{font:0,textCase:1,align:2,baseline:3,spacing:4})}}function vm(r){let e,t=r[27].name+"",n;return{c(){e=J("div"),n=ue(t)},l(i){e=Q(i,"DIV",{});var s=ne(e);n=fe(s,t),s.forEach(S)},m(i,s){O(i,e,s),H(e,n)},p(i,s){s&134217728&&t!==(t=i[27].name+"")&&st(n,t)},d(i){i&&S(e)}}}function $m(r){let e,t=r[27].name+"",n;return{c(){e=J("div"),n=ue(t),this.h()},l(i){e=Q(i,"DIV",{style:!0});var s=ne(e);n=fe(s,t),s.forEach(S),this.h()},h(){lt(e,"font",an(r[27].preset.font,16))},m(i,s){O(i,e,s),H(e,n)},p(i,s){s&134217728&&t!==(t=i[27].name+"")&&st(n,t),s&134217728&&lt(e,"font",an(i[27].preset.font,16))},d(i){i&&S(e)}}}function wm(r){let e;function t(s,o){return s[27].preset?$m:vm}let n=t(r),i=n(r);return{c(){i.c(),e=De()},l(s){i.l(s),e=De()},m(s,o){i.m(s,o),O(s,e,o)},p(s,o){n===(n=t(s))&&i?i.p(s,o):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&S(e)}}}function ym(r){let e,t;return e=new Bl({props:{transform:"rotate(-12)",size:32}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Em(r){let e,t;return e=new Kr({props:{type:"bootstrap",path:Rm,size:32}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function km(r){let e,t,n,i,s;const o=[Em,ym],a=[];function l(u,f){return u[26].icon==="fill"?0:u[26].icon==="stroke"?1:-1}return~(t=l(r))&&(n=a[t]=o[t](r)),{c(){e=J("div"),n&&n.c(),this.h()},l(u){e=Q(u,"DIV",{class:!0,title:!0});var f=ne(e);n&&n.l(f),f.forEach(S),this.h()},h(){x(e,"class","icon svelte-s55el5"),x(e,"title",i=r[26].label)},m(u,f){O(u,e,f),~t&&a[t].m(e,null),s=!0},p(u,f){let c=t;t=l(u),t===c?~t&&a[t].p(u,f):(n&&(Ge(),k(a[c],1,1,()=>{a[c]=null}),He()),~t?(n=a[t],n?n.p(u,f):(n=a[t]=o[t](u),n.c()),y(n,1),n.m(e,null)):n=null),(!s||f&67108864&&i!==(i=u[26].label))&&x(e,"title",i)},i(u){s||(y(n),s=!0)},o(u){k(n),s=!1},d(u){u&&S(e),~t&&a[t].d()}}}function Am(r){let e,t,n,i,s;e=new Xe({props:{$$slots:{default:[Tm]},$$scope:{ctx:r}}});function o(l){r[22](l)}let a={defaults:[{type:"disabled"},{type:"color",value:"#000000"},{type:"pattern",name:"fire",rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}},{type:"gradient4",color1:"#ff0000",color2:"#00ff00",color3:"#0000ff",color4:"#fff000"}]};return r[0].stroke!==void 0&&(a.value=r[0].stroke),n=new Zs({props:a}),_e.push(()=>ge(n,"value",o)),n.$on("change",r[23]),n.$on("addPattern",r[24]),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment)},l(l){B(e.$$.fragment,l),t=oe(l),B(n.$$.fragment,l)},m(l,u){M(e,l,u),O(l,t,u),M(n,l,u),s=!0},p(l,u){const f={};u&268435457&&(f.$$scope={dirty:u,ctx:l}),e.$set(f);const c={};!i&&u&1&&(i=!0,c.value=l[0].stroke,be(()=>i=!1)),n.$set(c)},i(l){s||(y(e.$$.fragment,l),y(n.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),k(n.$$.fragment,l),s=!1},d(l){z(e,l),l&&S(t),z(n,l)}}}function Sm(r){let e,t,n;function i(o){r[18](o)}let s={defaults:[{type:"disabled"},{type:"color",value:"#ffffff"},{type:"pattern",name:"fire",rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}},{type:"gradient4",color1:"#ff0000",color2:"#00ff00",color3:"#0000ff",color4:"#fff000"}]};return r[0].fill!==void 0&&(s.value=r[0].fill),e=new Zs({props:s}),_e.push(()=>ge(e,"value",i)),e.$on("change",r[19]),e.$on("addPattern",r[20]),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};!t&&a&1&&(t=!0,l.value=o[0].fill,be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Tm(r){let e,t,n,i;function s(a){r[21](a)}let o={min:0,rangeMax:50,withRange:!0};return r[0].strokeWidth!==void 0&&(o.value=r[0].strokeWidth),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue(`Толщина обводки (%)
					`),P(t.$$.fragment)},l(a){e=fe(a,`Толщина обводки (%)
					`),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].strokeWidth,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function Im(r){let e,t,n,i;const s=[Sm,Am],o=[];function a(l,u){return l[26].label==="Заливка"?0:l[26].label==="Обводка"?1:-1}return~(t=a(r))&&(n=o[t]=s[t](r)),{c(){e=J("div"),n&&n.c(),this.h()},l(l){e=Q(l,"DIV",{slot:!0});var u=ne(e);n&&n.l(u),u.forEach(S),this.h()},h(){x(e,"slot","content")},m(l,u){O(l,e,u),~t&&o[t].m(e,null),i=!0},p(l,u){let f=t;t=a(l),t===f?~t&&o[t].p(l,u):(n&&(Ge(),k(o[f],1,1,()=>{o[f]=null}),He()),~t?(n=o[t],n?n.p(l,u):(n=o[t]=s[t](l),n.c()),y(n,1),n.m(e,null)):n=null)},i(l){i||(y(n),i=!0)},o(l){k(n),i=!1},d(l){l&&S(e),~t&&o[t].d()}}}function Cm(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_,g,$;function A(F){r[9](F)}let w={placeholder:r[6],items:[r[6],...r[4].map(ts)],$$slots:{default:[wm,({item:F})=>({27:F}),({item:F})=>F?134217728:0]},$$scope:{ctx:r}};r[3]!==void 0&&(w.value=r[3]),t=new Pt({props:w}),_e.push(()=>ge(t,"value",A)),t.$on("change",r[7]),t.$on("change",r[10]);function R(F){r[11](F)}function I(F){r[12](F)}function U(F){r[13](F)}function q(F){r[14](F)}function j(F){r[15](F)}let L={};r[0].font!==void 0&&(L.font=r[0].font),r[0].case!==void 0&&(L.textCase=r[0].case),r[0].align!==void 0&&(L.align=r[0].align),r[0].baseline!==void 0&&(L.baseline=r[0].baseline),r[0].lineSpacing!==void 0&&(L.spacing=r[0].lineSpacing),s=new bm({props:L}),_e.push(()=>ge(s,"font",R)),_e.push(()=>ge(s,"textCase",I)),_e.push(()=>ge(s,"align",U)),_e.push(()=>ge(s,"baseline",q)),_e.push(()=>ge(s,"spacing",j)),s.$on("change",r[16]);function V(F){r[25](F)}let C={tabs:r[5],$$slots:{content:[Im,({tab:F})=>({26:F}),({tab:F})=>F?67108864:0],default:[km,({tab:F})=>({26:F}),({tab:F})=>F?67108864:0]},$$scope:{ctx:r}};return r[2]!==void 0&&(C.activeTab=r[2]),p=new Ws({props:C}),_e.push(()=>ge(p,"activeTab",V)),{c(){e=J("article"),P(t.$$.fragment),i=se(),P(s.$$.fragment),c=se(),h=J("textarea"),m=se(),P(p.$$.fragment),this.h()},l(F){e=Q(F,"ARTICLE",{});var b=ne(e);B(t.$$.fragment,b),i=oe(b),B(s.$$.fragment,b),c=oe(b),h=Q(b,"TEXTAREA",{style:!0,rows:!0,class:!0}),ne(h).forEach(S),m=oe(b),B(p.$$.fragment,b),b.forEach(S),this.h()},h(){lt(h,"width","100%"),lt(h,"max-width","100%"),lt(h,"min-width","100%"),x(h,"rows","6"),x(h,"class","svelte-s55el5")},m(F,b){O(F,e,b),M(t,e,null),H(e,i),M(s,e,null),H(e,c),H(e,h),At(h,r[1]),H(e,m),M(p,e,null),_=!0,g||($=[Ie(h,"input",r[17]),Ie(h,"change",r[8])],g=!0)},p(F,[b]){const K={};b&16&&(K.items=[F[6],...F[4].map(ts)]),b&402653184&&(K.$$scope={dirty:b,ctx:F}),!n&&b&8&&(n=!0,K.value=F[3],be(()=>n=!1)),t.$set(K);const pe={};!o&&b&1&&(o=!0,pe.font=F[0].font,be(()=>o=!1)),!a&&b&1&&(a=!0,pe.textCase=F[0].case,be(()=>a=!1)),!l&&b&1&&(l=!0,pe.align=F[0].align,be(()=>l=!1)),!u&&b&1&&(u=!0,pe.baseline=F[0].baseline,be(()=>u=!1)),!f&&b&1&&(f=!0,pe.spacing=F[0].lineSpacing,be(()=>f=!1)),s.$set(pe),b&2&&At(h,F[1]);const W={};b&335544321&&(W.$$scope={dirty:b,ctx:F}),!d&&b&4&&(d=!0,W.activeTab=F[2],be(()=>d=!1)),p.$set(W)},i(F){_||(y(t.$$.fragment,F),y(s.$$.fragment,F),y(p.$$.fragment,F),_=!0)},o(F){k(t.$$.fragment,F),k(s.$$.fragment,F),k(p.$$.fragment,F),_=!1},d(F){F&&S(e),z(t),z(s),z(p),g=!1,pt($)}}}const Rm="M6.192 2.78c-.458-.677-.927-1.248-1.35-1.643a2.972 2.972 0 0 0-.71-.515c-.217-.104-.56-.205-.882-.02-.367.213-.427.63-.43.896-.003.304.064.664.173 1.044.196.687.556 1.528 1.035 2.402L.752 8.22c-.277.277-.269.656-.218.918.055.283.187.593.36.903.348.627.92 1.361 1.626 2.068.707.707 1.441 1.278 2.068 1.626.31.173.62.305.903.36.262.05.64.059.918-.218l5.615-5.615c.118.257.092.512.05.939-.03.292-.068.665-.073 1.176v.123h.003a1 1 0 0 0 1.993 0H14v-.057a1.01 1.01 0 0 0-.004-.117c-.055-1.25-.7-2.738-1.86-3.494a4.322 4.322 0 0 0-.211-.434c-.349-.626-.92-1.36-1.627-2.067-.707-.707-1.441-1.279-2.068-1.627-.31-.172-.62-.304-.903-.36-.262-.05-.64-.058-.918.219l-.217.216zM4.16 1.867c.381.356.844.922 1.311 1.632l-.704.705c-.382-.727-.66-1.402-.813-1.938a3.283 3.283 0 0 1-.131-.673c.091.061.204.15.337.274zm.394 3.965c.54.852 1.107 1.567 1.607 2.033a.5.5 0 1 0 .682-.732c-.453-.422-1.017-1.136-1.564-2.027l1.088-1.088c.054.12.115.243.183.365.349.627.92 1.361 1.627 2.068.706.707 1.44 1.278 2.068 1.626.122.068.244.13.365.183l-4.861 4.862a.571.571 0 0 1-.068-.01c-.137-.027-.342-.104-.608-.252-.524-.292-1.186-.8-1.846-1.46-.66-.66-1.168-1.32-1.46-1.846-.147-.265-.225-.47-.251-.607a.573.573 0 0 1-.01-.068l3.048-3.047zm2.87-1.935a2.44 2.44 0 0 1-.241-.561c.135.033.324.11.562.241.524.292 1.186.8 1.846 1.46.45.45.83.901 1.118 1.31a3.497 3.497 0 0 0-1.066.091 11.27 11.27 0 0 1-.76-.694c-.66-.66-1.167-1.322-1.458-1.847z",ts=r=>({name:r.name,preset:r});function Fm(r,e,t){let n;Tt(r,xh,F=>t(4,n=F));let{style:i}=e,{text:s}=e,o=[{icon:"fill",label:"Заливка"},{icon:"stroke",label:"Обводка"}],a=o[0];const l={name:"Выбрать пресет...",preset:null};let u=l;function f(F){const b=F.detail.value.preset;b&&(t(0,i=Dh(b,i)),t(3,u=l))}function c(F){Ae.call(this,r,F)}function h(F){u=F,t(3,u)}function m(F){Ae.call(this,r,F)}function p(F){r.$$.not_equal(i.font,F)&&(i.font=F,t(0,i))}function d(F){r.$$.not_equal(i.case,F)&&(i.case=F,t(0,i))}function _(F){r.$$.not_equal(i.align,F)&&(i.align=F,t(0,i))}function g(F){r.$$.not_equal(i.baseline,F)&&(i.baseline=F,t(0,i))}function $(F){r.$$.not_equal(i.lineSpacing,F)&&(i.lineSpacing=F,t(0,i))}function A(F){Ae.call(this,r,F)}function w(){s=this.value,t(1,s)}function R(F){r.$$.not_equal(i.fill,F)&&(i.fill=F,t(0,i))}function I(F){Ae.call(this,r,F)}function U(F){Ae.call(this,r,F)}function q(F){r.$$.not_equal(i.strokeWidth,F)&&(i.strokeWidth=F,t(0,i))}function j(F){r.$$.not_equal(i.stroke,F)&&(i.stroke=F,t(0,i))}function L(F){Ae.call(this,r,F)}function V(F){Ae.call(this,r,F)}function C(F){a=F,t(2,a)}return r.$$set=F=>{"style"in F&&t(0,i=F.style),"text"in F&&t(1,s=F.text)},[i,s,a,u,n,o,l,f,c,h,m,p,d,_,g,$,A,w,R,I,U,q,j,L,V,C]}class Nm extends we{constructor(e){super(),ye(this,e,Fm,Cm,$e,{style:0,text:1})}}function Pm(r){let e,t,n,i;function s(l){r[1](l)}function o(l){r[2](l)}let a={};return r[0].text!==void 0&&(a.text=r[0].text),r[0].style!==void 0&&(a.style=r[0].style),e=new Nm({props:a}),_e.push(()=>ge(e,"text",s)),_e.push(()=>ge(e,"style",o)),e.$on("change",r[3]),e.$on("addPattern",r[4]),{c(){P(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,u){M(e,l,u),i=!0},p(l,[u]){const f={};!t&&u&1&&(t=!0,f.text=l[0].text,be(()=>t=!1)),!n&&u&1&&(n=!0,f.style=l[0].style,be(()=>n=!1)),e.$set(f)},i(l){i||(y(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){z(e,l)}}}function Bm(r,e,t){let{content:n}=e;function i(l){r.$$.not_equal(n.text,l)&&(n.text=l,t(0,n))}function s(l){r.$$.not_equal(n.style,l)&&(n.style=l,t(0,n))}function o(l){Ae.call(this,r,l)}function a(l){Ae.call(this,r,l)}return r.$$set=l=>{"content"in l&&t(0,n=l.content)},[n,i,s,o,a]}class Mm extends we{constructor(e){super(),ye(this,e,Bm,Pm,$e,{content:0})}}function zm(r){let e,t,n=r[0].text+"",i,s,o;const a=r[2].default,l=Ce(a,r,r[1],null);return{c(){e=J("article"),t=J("main"),i=ue(n),s=se(),l&&l.c(),this.h()},l(u){e=Q(u,"ARTICLE",{class:!0});var f=ne(e);t=Q(f,"MAIN",{style:!0,class:!0});var c=ne(t);i=fe(c,n),c.forEach(S),s=oe(f),l&&l.l(f),f.forEach(S),this.h()},h(){lt(t,"font",an(r[0].style.font,16)),x(t,"class","svelte-18odw12"),x(e,"class","svelte-18odw12")},m(u,f){O(u,e,f),H(e,t),H(t,i),H(e,s),l&&l.m(e,null),o=!0},p(u,[f]){(!o||f&1)&&n!==(n=u[0].text+"")&&st(i,n),(!o||f&1)&&lt(t,"font",an(u[0].style.font,16)),l&&l.p&&(!o||f&2)&&Re(l,a,u,u[1],o?Ne(a,u[1],f,null):Fe(u[1]),null)},i(u){o||(y(l,u),o=!0)},o(u){k(l,u),o=!1},d(u){u&&S(e),l&&l.d(u)}}}function Um(r,e,t){let{$$slots:n={},$$scope:i}=e,{content:s}=e;return r.$$set=o=>{"content"in o&&t(0,s=o.content),"$$scope"in o&&t(1,i=o.$$scope)},[s,i,n]}class Ys extends we{constructor(e){super(),ye(this,e,Um,zm,$e,{content:0})}}function ns(r){let e,t;return e=new nt({props:{title:"Создать копию",$$slots:{default:[Dm]},$$scope:{ctx:r}}}),e.$on("click",r[5]("copy")),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&272&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Dm(r){let e,t;return e=new Os({props:{size:r[4]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&16&&(s.size=n[4]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function rs(r){let e,t;return e=new nt({props:{title:"Поменять местами с верхним",$$slots:{default:[Lm]},$$scope:{ctx:r}}}),e.$on("click",r[5]("up")),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&272&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Lm(r){let e,t;return e=new ul({props:{size:r[4]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&16&&(s.size=n[4]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function is(r){let e,t;return e=new nt({props:{title:"Поменять местами с нижним",$$slots:{default:[xm]},$$scope:{ctx:r}}}),e.$on("click",r[5]("down")),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&272&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function xm(r){let e,t;return e=new il({props:{size:r[4]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&16&&(s.size=n[4]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function ss(r){let e,t;return e=new nt({props:{title:"Удалить",type:"danger",$$slots:{default:[Om]},$$scope:{ctx:r}}}),e.$on("click",r[5]("remove")),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&272&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Om(r){let e,t;return e=new mf({props:{size:r[4]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&16&&(s.size=n[4]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Gm(r){let e,t,n,i,s,o,a,l=r[2]&&ns(r),u=r[0]&&rs(r),f=r[1]&&is(r);const c=r[7].default,h=Ce(c,r,r[8],null);let m=r[3]&&ss(r);return{c(){e=J("footer"),l&&l.c(),t=se(),u&&u.c(),n=se(),f&&f.c(),i=se(),h&&h.c(),s=se(),m&&m.c(),this.h()},l(p){e=Q(p,"FOOTER",{style:!0,class:!0});var d=ne(e);l&&l.l(d),t=oe(d),u&&u.l(d),n=oe(d),f&&f.l(d),i=oe(d),h&&h.l(d),s=oe(d),m&&m.l(d),d.forEach(S),this.h()},h(){x(e,"style",o=`--buttons-height: ${r[4]+16}px`),x(e,"class","svelte-zcq5oe")},m(p,d){O(p,e,d),l&&l.m(e,null),H(e,t),u&&u.m(e,null),H(e,n),f&&f.m(e,null),H(e,i),h&&h.m(e,null),H(e,s),m&&m.m(e,null),a=!0},p(p,[d]){p[2]?l?(l.p(p,d),d&4&&y(l,1)):(l=ns(p),l.c(),y(l,1),l.m(e,t)):l&&(Ge(),k(l,1,1,()=>{l=null}),He()),p[0]?u?(u.p(p,d),d&1&&y(u,1)):(u=rs(p),u.c(),y(u,1),u.m(e,n)):u&&(Ge(),k(u,1,1,()=>{u=null}),He()),p[1]?f?(f.p(p,d),d&2&&y(f,1)):(f=is(p),f.c(),y(f,1),f.m(e,i)):f&&(Ge(),k(f,1,1,()=>{f=null}),He()),h&&h.p&&(!a||d&256)&&Re(h,c,p,p[8],a?Ne(c,p[8],d,null):Fe(p[8]),null),p[3]?m?(m.p(p,d),d&8&&y(m,1)):(m=ss(p),m.c(),y(m,1),m.m(e,null)):m&&(Ge(),k(m,1,1,()=>{m=null}),He()),(!a||d&16&&o!==(o=`--buttons-height: ${p[4]+16}px`))&&x(e,"style",o)},i(p){a||(y(l),y(u),y(f),y(h,p),y(m),a=!0)},o(p){k(l),k(u),k(f),k(h,p),k(m),a=!1},d(p){p&&S(e),l&&l.d(),u&&u.d(),f&&f.d(),h&&h.d(p),m&&m.d()}}}function Hm(r,e,t){let{$$slots:n={},$$scope:i}=e,{value:s}=e,{up:o=!1}=e,{down:a=!1}=e,{copy:l=!1}=e,{remove:u=!1}=e,{iconSize:f=16}=e;const c=yt();function h(m){return p=>{p.preventDefault(),p.stopPropagation(),c(m,s)}}return r.$$set=m=>{"value"in m&&t(6,s=m.value),"up"in m&&t(0,o=m.up),"down"in m&&t(1,a=m.down),"copy"in m&&t(2,l=m.copy),"remove"in m&&t(3,u=m.remove),"iconSize"in m&&t(4,f=m.iconSize),"$$scope"in m&&t(8,i=m.$$scope)},[o,a,l,u,f,h,s,n,i]}class mr extends we{constructor(e){super(),ye(this,e,Hm,Gm,$e,{value:6,up:0,down:1,copy:2,remove:3,iconSize:4})}}function jm(r){let e,t,n=r[0]+1+"",i,s,o,a,l;const u=r[4].default,f=Ce(u,r,r[3],null);return{c(){e=J("article"),t=J("header"),i=ue(n),s=se(),o=J("canvas"),a=se(),f&&f.c(),this.h()},l(c){e=Q(c,"ARTICLE",{class:!0});var h=ne(e);t=Q(h,"HEADER",{class:!0});var m=ne(t);i=fe(m,n),m.forEach(S),s=oe(h),o=Q(h,"CANVAS",{class:!0}),ne(o).forEach(S),a=oe(h),f&&f.l(h),h.forEach(S),this.h()},h(){x(t,"class","svelte-awjzj9"),x(o,"class","svelte-awjzj9"),x(e,"class","svelte-awjzj9")},m(c,h){O(c,e,h),H(e,t),H(t,i),H(e,s),H(e,o),r[5](o),H(e,a),f&&f.m(e,null),l=!0},p(c,[h]){(!l||h&1)&&n!==(n=c[0]+1+"")&&st(i,n),f&&f.p&&(!l||h&8)&&Re(f,u,c,c[3],l?Ne(u,c[3],h,null):Fe(c[3]),null)},i(c){l||(y(f,c),l=!0)},o(c){k(f,c),l=!1},d(c){c&&S(e),r[5](null),f&&f.d(c)}}}function Wm(r,e,t){let{$$slots:n={},$$scope:i}=e,s,o,{index:a}=e;const l=f=>{const c=s.clientWidth,m=c/f.width*f.height|0;s.width!=c&&t(1,s.width=c,s),s.height!=m&&t(1,s.height=m,s),o.clearRect(0,0,c,m),o.drawImage(f,0,0,c,m)};wn(()=>{o=s.getContext("2d")});function u(f){_e[f?"unshift":"push"](()=>{s=f,t(1,s)})}return r.$$set=f=>{"index"in f&&t(0,a=f.index),"$$scope"in f&&t(3,i=f.$$scope)},[a,s,l,i,n,u]}class Vm extends we{constructor(e){super(),ye(this,e,Wm,jm,$e,{index:0,updatePreview:2})}get updatePreview(){return this.$$.ctx[2]}}function qm(r){let e;return{c(){e=ue("Что-то пошло не так...")},l(t){e=fe(t,"Что-то пошло не так...")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Zm(r){let e;return{c(){e=ue("Прямоугольник")},l(t){e=fe(t,"Прямоугольник")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Xm(r){let e;return{c(){e=ue("Фиксированный")},l(t){e=fe(t,"Фиксированный")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Km(r){let e;function t(s,o){return s[13]=="global"?Xm:s[13]=="rectangle"?Zm:qm}let n=t(r),i=n(r);return{c(){i.c(),e=De()},l(s){i.l(s),e=De()},m(s,o){i.m(s,o),O(s,e,o)},p(s,o){n!==(n=t(s))&&(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&S(e)}}}function Ym(r){let e,t;return e=new Xt({props:{$$slots:{default:[nd]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&16385&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Jm(r){let e,t;return e=new Xt({props:{$$slots:{default:[ad]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&16385&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Qm(r){let e,t,n;return t=new rt({props:{min:0,max:100,step:.5,withRange:!0,value:r[0].value.maxWidth*100}}),t.$on("input",r[10]),{c(){e=ue("Максимальная ширина (%): "),P(t.$$.fragment)},l(i){e=fe(i,"Максимальная ширина (%): "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=i[0].value.maxWidth*100),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function ed(r){let e,t,n;return t=new rt({props:{min:0,max:100,step:.5,withRange:!0,value:r[0].value.maxHeight*100}}),t.$on("input",r[11]),{c(){e=ue("Максимальная высота (%): "),P(t.$$.fragment)},l(i){e=fe(i,"Максимальная высота (%): "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=i[0].value.maxHeight*100),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function td(r){let e,t,n;return t=new rt({props:{min:0,max:100,step:.5,withRange:!0,value:r[0].value.minHeight*100}}),t.$on("input",r[12]),{c(){e=ue("Минимальная высота (%): "),P(t.$$.fragment)},l(i){e=fe(i,"Минимальная высота (%): "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=i[0].value.minHeight*100),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function nd(r){let e,t,n,i,s,o;return e=new Xe({props:{$$slots:{default:[Qm]},$$scope:{ctx:r}}}),n=new Xe({props:{$$slots:{default:[ed]},$$scope:{ctx:r}}}),s=new Xe({props:{$$slots:{default:[td]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),P(s.$$.fragment)},l(a){B(e.$$.fragment,a),t=oe(a),B(n.$$.fragment,a),i=oe(a),B(s.$$.fragment,a)},m(a,l){M(e,a,l),O(a,t,l),M(n,a,l),O(a,i,l),M(s,a,l),o=!0},p(a,l){const u={};l&16385&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const f={};l&16385&&(f.$$scope={dirty:l,ctx:a}),n.$set(f);const c={};l&16385&&(c.$$scope={dirty:l,ctx:a}),s.$set(c)},i(a){o||(y(e.$$.fragment,a),y(n.$$.fragment,a),y(s.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(n.$$.fragment,a),k(s.$$.fragment,a),o=!1},d(a){z(e,a),a&&S(t),z(n,a),a&&S(i),z(s,a)}}}function rd(r){let e,t,n,i;function s(a){r[6](a)}let o={};return r[0].value.position!==void 0&&(o.value=r[0].value.position),t=new yn({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue("Позиция "),P(t.$$.fragment)},l(a){e=fe(a,"Позиция "),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].value.position,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function id(r){let e,t,n,i;function s(a){r[7](a)}let o={};return r[0].value.width!==void 0&&(o.value=r[0].value.width),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue("Ширина "),P(t.$$.fragment)},l(a){e=fe(a,"Ширина "),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].value.width,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function sd(r){let e,t,n,i;function s(a){r[8](a)}let o={};return r[0].value.height!==void 0&&(o.value=r[0].value.height),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue("Высота "),P(t.$$.fragment)},l(a){e=fe(a,"Высота "),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].value.height,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function od(r){let e,t,n;return t=new rt({props:{withRange:!0,rangeMin:-359,rangeMax:359,step:1,value:Math.round(r[0].value.rotation/Math.PI*180)}}),t.$on("input",r[9]),{c(){e=ue("Поворот "),P(t.$$.fragment)},l(i){e=fe(i,"Поворот "),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=Math.round(i[0].value.rotation/Math.PI*180)),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function ad(r){let e,t,n,i,s,o,a,l;return e=new Xe({props:{$$slots:{default:[rd]},$$scope:{ctx:r}}}),n=new Xe({props:{$$slots:{default:[id]},$$scope:{ctx:r}}}),s=new Xe({props:{$$slots:{default:[sd]},$$scope:{ctx:r}}}),a=new Xe({props:{$$slots:{default:[od]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),P(s.$$.fragment),o=se(),P(a.$$.fragment)},l(u){B(e.$$.fragment,u),t=oe(u),B(n.$$.fragment,u),i=oe(u),B(s.$$.fragment,u),o=oe(u),B(a.$$.fragment,u)},m(u,f){M(e,u,f),O(u,t,f),M(n,u,f),O(u,i,f),M(s,u,f),O(u,o,f),M(a,u,f),l=!0},p(u,f){const c={};f&16385&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const h={};f&16385&&(h.$$scope={dirty:f,ctx:u}),n.$set(h);const m={};f&16385&&(m.$$scope={dirty:f,ctx:u}),s.$set(m);const p={};f&16385&&(p.$$scope={dirty:f,ctx:u}),a.$set(p)},i(u){l||(y(e.$$.fragment,u),y(n.$$.fragment,u),y(s.$$.fragment,u),y(a.$$.fragment,u),l=!0)},o(u){k(e.$$.fragment,u),k(n.$$.fragment,u),k(s.$$.fragment,u),k(a.$$.fragment,u),l=!1},d(u){z(e,u),u&&S(t),z(n,u),u&&S(i),z(s,u),u&&S(o),z(a,u)}}}function ld(r){let e,t,n,i,s,o;t=new Pt({props:{value:r[0].type,items:r[2],$$slots:{default:[Km,({item:f})=>({13:f}),({item:f})=>f?8192:0]},$$scope:{ctx:r}}}),t.$on("change",r[5]);const a=[Jm,Ym],l=[];function u(f,c){return f[0].type=="rectangle"?0:f[0].type=="global"?1:-1}return~(i=u(r))&&(s=l[i]=a[i](r)),{c(){e=J("article"),P(t.$$.fragment),n=se(),s&&s.c()},l(f){e=Q(f,"ARTICLE",{});var c=ne(e);B(t.$$.fragment,c),n=oe(c),s&&s.l(c),c.forEach(S)},m(f,c){O(f,e,c),M(t,e,null),H(e,n),~i&&l[i].m(e,null),o=!0},p(f,[c]){const h={};c&1&&(h.value=f[0].type),c&24576&&(h.$$scope={dirty:c,ctx:f}),t.$set(h);let m=i;i=u(f),i===m?~i&&l[i].p(f,c):(s&&(Ge(),k(l[m],1,1,()=>{l[m]=null}),He()),~i?(s=l[i],s?s.p(f,c):(s=l[i]=a[i](f),s.c()),y(s,1),s.m(e,null)):s=null)},i(f){o||(y(t.$$.fragment,f),y(s),o=!0)},o(f){k(t.$$.fragment,f),k(s),o=!1},d(f){f&&S(e),z(t),~i&&l[i].d()}}}function ud(r,e,t){let{container:n}=e,{frameWidth:i}=e,{frameHeight:s}=e;function o(_){if(_=="global"){t(0,n.value={maxWidth:.95,maxHeight:.4,minHeight:.1},n),t(0,n.type="global",n);return}t(0,n.value={width:i/2,height:s/2,position:{x:i/2,y:s/2},rotation:0},n),t(0,n.type="rectangle",n)}const a=["global","rectangle"],l=_=>o(_.detail.value);function u(_){r.$$.not_equal(n.value.position,_)&&(n.value.position=_,t(0,n))}function f(_){r.$$.not_equal(n.value.width,_)&&(n.value.width=_,t(0,n))}function c(_){r.$$.not_equal(n.value.height,_)&&(n.value.height=_,t(0,n))}const h=_=>{n.type==="rectangle"&&t(0,n.value.rotation=_.detail%360/180*Math.PI,n)},m=_=>{n.type==="global"&&t(0,n.value.maxWidth=_.detail/100,n)},p=_=>{n.type==="global"&&t(0,n.value.maxHeight=_.detail/100,n)},d=_=>{n.type==="global"&&t(0,n.value.minHeight=_.detail/100,n)};return r.$$set=_=>{"container"in _&&t(0,n=_.container),"frameWidth"in _&&t(3,i=_.frameWidth),"frameHeight"in _&&t(4,s=_.frameHeight)},[n,o,a,i,s,l,u,f,c,h,m,p,d]}class fd extends we{constructor(e){super(),ye(this,e,ud,ld,$e,{container:0,frameWidth:3,frameHeight:4})}}function cd(r){let e=r[5]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,i){O(n,t,i)},p(n,i){i&32&&e!==(e=n[5]+"")&&st(t,e)},i:je,o:je,d(n){n&&S(t)}}}function hd(r){let e,t;return e=new lf({props:{size:r[2]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&4&&(s.size=n[2]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function md(r){let e,t;return e=new nf({props:{size:r[2]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&4&&(s.size=n[2]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function dd(r){let e,t;return e=new vl({props:{size:r[2]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&4&&(s.size=n[2]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function pd(r){let e,t;return e=new kl({props:{size:r[2]}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i&4&&(s.size=n[2]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function _d(r){let e,t,n,i;const s=[pd,dd,md,hd,cd],o=[];function a(l,u){return l[5]=="Top"?0:l[5]=="Bottom"?1:l[5]=="Free"?2:l[5]=="Custom"?3:4}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),n=De()},l(l){t.l(l),n=De()},m(l,u){o[e].m(l,u),O(l,n,u),i=!0},p(l,u){let f=e;e=a(l),e===f?o[e].p(l,u):(Ge(),k(o[f],1,1,()=>{o[f]=null}),He(),t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(n.parentNode,n))},i(l){i||(y(t),i=!0)},o(l){k(t),i=!1},d(l){o[e].d(l),l&&S(n)}}}function gd(r){let e,t;return e=new Pt({props:{css:{height:`${r[2]+16}px`,width:"100%",main:"flex:1;"},items:["Top","Bottom","Free","Custom"],placeholder:"Custom",value:r[0].type=="rectangle"&&r[1].baseline=="middle"?"Free":r[0].type=="global"&&r[1].baseline=="top"?"Top":r[0].type=="global"&&r[1].baseline=="bottom"?"Bottom":"Custom",$$slots:{default:[_d,({item:n})=>({5:n}),({item:n})=>n?32:0]},$$scope:{ctx:r}}}),e.$on("change",r[3]),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&4&&(s.css={height:`${n[2]+16}px`,width:"100%",main:"flex:1;"}),i&3&&(s.value=n[0].type=="rectangle"&&n[1].baseline=="middle"?"Free":n[0].type=="global"&&n[1].baseline=="top"?"Top":n[0].type=="global"&&n[1].baseline=="bottom"?"Bottom":"Custom"),i&100&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function bd(r,e,t){let{container:n}=e,{style:i}=e,{frame:s}=e,{iconSize:o=16}=e;function a(l){switch(l.detail.value){case"Top":{n.type!=="global"&&t(0,n.value={maxWidth:.95,maxHeight:.4,minHeight:.1},n),t(0,n.type="global",n),t(1,i.baseline="top",i);break}case"Bottom":{n.type!=="global"&&t(0,n.value={maxWidth:.95,maxHeight:.4,minHeight:.1},n),t(0,n.type="global",n),t(1,i.baseline="bottom",i);break}case"Free":{t(0,n.value={width:s.width/2,height:s.height/2,position:{x:s.width/2,y:s.height/2},rotation:0},n),t(0,n.type="rectangle",n),t(1,i.baseline="middle",i);break}}}return r.$$set=l=>{"container"in l&&t(0,n=l.container),"style"in l&&t(1,i=l.style),"frame"in l&&t(4,s=l.frame),"iconSize"in l&&t(2,o=l.iconSize)},[n,i,o,a,s]}class vd extends we{constructor(e){super(),ye(this,e,bd,gd,$e,{container:0,style:1,frame:4,iconSize:2})}}function $d(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_,g,$,A,w,R;return{c(){e=J("p"),t=ue(`Мемейкер – редактор мемов прямо в браузере. В первую очередь он разрабатывался как простое
			средство наложения текста с обводкой на картинку. С его помощью можно быстро создать типичный
			мем с импактом и обводкой, обыграть постиронию лобстером с тенью или набросать
			многокартиночный мем, не мучаясь со слоями или кучей разных файлов в графическом редакторе.`),n=se(),i=J("p"),s=ue("Стабильная версия доступна по адресу "),o=J("a"),a=ue("https://robolabgs2.github.io/memaker/"),l=ue(`
			Самая же свежая версия доступна здесь:
			`),u=J("a"),f=ue("https://robolabgs2.github.io/memaker-prerelease/"),c=ue(`. Нулевая версия редактора увидела свет 24 августа 2022 года, с тех пор редактор
			разрабатывается одним человеком в свободное время. Пожаловаться на баги или запросить фичу
			можно в обсуждениях
			`),h=J("a"),m=ue("в группе ВК"),p=ue(`
			или через issue
			`),d=J("a"),_=ue("на гитхабе"),g=ue("."),$=se(),A=J("p"),w=ue("Версия: "),R=ue(r[0]),this.h()},l(I){e=Q(I,"P",{class:!0});var U=ne(e);t=fe(U,`Мемейкер – редактор мемов прямо в браузере. В первую очередь он разрабатывался как простое
			средство наложения текста с обводкой на картинку. С его помощью можно быстро создать типичный
			мем с импактом и обводкой, обыграть постиронию лобстером с тенью или набросать
			многокартиночный мем, не мучаясь со слоями или кучей разных файлов в графическом редакторе.`),U.forEach(S),n=oe(I),i=Q(I,"P",{class:!0});var q=ne(i);s=fe(q,"Стабильная версия доступна по адресу "),o=Q(q,"A",{href:!0,target:!0,rel:!0,title:!0,class:!0});var j=ne(o);a=fe(j,"https://robolabgs2.github.io/memaker/"),j.forEach(S),l=fe(q,`
			Самая же свежая версия доступна здесь:
			`),u=Q(q,"A",{href:!0,target:!0,rel:!0,title:!0,class:!0});var L=ne(u);f=fe(L,"https://robolabgs2.github.io/memaker-prerelease/"),L.forEach(S),c=fe(q,`. Нулевая версия редактора увидела свет 24 августа 2022 года, с тех пор редактор
			разрабатывается одним человеком в свободное время. Пожаловаться на баги или запросить фичу
			можно в обсуждениях
			`),h=Q(q,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var V=ne(h);m=fe(V,"в группе ВК"),V.forEach(S),p=fe(q,`
			или через issue
			`),d=Q(q,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var C=ne(d);_=fe(C,"на гитхабе"),C.forEach(S),g=fe(q,"."),q.forEach(S),$=oe(I),A=Q(I,"P",{class:!0});var F=ne(A);w=fe(F,"Версия: "),R=fe(F,r[0]),F.forEach(S),this.h()},h(){x(e,"class","svelte-wybq5i"),x(o,"href","https://robolabgs2.github.io/memaker/"),x(o,"target","_blank"),x(o,"rel","noreferrer"),x(o,"title","Стабильная версия"),x(o,"class","svelte-wybq5i"),x(u,"href","https://robolabgs2.github.io/memaker-prerelease/"),x(u,"target","_blank"),x(u,"rel","noreferrer"),x(u,"title","Последняя версия"),x(u,"class","svelte-wybq5i"),x(h,"target","_blank"),x(h,"rel","noreferrer"),x(h,"title","Группа ВК"),x(h,"href","https://vk.com/memaker_app"),x(h,"class","svelte-wybq5i"),x(d,"target","_blank"),x(d,"rel","noreferrer"),x(d,"title","GitHub репозиторий"),x(d,"href","https://github.com/RobolabGs2/memaker"),x(d,"class","svelte-wybq5i"),x(i,"class","svelte-wybq5i"),x(A,"class","svelte-wybq5i")},m(I,U){O(I,e,U),H(e,t),O(I,n,U),O(I,i,U),H(i,s),H(i,o),H(o,a),H(i,l),H(i,u),H(u,f),H(i,c),H(i,h),H(h,m),H(i,p),H(i,d),H(d,_),H(i,g),O(I,$,U),O(I,A,U),H(A,w),H(A,R)},p(I,U){U&1&&st(R,I[0])},d(I){I&&S(e),I&&S(n),I&&S(i),I&&S($),I&&S(A)}}}function wd(r){let e;return{c(){e=ue("О проекте")},l(t){e=fe(t,"О проекте")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function yd(r){let e,t,n,i,s;return{c(){e=J("p"),t=ue("Скоро changelog будет доступен здесь, но пока его можно посмотреть на "),n=J("a"),i=ue("GitHub"),s=ue("."),this.h()},l(o){e=Q(o,"P",{class:!0});var a=ne(e);t=fe(a,"Скоро changelog будет доступен здесь, но пока его можно посмотреть на "),n=Q(a,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var l=ne(n);i=fe(l,"GitHub"),l.forEach(S),s=fe(a,"."),a.forEach(S),this.h()},h(){x(n,"target","_blank"),x(n,"rel","noreferrer"),x(n,"title","Changelog"),x(n,"href","https://github.com/RobolabGs2/memaker/blob/main/CHANGELOG.md"),x(n,"class","svelte-wybq5i"),x(e,"class","svelte-wybq5i")},m(o,a){O(o,e,a),H(e,t),H(e,n),H(n,i),H(e,s)},p:je,d(o){o&&S(e)}}}function Ed(r){let e;return{c(){e=ue("История версий")},l(t){e=fe(t,"История версий")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function kd(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_,g,$,A,w,R,I,U,q,j,L,V,C,F;function b(he){r[4](he)}let K={$$slots:{title:[wd],default:[$d]},$$scope:{ctx:r}};r[1]!==void 0&&(K.open=r[1]),t=new bn({props:K}),_e.push(()=>ge(t,"open",b));function pe(he){r[5](he)}let W={$$slots:{title:[Ed],default:[yd]},$$scope:{ctx:r}};return r[2]!==void 0&&(W.open=r[2]),s=new bn({props:W}),_e.push(()=>ge(s,"open",pe)),p=new iu({props:{size:Sn}}),g=new uu({props:{size:Sn}}),w=new du({props:{size:Sn}}),U=new Cl({props:{size:Sn}}),L=new Ll({props:{size:Sn}}),{c(){e=J("main"),P(t.$$.fragment),i=se(),P(s.$$.fragment),a=se(),l=J("header"),u=ue("Memaker "),f=ue(r[0]),c=se(),h=J("section"),m=J("div"),P(p.$$.fragment),d=se(),_=J("div"),P(g.$$.fragment),$=se(),A=J("div"),P(w.$$.fragment),R=se(),I=J("a"),P(U.$$.fragment),q=se(),j=J("a"),P(L.$$.fragment),this.h()},l(he){e=Q(he,"MAIN",{class:!0});var re=ne(e);B(t.$$.fragment,re),i=oe(re),B(s.$$.fragment,re),a=oe(re),l=Q(re,"HEADER",{class:!0});var Ee=ne(l);u=fe(Ee,"Memaker "),f=fe(Ee,r[0]),Ee.forEach(S),c=oe(re),h=Q(re,"SECTION",{class:!0});var X=ne(h);m=Q(X,"DIV",{title:!0,class:!0});var Z=ne(m);B(p.$$.fragment,Z),Z.forEach(S),d=oe(X),_=Q(X,"DIV",{title:!0,class:!0});var ee=ne(_);B(g.$$.fragment,ee),ee.forEach(S),$=oe(X),A=Q(X,"DIV",{title:!0,class:!0});var te=ne(A);B(w.$$.fragment,te),te.forEach(S),R=oe(X),I=Q(X,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var me=ne(I);B(U.$$.fragment,me),me.forEach(S),q=oe(X),j=Q(X,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var Le=ne(j);B(L.$$.fragment,Le),Le.forEach(S),X.forEach(S),re.forEach(S),this.h()},h(){x(l,"class","svelte-wybq5i"),x(m,"title","Открыть пример"),x(m,"class","svelte-wybq5i"),x(_,"title","История версий приложения"),x(_,"class","svelte-wybq5i"),x(A,"title","О проекте"),x(A,"class","svelte-wybq5i"),x(I,"target","_blank"),x(I,"rel","noreferrer"),x(I,"title","GitHub репозиторий"),x(I,"href","https://github.com/RobolabGs2/memaker"),x(I,"class","svelte-wybq5i"),x(j,"target","_blank"),x(j,"rel","noreferrer"),x(j,"title","Группа ВК"),x(j,"href","https://vk.com/memaker_app"),x(j,"class","svelte-wybq5i"),x(h,"class","svelte-wybq5i"),x(e,"class","svelte-wybq5i")},m(he,re){O(he,e,re),M(t,e,null),H(e,i),M(s,e,null),H(e,a),H(e,l),H(l,u),H(l,f),H(e,c),H(e,h),H(h,m),M(p,m,null),H(h,d),H(h,_),M(g,_,null),H(h,$),H(h,A),M(w,A,null),H(h,R),H(h,I),M(U,I,null),H(h,q),H(h,j),M(L,j,null),V=!0,C||(F=[Ie(m,"click",r[6]),Ie(_,"click",r[7]),Ie(A,"click",r[8])],C=!0)},p(he,[re]){const Ee={};re&513&&(Ee.$$scope={dirty:re,ctx:he}),!n&&re&2&&(n=!0,Ee.open=he[1],be(()=>n=!1)),t.$set(Ee);const X={};re&512&&(X.$$scope={dirty:re,ctx:he}),!o&&re&4&&(o=!0,X.open=he[2],be(()=>o=!1)),s.$set(X),(!V||re&1)&&st(f,he[0])},i(he){V||(y(t.$$.fragment,he),y(s.$$.fragment,he),y(p.$$.fragment,he),y(g.$$.fragment,he),y(w.$$.fragment,he),y(U.$$.fragment,he),y(L.$$.fragment,he),V=!0)},o(he){k(t.$$.fragment,he),k(s.$$.fragment,he),k(p.$$.fragment,he),k(g.$$.fragment,he),k(w.$$.fragment,he),k(U.$$.fragment,he),k(L.$$.fragment,he),V=!1},d(he){he&&S(e),z(t),z(s),z(p),z(g),z(w),z(U),z(L),C=!1,pt(F)}}}let Sn=24;function Ad(r,e,t){let{version:n}=e;const i=yt();let s=!1,o=!1;function a(h){s=h,t(1,s)}function l(h){o=h,t(2,o)}const u=()=>i("openExample"),f=()=>t(2,o=!0),c=()=>t(1,s=!0);return r.$$set=h=>{"version"in h&&t(0,n=h.version)},[n,s,o,i,a,l,u,f,c]}class Sd extends we{constructor(e){super(),ye(this,e,Ad,kd,$e,{version:0})}}var Yr=(r=>(r[r.RADIAN=0]="RADIAN",r[r.DEGREE=1]="DEGREE",r))(Yr||{}),wt=(r=>(r[r.NUMBER=0]="NUMBER",r[r.RANGE=1]="RANGE",r))(wt||{});function Js(r,e,t){if(r==="point"){const n=e,{x:i,y:s}=n.value;switch(n.type){case"absolute":return{x:i,y:s};case"frame":return{x:Math.round(t.frame.width*i),y:Math.round(t.frame.height*s)};default:throw new Error(`Unexpected type of default point for uniform input: ${n.type}`)}}return structuredClone(e)}function os(r){let e,t;return{c(){e=J("div"),this.h()},l(n){e=Q(n,"DIV",{style:!0,class:!0}),ne(e).forEach(S),this.h()},h(){x(e,"style",t=`width:10px;height:10px;background-color:${r[1].input.color};`),x(e,"class","svelte-1712msg")},m(n,i){O(n,e,i)},p(n,i){i&2&&t!==(t=`width:10px;height:10px;background-color:${n[1].input.color};`)&&x(e,"style",t)},d(n){n&&S(e)}}}function Td(r){let e,t,n;function i(o){r[8](o)}let s={};return r[0][r[2]]!==void 0&&(s.value=r[0][r[2]]),e=new yn({props:s}),_e.push(()=>ge(e,"value",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};!t&&a&5&&(t=!0,l.value=o[0][o[2]],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Id(r){let e,t,n;function i(o){r[7](o)}let s={};return r[0][r[2]]!==void 0&&(s.value=r[0][r[2]]),e=new ln({props:s}),_e.push(()=>ge(e,"value",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};!t&&a&5&&(t=!0,l.value=o[0][o[2]],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Cd(r){let e,t,n;function i(o){r[6](o)}let s={min:r[1].input.min??-1/0,max:r[1].input.max??1/0,step:r[1].input.step??.5};return r[0][r[2]]!==void 0&&(s.value=r[0][r[2]]),e=new rt({props:s}),_e.push(()=>ge(e,"value",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a&2&&(l.min=o[1].input.min??-1/0),a&2&&(l.max=o[1].input.max??1/0),a&2&&(l.step=o[1].input.step??.5),!t&&a&5&&(t=!0,l.value=o[0][o[2]],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Rd(r){let e,t,n;function i(o){r[5](o)}let s={min:r[1].input.min??Number.MIN_SAFE_INTEGER,max:r[1].input.max??Number.MAX_SAFE_INTEGER,step:r[1].input.step??1,withRange:r[1].input.layout==wt.RANGE};return r[0][r[2]]!==void 0&&(s.value=r[0][r[2]]),e=new rt({props:s}),_e.push(()=>ge(e,"value",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a&2&&(l.min=o[1].input.min??Number.MIN_SAFE_INTEGER),a&2&&(l.max=o[1].input.max??Number.MAX_SAFE_INTEGER),a&2&&(l.step=o[1].input.step??1),a&2&&(l.withRange=o[1].input.layout==wt.RANGE),!t&&a&5&&(t=!0,l.value=o[0][o[2]],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Fd(r){let e,t,n;function i(o){r[4](o)}let s={min:r[1].input.min??-1/0,max:r[1].input.max??1/0,step:r[1].input.step??.1,withRange:r[1].input.layout==wt.RANGE};return r[0][r[2]]!==void 0&&(s.value=r[0][r[2]]),e=new rt({props:s}),_e.push(()=>ge(e,"value",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a&2&&(l.min=o[1].input.min??-1/0),a&2&&(l.max=o[1].input.max??1/0),a&2&&(l.step=o[1].input.step??.1),a&2&&(l.withRange=o[1].input.layout==wt.RANGE),!t&&a&5&&(t=!0,l.value=o[0][o[2]],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Nd(r){let e,t,n=r[1].title+"",i,s,o,a,l,u,f,c=r[1].input.type=="point"&&os(r);const h=[Fd,Rd,Cd,Id,Td],m=[];function p(d,_){return d[1].input.type=="float"?0:d[1].input.type=="int"?1:d[1].input.type=="angle"?2:d[1].input.type=="color"?3:d[1].input.type=="point"?4:-1}return~(a=p(r))&&(l=m[a]=h[a](r)),{c(){e=J("span"),c&&c.c(),t=se(),i=ue(n),o=se(),l&&l.c(),u=De(),this.h()},l(d){e=Q(d,"SPAN",{title:!0,class:!0});var _=ne(e);c&&c.l(_),t=oe(_),i=fe(_,n),_.forEach(S),o=oe(d),l&&l.l(d),u=De(),this.h()},h(){x(e,"title",s=r[1].description),x(e,"class","svelte-1712msg")},m(d,_){O(d,e,_),c&&c.m(e,null),H(e,t),H(e,i),O(d,o,_),~a&&m[a].m(d,_),O(d,u,_),f=!0},p(d,_){d[1].input.type=="point"?c?c.p(d,_):(c=os(d),c.c(),c.m(e,t)):c&&(c.d(1),c=null),(!f||_&2)&&n!==(n=d[1].title+"")&&st(i,n),(!f||_&2&&s!==(s=d[1].description))&&x(e,"title",s);let g=a;a=p(d),a===g?~a&&m[a].p(d,_):(l&&(Ge(),k(m[g],1,1,()=>{m[g]=null}),He()),~a?(l=m[a],l?l.p(d,_):(l=m[a]=h[a](d),l.c()),y(l,1),l.m(u.parentNode,u)):l=null)},i(d){f||(y(l),f=!0)},o(d){k(l),f=!1},d(d){d&&S(e),c&&c.d(),d&&S(o),~a&&m[a].d(d),d&&S(u)}}}function Pd(r){let e,t;return e=new Xe({props:{$$slots:{default:[Nd]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&519&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Bd(r,e,t){let{desc:n}=e,{value:i}=e,{name:s}=e,{context:o}=e;function a(h){r.$$.not_equal(i[s],h)&&(i[s]=h,t(0,i),t(2,s),t(1,n),t(3,o))}function l(h){r.$$.not_equal(i[s],h)&&(i[s]=h,t(0,i),t(2,s),t(1,n),t(3,o))}function u(h){r.$$.not_equal(i[s],h)&&(i[s]=h,t(0,i),t(2,s),t(1,n),t(3,o))}function f(h){r.$$.not_equal(i[s],h)&&(i[s]=h,t(0,i),t(2,s),t(1,n),t(3,o))}function c(h){r.$$.not_equal(i[s],h)&&(i[s]=h,t(0,i),t(2,s),t(1,n),t(3,o))}return r.$$set=h=>{"desc"in h&&t(1,n=h.desc),"value"in h&&t(0,i=h.value),"name"in h&&t(2,s=h.name),"context"in h&&t(3,o=h.context)},r.$$.update=()=>{r.$$.dirty&15&&i[s]===void 0&&t(0,i[s]=Js(n.input.type,n.default,o),i)},[i,n,s,o,a,l,u,f,c]}class Md extends we{constructor(e){super(),ye(this,e,Bd,Pd,$e,{desc:1,value:0,name:2,context:3})}}function as(r,e,t){const n=r.slice();return n[18]=e[t],n}function Tr(r){const e=r.slice(),t=e[3].value.type;e[16]=t;const n=e[1][e[16]];return e[17]=n,e}function zd(r){var n;let e=(((n=r[1][r[15]])==null?void 0:n.title)||"Добавить эффект")+"",t;return{c(){t=ue(e)},l(i){t=fe(i,e)},m(i,s){O(i,t,s)},p(i,s){var o;s&32770&&e!==(e=(((o=i[1][i[15]])==null?void 0:o.title)||"Добавить эффект")+"")&&st(t,e)},d(i){i&&S(t)}}}function ls(r){let e,t,n;function i(o){r[13](o)}let s={reverse:!0,items:r[0].map(hs),$$slots:{default:[Dd,({item:o})=>({15:o}),({item:o})=>o?32768:0]},$$scope:{ctx:r}};return r[3]!==void 0&&(s.active=r[3]),e=new Ur({props:s}),_e.push(()=>ge(e,"active",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a&1&&(l.items=o[0].map(hs)),a&2129934&&(l.$$scope={dirty:a,ctx:o}),!t&&a&8&&(t=!0,l.active=o[3],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function us(r){let e,t,n=r[17].inputs&&fs(r);return{c(){n&&n.c(),e=De()},l(i){n&&n.l(i),e=De()},m(i,s){n&&n.m(i,s),O(i,e,s),t=!0},p(i,s){i[17].inputs?n?(n.p(i,s),s&10&&y(n,1)):(n=fs(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(Ge(),k(n,1,1,()=>{n=null}),He())},i(i){t||(y(n),t=!0)},o(i){k(n),t=!1},d(i){n&&n.d(i),i&&S(e)}}}function fs(r){let e,t,n,i;return t=new Xt({props:{$$slots:{default:[Ud]},$$scope:{ctx:r}}}),{c(){e=J("div"),P(t.$$.fragment),this.h()},l(s){e=Q(s,"DIV",{class:!0});var o=ne(e);B(t.$$.fragment,o),o.forEach(S),this.h()},h(){x(e,"class","svelte-19bln0u")},m(s,o){O(s,e,o),M(t,e,null),i=!0},p(s,o){const a={};o&2097166&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){i||(y(t.$$.fragment,s),Zt(()=>{n||(n=ht(e,mt,{},!0)),n.run(1)}),i=!0)},o(s){k(t.$$.fragment,s),n||(n=ht(e,mt,{},!1)),n.run(0),i=!1},d(s){s&&S(e),z(t),s&&n&&n.end()}}}function cs(r,e){let t,n,i,s;function o(l){e[12](l)}let a={desc:e[18],name:e[18].name,context:e[2]};return e[3].value.settings!==void 0&&(a.value=e[3].value.settings),n=new Md({props:a}),_e.push(()=>ge(n,"value",o)),{key:r,first:null,c(){t=De(),P(n.$$.fragment),this.h()},l(l){t=De(),B(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,u){O(l,t,u),M(n,l,u),s=!0},p(l,u){e=l;const f={};u&10&&(f.desc=e[18]),u&10&&(f.name=e[18].name),u&4&&(f.context=e[2]),!i&&u&8&&(i=!0,f.value=e[3].value.settings,be(()=>i=!1)),n.$set(f)},i(l){s||(y(n.$$.fragment,l),s=!0)},o(l){k(n.$$.fragment,l),s=!1},d(l){l&&S(t),z(n,l)}}}function Ud(r){let e=[],t=new Map,n,i,s=r[17].inputs;const o=a=>a[18];for(let a=0;a<s.length;a+=1){let l=as(r,s,a),u=o(l);t.set(u,e[a]=cs(u,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=De()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);n=De()},m(a,l){for(let u=0;u<e.length;u+=1)e[u].m(a,l);O(a,n,l),i=!0},p(a,l){l&14&&(s=a[17].inputs,Ge(),e=Ls(e,l,o,1,a,s,t,n.parentNode,xs,cs,n,as),He())},i(a){if(!i){for(let l=0;l<s.length;l+=1)y(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)k(e[l]);i=!1},d(a){for(let l=0;l<e.length;l+=1)e[l].d(a);a&&S(n)}}}function Dd(r){let e,t=r[1][r[15].value.type].title+"",n,i,s,o,a,l,u;s=new mr({props:{value:r[15].value,up:!0,down:!0,remove:!0}}),s.$on("up",r[7]),s.$on("down",r[8]),s.$on("remove",r[6]);let f=r[15].id===r[3].id&&us(Tr(r));return{c(){e=J("section"),n=ue(t),i=se(),P(s.$$.fragment),a=se(),f&&f.c(),l=De(),this.h()},l(c){e=Q(c,"SECTION",{class:!0});var h=ne(e);n=fe(h,t),i=oe(h),B(s.$$.fragment,h),h.forEach(S),a=oe(c),f&&f.l(c),l=De(),this.h()},h(){x(e,"class","preview svelte-19bln0u")},m(c,h){O(c,e,h),H(e,n),H(e,i),M(s,e,null),O(c,a,h),f&&f.m(c,h),O(c,l,h),u=!0},p(c,h){(!u||h&32770)&&t!==(t=c[1][c[15].value.type].title+"")&&st(n,t);const m={};h&32768&&(m.value=c[15].value),s.$set(m),c[15].id===c[3].id?f?(f.p(Tr(c),h),h&32776&&y(f,1)):(f=us(Tr(c)),f.c(),y(f,1),f.m(l.parentNode,l)):f&&(Ge(),k(f,1,1,()=>{f=null}),He())},i(c){u||(y(s.$$.fragment,c),c&&Zt(()=>{o||(o=ht(e,mt,{},!0)),o.run(1)}),y(f),u=!0)},o(c){k(s.$$.fragment,c),c&&(o||(o=ht(e,mt,{},!1)),o.run(0)),k(f),u=!1},d(c){c&&S(e),z(s),c&&o&&o.end(),c&&S(a),f&&f.d(c),c&&S(l)}}}function Ld(r){let e,t,n,i,s,o;function a(f){r[10](f)}let l={type:"primary",hideOnClick:!0,items:r[9],placeholder:Cn,$$slots:{default:[zd,({item:f})=>({15:f}),({item:f})=>f?32768:0]},$$scope:{ctx:r}};r[4]!==void 0&&(l.value=r[4]),n=new Pt({props:l}),_e.push(()=>ge(n,"value",a)),n.$on("change",r[5]),n.$on("change",r[11]);let u=r[0].length&&ls(r);return{c(){e=J("article"),t=J("header"),P(n.$$.fragment),s=se(),u&&u.c(),this.h()},l(f){e=Q(f,"ARTICLE",{class:!0});var c=ne(e);t=Q(c,"HEADER",{});var h=ne(t);B(n.$$.fragment,h),h.forEach(S),s=oe(c),u&&u.l(c),c.forEach(S),this.h()},h(){x(e,"class","svelte-19bln0u")},m(f,c){O(f,e,c),H(e,t),M(n,t,null),H(e,s),u&&u.m(e,null),o=!0},p(f,[c]){const h={};c&2129922&&(h.$$scope={dirty:c,ctx:f}),!i&&c&16&&(i=!0,h.value=f[4],be(()=>i=!1)),n.$set(h),f[0].length?u?(u.p(f,c),c&1&&y(u,1)):(u=ls(f),u.c(),y(u,1),u.m(e,null)):u&&(Ge(),k(u,1,1,()=>{u=null}),He())},i(f){o||(y(n.$$.fragment,f),y(u),o=!0)},o(f){k(n.$$.fragment,f),k(u),o=!1},d(f){f&&S(e),z(n),u&&u.d()}}}const Cn="__add__",hs=r=>({id:r,value:r});function xd(r,e,t){let{value:n}=e,{shaders:i}=e,{context:s}=e;function o($){if(t(4,m=Cn),$.detail.value===Cn)return;const A=i[$.detail.value];if(!A)return;const w={};for(const I of A.inputs||[])w[I.name]=Js(I.input.type,I.default,s);const R=n.push({type:$.detail.value,settings:w})-1;t(0,n),t(3,h={id:n[R],value:n[R]})}function a($){return A=>{const w=A.detail,R=n.indexOf(w);if(R===-1){console.warn(`Not found effect in list ${w.settings.type}`);return}const I=R+$;I<0||n.length<=I||(t(0,n[R]=n[I],n),t(0,n[I]=w,n))}}function l($){const A=$.detail,w=n.indexOf(A);if(w===-1){console.warn(`Not found effect in list ${A.settings.type}`);return}if(n.splice(w,1),t(0,n),h.id===A&&n.length){const R=Math.max(0,w-1);t(3,h={id:n[R],value:n[R]})}}const u=a(1),f=a(-1),c=[...Object.keys(i),Cn];let h={id:n[0],value:n[0]},m=Cn;function p($){m=$,t(4,m)}function d($){Ae.call(this,r,$)}function _($){r.$$.not_equal(h.value.settings,$)&&(h.value.settings=$,t(3,h),t(0,n))}function g($){h=$,t(3,h),t(0,n)}return r.$$set=$=>{"value"in $&&t(0,n=$.value),"shaders"in $&&t(1,i=$.shaders),"context"in $&&t(2,s=$.context)},r.$$.update=()=>{r.$$.dirty&9&&!h.value&&n.length&&(t(3,h.value=n[n.length-1],h),t(3,h.id=h.value,h))},[n,i,s,h,m,o,l,u,f,c,p,d,_,g]}class Od extends we{constructor(e){super(),ye(this,e,xd,Ld,$e,{value:0,shaders:1,context:2})}}function Gd(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_;function g(U){r[1](U)}let $={};r[0].width!==void 0&&($.value=r[0].width),i=new rt({props:$}),_e.push(()=>ge(i,"value",g));function A(U){r[2](U)}let w={};r[0].height!==void 0&&(w.value=r[0].height),u=new rt({props:w}),_e.push(()=>ge(u,"value",A));function R(U){r[3](U)}let I={};return r[0].backgroundColor!==void 0&&(I.value=r[0].backgroundColor),p=new ln({props:I}),_e.push(()=>ge(p,"value",R)),{c(){e=J("main"),t=J("section"),n=ue("Ширина"),P(i.$$.fragment),o=se(),a=J("section"),l=ue("Высота"),P(u.$$.fragment),c=se(),h=J("section"),m=ue("Фон"),P(p.$$.fragment),this.h()},l(U){e=Q(U,"MAIN",{class:!0});var q=ne(e);t=Q(q,"SECTION",{class:!0});var j=ne(t);n=fe(j,"Ширина"),B(i.$$.fragment,j),j.forEach(S),o=oe(q),a=Q(q,"SECTION",{class:!0});var L=ne(a);l=fe(L,"Высота"),B(u.$$.fragment,L),L.forEach(S),c=oe(q),h=Q(q,"SECTION",{class:!0});var V=ne(h);m=fe(V,"Фон"),B(p.$$.fragment,V),V.forEach(S),q.forEach(S),this.h()},h(){x(t,"class","svelte-v7ka5c"),x(a,"class","svelte-v7ka5c"),x(h,"class","svelte-v7ka5c"),x(e,"class","svelte-v7ka5c")},m(U,q){O(U,e,q),H(e,t),H(t,n),M(i,t,null),H(e,o),H(e,a),H(a,l),M(u,a,null),H(e,c),H(e,h),H(h,m),M(p,h,null),_=!0},p(U,[q]){const j={};!s&&q&1&&(s=!0,j.value=U[0].width,be(()=>s=!1)),i.$set(j);const L={};!f&&q&1&&(f=!0,L.value=U[0].height,be(()=>f=!1)),u.$set(L);const V={};!d&&q&1&&(d=!0,V.value=U[0].backgroundColor,be(()=>d=!1)),p.$set(V)},i(U){_||(y(i.$$.fragment,U),y(u.$$.fragment,U),y(p.$$.fragment,U),_=!0)},o(U){k(i.$$.fragment,U),k(u.$$.fragment,U),k(p.$$.fragment,U),_=!1},d(U){U&&S(e),z(i),z(u),z(p)}}}function Hd(r,e,t){let{value:n}=e;function i(a){r.$$.not_equal(n.width,a)&&(n.width=a,t(0,n))}function s(a){r.$$.not_equal(n.height,a)&&(n.height=a,t(0,n))}function o(a){r.$$.not_equal(n.backgroundColor,a)&&(n.backgroundColor=a,t(0,n))}return r.$$set=a=>{"value"in a&&t(0,n=a.value)},[n,i,s,o]}class jd extends we{constructor(e){super(),ye(this,e,Hd,Gd,$e,{value:0})}}class Wd{constructor(e,t,n,i){Te(this,"position",{x:0,y:0});Te(this,"moveStart");Te(this,"ctrl",!1);Te(this,"shift",!1);this.canvas=e,e.addEventListener("touchmove",s=>{const o=this.scale,{x:a,y:l}=this.posFromTouchEvent(s);this.position.x=a*o,this.position.y=l*o,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,this.moveStart&&s.preventDefault(),i()}),e.addEventListener("mousemove",s=>{const o=this.scale;this.position.x=s.offsetX*o,this.position.y=s.offsetY*o,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,i()}),e.addEventListener("touchstart",s=>{const o=this.scale,{x:a,y:l}=this.posFromTouchEvent(s);this.position.x=a*o,this.position.y=l*o,this.pressed||(this.moveStart={...this.position},t(this.moveStart,this)?s.preventDefault():this.moveStart=void 0),this.ctrl=s.ctrlKey,this.shift=s.shiftKey,i()},{passive:!0}),e.addEventListener("mousedown",s=>{if(s.button!==0)return;const o=this.scale;this.position.x=s.offsetX*o,this.position.y=s.offsetY*o,this.pressed||(this.moveStart={...this.position},t(this.moveStart,this)),this.ctrl=s.ctrlKey,this.shift=s.shiftKey,i()}),e.addEventListener("touchend",s=>{const o=this.scale,{x:a,y:l}=this.posFromTouchEvent(s);this.position.x=a*o,this.position.y=l*o,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,this.moveStart&&(n(this.moveStart,this.position,this)&&s.preventDefault(),this.moveStart=void 0),s.preventDefault(),i()}),e.addEventListener("mouseup",s=>{if(s.button!==0)return;const o=this.scale;this.position.x=s.offsetX*o,this.position.y=s.offsetY*o,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,this.moveStart&&(n(this.moveStart,this.position,this),this.moveStart=void 0),i()})}get pressed(){return this.moveStart!==void 0}get scale(){const e=this.canvas;return e.width/e.clientWidth}get realSize(){return{width:this.canvas.clientWidth,height:this.canvas.clientHeight}}posFromTouchEvent(e){return this.posFromTouch(e.changedTouches[0])}posFromTouch(e){const t=this.canvas.getBoundingClientRect(),n=e.pageX-t.x,i=e.pageY-t.y;return{x:n,y:i}}}function ir(r,e){return{x:e.x-r.x,y:e.y-r.y}}function Vd(r,e,t=0){return Math.abs(r.x-e.x)<=t&&Math.abs(r.y-e.y)<=t}class qd{constructor(e,t,n){Te(this,"sprites",new Array);Te(this,"cursor");Te(this,"dragAndDrop");Te(this,"hoveredSprite");this.dragDropSystemSource=t,this.onupdate=n,this.cursor=new Wd(e,()=>{if(this.dragAndDrop)return!0;if(!this.hoveredSprite)return!1;const i=this.dragDropSystemSource(this.hoveredSprite);return i?(this.dragAndDrop={sprite:this.hoveredSprite,system:i,lastPosition:{x:NaN,y:NaN}},!0):!1},(i,s)=>{if(!this.dragAndDrop)return!1;const o=this.dragAndDrop.system;return this.dragAndDrop=void 0,o.drop(i,s,this.cursor),!0},()=>this.update())}add(e){return this.sprites.push(e),e}delete(e){const t=this.sprites.indexOf(e);t!==-1&&this.sprites.splice(t,1)}clear(){var e;(e=this.dragAndDrop)==null||e.system.drop(this.cursor.moveStart,this.cursor.position,this.cursor),this.dragAndDrop=void 0,this.hoveredSprite=void 0,this.sprites.length=0}update(){var t,n;if(this.dragAndDrop){Vd(this.cursor.position,this.dragAndDrop.lastPosition,.001)||(this.dragAndDrop.system.move(this.cursor.moveStart,this.cursor.position,this.cursor),this.dragAndDrop.lastPosition.x=this.cursor.position.x,this.dragAndDrop.lastPosition.y=this.cursor.position.y,(t=this.onupdate)==null||t.call(this));return}const e=this.hoveredSprite;this.hoveredSprite=void 0;for(let i=this.sprites.length-1;i>=0;i--){const s=this.sprites[i];if(s.interactive&&s.contains(this.cursor.position)){this.hoveredSprite=s;break}}e!==this.hoveredSprite&&((n=this.onupdate)==null||n.call(this))}draw(e){this.sprites.forEach(t=>{e.save(),t.draw(e,this.spriteState(t)),e.restore()})}spriteState(e){var t;return((t=this.dragAndDrop)==null?void 0:t.sprite)===e?"active":this.hoveredSprite===e?"hover":"default"}}class Ke{constructor(){Te(this,"data",[[0,0,0],[0,0,0],[0,0,0]])}static Zero(){return new Ke}static Ident(){const e=new Ke;return e.data[0][0]=1,e.data[1][1]=1,e.data[2][2]=1,e}static RotationAround(e,t){return Ke.Translate({x:-e.x,y:-e.y}).Multiply(this.Rotation(t)).Multiply(Ke.Translate(e))}static Rotation(e){const t=Math.sin(e),n=Math.cos(e);return this.RotationCosSin(n,t)}static RotationCosSin(e,t){const n=Ke.Ident();return n.data[0][0]=e,n.data[0][1]=t,n.data[1][0]=-t,n.data[1][1]=e,n}static Translate(e,t){const n=Ke.Ident();if(typeof e=="number"&&typeof t=="number")n.data[2][0]=e,n.data[2][1]=t;else if(typeof e!="number"){const i=e;n.data[2][0]=i.x,n.data[2][1]=i.y}else throw new Error(`Unexpected type combination in Matrix.Translate: x: ${typeof e}, y: ${typeof t}`);return n}Get(e,t){return this.data[e][t]}Set(e,t,n){this.data[e][t]=n}Multiply(e){const t=Ke.Zero();for(let n=0;n<3;++n)for(let i=0;i<3;++i)for(let s=0;s<3;++s)t.data[n][i]+=this.data[n][s]*e.data[s][i];return t}Transform(e,t={x:0,y:0}){const n=this.Get(0,0)*e.x+this.Get(1,0)*e.y+this.Get(2,0),i=this.Get(0,1)*e.x+this.Get(1,1)*e.y+this.Get(2,1),s=this.Get(0,2)*e.x+this.Get(1,2)*e.y+this.Get(2,2);return t.x=n/s,t.y=i/s,t}}class Jr{constructor(e,t,n){Te(this,"normal");Te(this,"normalization");this.a=e,this.b=t,this.c=n;const i=Math.sqrt(e*e+t*t);this.normal={x:e/i,y:t/i},this.normalization=i}static byTwoPoints({x:e,y:t},{x:n,y:i}){return new Jr(t-i,n-e,e*i-n*t)}onLine(e){return Math.abs(this.rawDistance(e))<1e-15}sign(e){return Math.sign(this.rawDistance(e))}rawDistance({x:e,y:t}){return this.a*e+this.b*t+this.c}distance(e){const t=this.rawDistance(e);return Math.abs(t)/this.normalization}projection(e){const t=this.rawDistance(e)/this.normalization;return{x:e.x-this.normal.x*t,y:e.y-this.normal.y*t}}}class ms{constructor(e,t){Te(this,"line");this.p1=e,this.p2=t,this.line=Jr.byTwoPoints(e,t)}get left(){return Math.min(this.p1.x,this.p2.x)}get right(){return Math.max(this.p1.x,this.p2.x)}}class zn{constructor(e){Te(this,"edges");this.points=e,this.edges=new Array(e.length),this.updateEdges()}updateEdges(){const e=this.points;for(let t=0;t<e.length-1;t++)this.edges[t]=new ms(e[t],e[t+1]);this.edges[e.length-1]=new ms(e[e.length-1],e[0])}transform(e){const t=this.points,n=t.length;for(let i=0;i<n;i++)e.Transform(t[i],t[i]);this.updateEdges()}transformCopy(e){return new zn(this.points.map(t=>e.Transform(t)))}contains(e){let t=0;const n=this.edges.length;for(let i=0;i<n;i++){const s=this.edges[i];e.x<=s.left||e.x>s.right||(t+=s.line.sign(e))}return t!=0}center(){const e=this.points,t=e.length;let n=0,i=0;for(let s=0;s<t;s++)n+=e[s].x,i+=e[s].y;return{x:n/t,y:i/t}}area(){let e=0;const t=this.points.length-1,n=this.points;for(let i=0;i<t;i++)e+=n[i].x*n[i+1].x-n[i+1].y*n[i].y;return e+=n[t].x*n[0].y-n[0].x*n[t].y,e/2}repair(){this.area()<0&&this.points.reverse()}}class Qs{constructor(e=!1,t){this.interactive=e,this.settings=t}draw(e,t){const n=this.settings.fill[t],i=this.settings.stroke[t];this.makePath(e,t),n&&(e.fillStyle=n,e.fill()),i&&(e.strokeStyle=i,e.stroke())}}class eo extends Qs{constructor(e=new Ct,t=!1,n){super(t,n),this.transform=e}getPolygon(){return this.localPolygon().transformCopy(this.transform.matrix())}makePath(e){Zd(e,this.getPolygon())}contains(e){return this.getPolygon().contains(e)}}class Et extends eo{constructor(e,t=new Ct,n=!1,i){super(t,n,i),this.polygon=e}localPolygon(){return this.polygon}}class Gn extends eo{constructor(e,t=new Ct,n=!1,i){super(t,n,i),this.localPolygon=e}}function kt(r,e){const t=r/2,n=e/2;return new zn([{x:-t,y:-n},{x:t,y:-n},{x:t,y:n},{x:-t,y:n}])}class Ct{constructor(e=0,t=0,n=0,i){this.x=e,this.y=t,this.rotate=n,this.parent=i}matrix(){const e=Ke.Rotation(this.rotate).Multiply(Ke.Translate(this));return this.parent?e.Multiply(this.parent.matrix()):e}rotation(){const e=this.rotate;return this.parent?e+this.parent.rotation():e}}class Ft{constructor(e=()=>0,t=()=>0,n=()=>0,i){this.xSource=e,this.ySource=t,this.rotateSource=n,this.parent=i}get rotate(){return this.rotateSource()}get x(){return this.xSource()}get y(){return this.ySource()}matrix(){const e=Ke.Rotation(this.rotate).Multiply(Ke.Translate(this));return this.parent?e.Multiply(this.parent.matrix()):e}rotation(){const e=this.rotate;return this.parent?e+this.parent.rotation():e}}function ds(r,e){const t=e/3,n=t/2,i=[{x:r-n-2*t,y:n},{x:-n,y:n},{x:-n,y:-n},{x:r-n-2*t,y:-n},{x:r-n-3*t,y:-n-t},{x:r-n,y:0},{x:r-n-3*t,y:+n+t}];return new zn(i)}function ps(r,e,t){const n=t/3,i=n/2,s=e/(Math.PI/45)|0,o=e/s,a=[],l=[],u=r-i,f=r+i;for(let m=0;m<s;m++){const p=Math.cos(o*m),d=Math.sin(o*m),_=p*u,g=d*u;a.push({x:_,y:g});const $=p*f,A=d*f;l.push({x:$,y:A})}const c=[{x:-t,y:+i+n},{x:t,y:0},{x:-t,y:-i-n}],h=Ke.Rotation(Math.PI/2).Multiply(Ke.Translate({x:r,y:0})).Multiply(Ke.RotationAround({x:0,y:0},e));return new zn([...a,...c.map(m=>h.Transform(m,m)),...l.reverse()])}function Zd(r,e){r.beginPath(),r.moveTo(e.points[0].x,e.points[0].y),e.points.forEach(t=>r.lineTo(t.x,t.y)),r.closePath()}class Xd extends Qs{constructor(e,t,n=!1,i){super(n,i),this.circle=e,this.width=t}makePath(e,t){const n=t=="hover"?this.width:this.width/2,i=this.circle.radius-n/2,s=i+n,{x:o,y:a}=this.circle.center;i<=0||(e.beginPath(),e.arc(o,a,i,0,2*Math.PI,!1),e.moveTo(o+s,a),e.arc(o,a,s,0,2*Math.PI,!0),e.closePath())}contains(e){const t=e.x-this.circle.center.x,n=e.y-this.circle.center.y,i=Math.sqrt(t*t+n*n);return Math.abs(this.circle.radius-i)<this.width/2}}var jt=(r=>(r[r.Cursor=0]="Cursor",r[r.Move=1]="Move",r[r.Crop=2]="Crop",r))(jt||{});class Kd{constructor(e,t,n,i,s,o,a){Te(this,"ctx");Te(this,"sprites");Te(this,"handlers",new Map);Te(this,"effectToSprite",new Map);Te(this,"activeBlockId","");Te(this,"activeContainerType","");Te(this,"draw",Hn(()=>{const e=this.ctx.canvas,t=this.cursor.realSize;e.width!==t.width&&(e.width=t.width),e.height!==t.height&&(e.height=t.height),this.ctx.clearRect(0,0,e.width,e.height),this.ctx.save(),this.ctx.scale(1/this.cursor.scale,1/this.cursor.scale),this.sprites.draw(this.ctx),this.ctx.restore()}));this.state=o,this.effectsShaders=a,this.ctx=e.getContext("2d");let l=!1;this.sprites=new qd(t,c=>{const h=this.handlers.get(c);if(h){if(h.type==="select"){const m=h.blockId;return{move(){},drop(){s.set(i.value.blocks.find(({id:p})=>m===p))}}}if(h.type==="effect"){const m=h.handler(),p=(d,_,g)=>{m(d,_,g),l=!0,s.set(s.value),l=!1};return{move:Hn(p),drop:p}}if(h.type==="move"){const m=s.value.container;if(!this.activeBlockId||m.type!=="rectangle")return;const p=m.value,d=h.handler(p),_=(g,$,A)=>{m.value=d(g,$,A),l=!0,s.set(s.value),l=!1};return{move:Hn(_),drop:_}}if(this.activeBlockId&&h.type==="crop"){const m=s.value.container,p=s.value.content;if(!this.activeBlockId||m.type!=="rectangle"||p.type!=="image")return;const d=m.value,_=p.value.crop,g=h.handler(_,d),$=(A,w,R)=>{const I=g(A,w,R);m.value=I.pos,p.value.crop=I.tex,l=!0,s.set(s.value),l=!1};return{move:Hn($),drop:$}}}},()=>this.draw()),n.subscribe(()=>{this.activeBlockId=""}),i.subscribe(()=>{l||this.draw()});const u={global:{text:{available:[0],default:0},image:{available:[0],default:0}},rectangle:{text:{available:[0,1],default:1},image:{available:[0,1,2],default:1}}};let f=!1;s.subscribe(c=>{const h=u[c.container.type][c.content.type];if(this.state.value.available!==h.available&&(f=!0,this.state.set({available:h.available,mode:h.default}),f=!1),l||this.draw(),c.id==this.activeBlockId&&c.container.type==this.activeContainerType){const m=new Map(this.effectToSprite);c.effects.forEach(p=>{if(m.has(p)){m.delete(p);return}this.setupEffect(p)});for(const[p,d]of m)d.forEach(_=>this.handlers.delete(_)),d.forEach(_=>this.sprites.delete(_)),this.effectToSprite.delete(p);return}this.activeBlockId=c.id,this.activeContainerType=c.container.type,this.setup(i.value.blocks,c)}),o.subscribe(()=>{f||(this.setup(i.value.blocks,s.value),this.draw())})}get cursor(){return this.sprites.cursor}setupEffect(e){const t=8*this.cursor.scale,n=this.effectsShaders[e.type];if(!n||!n.inputs)return;let i;const s=[];let o;for(const l of n.inputs)l.input.type=="point"?(s.push(l),l.name=="center"&&(i=l)):l.name=="radius"&&l.input.type=="float"&&(o=l);const a=e.settings;for(const l of s)this.addEffectModifier(new Et(kt(t*2,t*2),new Ft(()=>e.settings[l.name].x,()=>e.settings[l.name].y,()=>Math.PI/4),!0,$t(l.input.type=="point"?l.input.color:"#000000")),e,()=>(u,f)=>(e.settings[l.name].x=f.x|0,e.settings[l.name].y=f.y|0,!0));i&&o&&this.addEffectModifier(new Xd(a,t,!0,$t(i.input.type=="point"?i.input.color:"#000000")),e,()=>(l,u)=>{const f=u.x-e.settings.center.x,c=u.y-e.settings.center.y,h=Math.sqrt(f*f+c*c);return e.settings.radius=h|0,!0})}clear(){this.handlers.clear(),this.sprites.clear()}setupBlock(e){if(this.state.value.mode===1){e.container.type==="rectangle"&&this.setupMoveRectangle(e);return}if(this.state.value.mode===2){e.container.type==="rectangle"&&this.setupCropRectangle(e);return}}setup(e,t){const n=this.ctx.canvas,i=this.cursor.realSize;n.width!==i.width&&(n.width=i.width),n.height!==i.height&&(n.height=i.height),this.clear(),e.forEach(s=>{s===t||s.container.type!=="rectangle"||this.addSelector(s.id,s.container.value)}),this.setupBlock(t),t.effects.forEach(s=>this.setupEffect(s))}setupCropRectangle(e){const t=8*this.cursor.scale,n=new Gn(()=>kt(e.container.value.width,e.container.value.height),new Ft(()=>e.container.value.position.x,()=>e.container.value.position.y,()=>e.container.value.rotation),!0,{fill:{},stroke:{default:"#aaaaaa "}}),i=this.sprites.add(n),s=ds(t*7,t*2),o=new Et(kt(t*2.5,t*2.5),new Ft(()=>0,()=>0,()=>-e.content.value.crop.rotation,i.transform),!0,$t("#a4b4c4")),a=new Ft(()=>0,()=>0,()=>this.cursor.ctrl?-o.transform.rotation():0,o.transform),l=new Et(s,new Ct(0,0,0,a),!0,$t("#4444aa")),u=new Et(s,new Ct(0,0,-Math.PI/2,a),!0,$t("#aa4444"));this.addCrop(l,gs(l)),this.addCrop(u,gs(u)),this.addCrop(o,n0);const f=new Et(ps(4*t,Math.PI*1.5,t*1.5),new Ct(0,0,-Math.PI/4,o.transform),!0,$t("#88ee88"));this.addCrop(f,r0(o.transform)),[{dim:"width",dir:{x:1,y:0}},{dim:"width",dir:{x:-1,y:0}},{dim:"height",dir:{x:0,y:1}},{dim:"height",dir:{x:0,y:-1}}].forEach(({dim:c,dir:h})=>{const m=c==="height"?()=>kt(e.container.value.width-t,t):()=>kt(t,e.container.value.height-t);this.addCrop(new Gn(m,new Ft(()=>h.x*e.container.value.width/2,()=>h.y*e.container.value.height/2,()=>0,i.transform),!0,$t("#333333")),e0(c,h))}),[{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}].forEach(c=>{this.addCrop(new Et(kt(t,t),new Ft(()=>c.x*e.container.value.width/2,()=>c.y*e.container.value.height/2,()=>0,i.transform),!0,$t("#444444")),t0(c))})}setupMoveRectangle(e){const t=new Gn(()=>kt(e.container.value.width,e.container.value.height),new Ft(()=>e.container.value.position.x,()=>e.container.value.position.y,()=>e.container.value.rotation),!0,{fill:{},stroke:{default:"#aaaa00 "}}),n=this.sprites.add(t),i=16*this.cursor.scale,s=ds(i*7,i*1.4),o=new Ft(()=>0,()=>0,()=>this.cursor.ctrl?-n.transform.rotation():0,n.transform),a=new Et(s,new Ct(0,0,0,o),!0,$t("#0000ff")),l=new Et(s,new Ct(0,0,-Math.PI/2,o),!0,$t("#ff0000"));this.addModifier(a,_s(a)),this.addModifier(l,_s(l)),this.addModifier(new Et(kt(i*2,i*2),new Ct(0,0,0,n.transform),!0,$t("#ff00ff")),f=>(c,h)=>{const m=h.x-c.x,p=h.y-c.y,{x:d,y:_}=f.position;return{...f,position:{x:d+m|0,y:_+p|0}}});const u=new Et(ps(4*i,Math.PI*1.5,i*1.5),new Ct(0,0,-Math.PI/4,n.transform),!0,$t("#00ff00"));this.addModifier(u,Yd),[{dim:"width",dir:{x:1,y:0}},{dim:"width",dir:{x:-1,y:0}},{dim:"height",dir:{x:0,y:1}},{dim:"height",dir:{x:0,y:-1}}].forEach(({dim:f,dir:c})=>{const h=f==="height"?()=>kt(e.container.value.width-i,i):()=>kt(i,e.container.value.height-i);this.addModifier(new Gn(h,new Ft(()=>c.x*e.container.value.width/2,()=>c.y*e.container.value.height/2,()=>0,n.transform),!0,$t("#ff9900")),Jd(f,c))}),[{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}].forEach(f=>{this.addModifier(new Et(kt(i,i),new Ft(()=>f.x*e.container.value.width/2,()=>f.y*e.container.value.height/2,()=>0,n.transform),!0,$t("#ff99ff")),Qd(f))})}addSelector(e,t){const n=this.sprites.add(new Et(kt(t.width,t.height),new Ct(t.position.x,t.position.y,t.rotation),!0,{fill:{hover:"#aaaaaa22",active:"#aaaaaa44"},stroke:{hover:"#aaaaaa99",active:"#aaaaaa"}}));this.handlers.set(n,{type:"select",blockId:e})}addModifier(e,t){this.handlers.set(this.sprites.add(e),{type:"move",handler:t})}addCrop(e,t){this.handlers.set(this.sprites.add(e),{type:"crop",handler:t})}addEffectModifier(e,t,n){this.handlers.set(this.sprites.add(e),{type:"effect",handler:n}),this.effectToSprite.has(t)?this.effectToSprite.get(t).push(e):this.effectToSprite.set(t,[e])}}function Yd(r){const{rotation:e}=r,t=r.position;return(n,i,s)=>{const o=ir(t,n),a=ir(t,i),l=Math.atan2(o.y,o.x),u=Math.atan2(a.y,a.x),f=Math.PI/180*1;let c=Math.round((u-l)/f)*f;const h=Math.PI/4;return s.shift&&(c=(c/h|0)*h),{...r,rotation:s.ctrl?c:e+c}}}function $t(r){return{fill:{default:`${r}44`,hover:`${r}99`,active:`${r}`},stroke:{default:`${r}44`,hover:`${r}99`,active:`${r}`}}}function Jd(r,e){return t=>(n,i,s)=>{const o=i.x-n.x,a=i.y-n.y,l=Ke.Rotation(t.rotation).Transform(e);let u=o*l.x+a*l.y|0;return s.shift&&(u=(u/10|0)*10),s.ctrl?{...t,position:{x:t.position.x+l.x*u/2,y:t.position.y+l.y*u/2},[r]:t[r]+u}:{...t,[r]:t[r]+2*u}}}function Qd(r){return e=>(t,n,i)=>{const s=n.x-t.x,o=n.y-t.y,a=Ke.Rotation(e.rotation).Transform({x:0,y:r.y}),l=Ke.Rotation(e.rotation).Transform({x:r.x,y:0});let u=s*a.x+o*a.y|0,f=s*l.x+o*l.y|0;const c=e.width/e.height;return i.shift&&(f=Math.max(u*c,f),u=f/c),i.ctrl?{...e,position:{x:e.position.x+a.x*u/2+l.x*f/2,y:e.position.y+a.y*u/2+l.y*f/2},height:e.height+u,width:e.width+f}:{...e,height:e.height+2*u,width:e.width+2*f}}}function _s(r){return e=>(t,n,i)=>{const s=n.x-t.x,o=n.y-t.y,{x:a,y:l}=e.position,u=Ke.Rotation(r.transform.rotation()).Transform({x:1,y:0});let f=s*u.x+o*u.y;return i.shift&&(f=(f/10|0)*10),{...e,position:{x:a+u.x*f,y:l+u.y*f}}}}function Hn(r){let e=0;return(...t)=>{e||(e=requestAnimationFrame(()=>{e=0,r.apply(void 0,t)}))}}function e0(r,e){return(t,n)=>(i,s,o)=>{const a=s.x-i.x,l=s.y-i.y,u=Ke.Rotation(n.rotation).Transform(e);let f=a*u.x+l*u.y;o.shift&&(f=(f/10|0)*10);const c=t.width/n.width,h=t.height/n.height,m={x:e.x*f,y:e.y*f},p=Math.sign(t[r])*Math.sign(n[r])*Math.sign(f)*Math.sqrt(m.x*m.x*c*c+m.y*m.y*h*h);if(!o.ctrl)return{tex:{...t,[r]:t[r]+2*p},pos:{...n,[r]:n[r]+2*f}};const d=Ke.Rotation(t.rotation).Transform(m);return{tex:{...t,position:{x:t.position.x+d.x/2*c,y:t.position.y+d.y/2*h},[r]:t[r]+p},pos:{...n,position:{x:n.position.x+u.x*f/2,y:n.position.y+u.y*f/2},[r]:n[r]+f}}}}function t0(r){return(e,t)=>(n,i,s)=>{const o=i.x-n.x,a=i.y-n.y,l=Ke.Rotation(t.rotation),u=l.Transform({x:0,y:r.y}),f=l.Transform({x:r.x,y:0});let c=o*u.x+a*u.y|0,h=o*f.x+a*f.y|0;const m=t.height/t.width;s.shift&&(c=Math.max(h*m,c),h=c/m);const p=e.width/t.width,d=e.height/t.height,_=c*d,g=h*p;if(!s.ctrl)return{tex:{...e,width:e.width+2*g,height:e.height+2*_},pos:{...t,height:t.height+2*c,width:t.width+2*h}};const A=Ke.Rotation(e.rotation).Transform({x:Math.sign(r.x)*h,y:Math.sign(r.y)*c});return{tex:{...e,position:{x:e.position.x+A.x/2*p,y:e.position.y+A.y/2*d},width:e.width+g,height:e.height+_},pos:{...t,position:{x:t.position.x+u.x*c/2+f.x*h/2,y:t.position.y+u.y*c/2+f.y*h/2},width:t.width+h,height:t.height+c}}}}function n0(r,e){return(t,n)=>{const i=n.x-t.x,s=n.y-t.y,o=r.width/e.width,a=r.height/e.height,l=Ke.Rotation(r.rotation-e.rotation).Transform({x:i,y:s});return{tex:{...r,position:{x:r.position.x-l.x*o,y:r.position.y-l.y*a}},pos:e}}}function gs(r){return(e,t)=>(n,i,s)=>{const o=i.x-n.x,a=i.y-n.y,l=Ke.Rotation(r.transform.rotation()).Transform({x:1,y:0});let u=o*l.x+a*l.y;s.shift&&(u=(u/10|0)*10);const f=e.width/t.width,c=e.height/t.height,h=Ke.Rotation(e.rotation-t.rotation).Transform({x:l.x*u,y:l.y*u}),{x:m,y:p}=e.position;return{tex:{...e,position:{x:m-h.x*f,y:p-h.y*c}},pos:t}}}function r0(r){return(e,t)=>{const{rotation:n}=e,i=r.matrix().Transform({x:0,y:0});return(s,o,a)=>{const l=ir(i,s),u=ir(i,o),f=Math.atan2(l.y,l.x),c=Math.atan2(u.y,u.x),h=Math.PI/180*1;let m=-Math.round((c-f)/h)*h;const p=Math.PI/4;return a.shift&&(m=(m/p|0)*p),{tex:{...e,rotation:a.ctrl?m:n+m},pos:t}}}}function bs(r,e,t){const n=r.slice();return n[5]=e[t],n}function i0(r){let e,t,n;return e=new Kr({props:{type:"bootstrap",path:r[5].icon}}),{c(){P(e.$$.fragment),t=se()},l(i){B(e.$$.fragment,i),t=oe(i)},m(i,s){M(e,i,s),O(i,t,s),n=!0},p:je,i(i){n||(y(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){z(e,i),i&&S(t)}}}function vs(r){let e,t;function n(...s){return r[3](r[5],...s)}function i(){return r[4](r[5])}return e=new nt({props:{title:r[5].title,active:r[0]===r[5].value,disabled:!r[1].some(n),$$slots:{default:[i0]},$$scope:{ctx:r}}}),e.$on("click",i),{c(){P(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,o){M(e,s,o),t=!0},p(s,o){r=s;const a={};o&1&&(a.active=r[0]===r[5].value),o&2&&(a.disabled=!r[1].some(n)),o&256&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function s0(r){let e,t,n=r[2],i=[];for(let o=0;o<n.length;o+=1)i[o]=vs(bs(r,n,o));const s=o=>k(i[o],1,1,()=>{i[o]=null});return{c(){e=J("article");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=Q(o,"ARTICLE",{class:!0});var a=ne(e);for(let l=0;l<i.length;l+=1)i[l].l(a);a.forEach(S),this.h()},h(){x(e,"class","svelte-1v11mi3")},m(o,a){O(o,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(o,[a]){if(a&7){n=o[2];let l;for(l=0;l<n.length;l+=1){const u=bs(o,n,l);i[l]?(i[l].p(u,a),y(i[l],1)):(i[l]=vs(u),i[l].c(),y(i[l],1),i[l].m(e,null))}for(Ge(),l=n.length;l<i.length;l+=1)s(l);He()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)y(i[a]);t=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)k(i[a]);t=!1},d(o){o&&S(e),gn(i,o)}}}const o0="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103zM2.25 8.184l3.897 1.67a.5.5 0 0 1 .262.263l1.67 3.897L12.743 3.52 2.25 8.184z",a0="M3.5.5A.5.5 0 0 1 4 1v13h13a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2H3.5a.5.5 0 0 1-.5-.5V4H1a.5.5 0 0 1 0-1h2V1a.5.5 0 0 1 .5-.5zm2.5 3a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4H6.5a.5.5 0 0 1-.5-.5z",l0="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z";function u0(r,e,t){let{current:n=jt.Cursor}=e,{available:i=[jt.Cursor]}=e;const s=[{icon:o0,title:"Указатель",value:jt.Cursor},{icon:l0,title:`Модифицировать блок
(для прямоугольных блоков)`,value:jt.Move},{icon:a0,title:`Обрезать изображение
(для прямоугольных блоков)`,value:jt.Crop}],o=(l,u)=>u===l.value,a=l=>{i.some(u=>u===l.value)&&t(0,n=l.value)};return r.$$set=l=>{"current"in l&&t(0,n=l.current),"available"in l&&t(1,i=l.available)},[n,i,s,o,a]}class f0 extends we{constructor(e){super(),ye(this,e,u0,s0,$e,{current:0,available:1})}}function c0(r){let e,t,n,i,s,o=r[0].name+"",a,l,u;n=new Hs({});const f=r[2].default,c=Ce(f,r,r[1],null);return{c(){e=J("article"),t=J("main"),P(n.$$.fragment),i=se(),s=J("span"),a=ue(o),l=se(),c&&c.c(),this.h()},l(h){e=Q(h,"ARTICLE",{class:!0});var m=ne(e);t=Q(m,"MAIN",{class:!0});var p=ne(t);B(n.$$.fragment,p),i=oe(p),s=Q(p,"SPAN",{class:!0});var d=ne(s);a=fe(d,o),d.forEach(S),p.forEach(S),l=oe(m),c&&c.l(m),m.forEach(S),this.h()},h(){x(s,"class","svelte-12pwzc2"),x(t,"class","svelte-12pwzc2"),x(e,"class","svelte-12pwzc2")},m(h,m){O(h,e,m),H(e,t),M(n,t,null),H(t,i),H(t,s),H(s,a),H(e,l),c&&c.m(e,null),u=!0},p(h,[m]){(!u||m&1)&&o!==(o=h[0].name+"")&&st(a,o),c&&c.p&&(!u||m&2)&&Re(c,f,h,h[1],u?Ne(f,h[1],m,null):Fe(h[1]),null)},i(h){u||(y(n.$$.fragment,h),y(c,h),u=!0)},o(h){k(n.$$.fragment,h),k(c,h),u=!1},d(h){h&&S(e),z(n),c&&c.d(h)}}}function h0(r,e,t){let{$$slots:n={},$$scope:i}=e,{content:s}=e;return r.$$set=o=>{"content"in o&&t(0,s=o.content),"$$scope"in o&&t(1,i=o.$$scope)},[s,i,n]}class to extends we{constructor(e){super(),ye(this,e,h0,c0,$e,{content:0})}}function m0(r){let e,t,n,i;return{c(){e=ue("Имя "),t=J("input")},l(s){e=fe(s,"Имя "),t=Q(s,"INPUT",{})},m(s,o){O(s,e,o),O(s,t,o),At(t,r[0].name),n||(i=Ie(t,"input",r[1]),n=!0)},p(s,o){o&1&&t.value!==s[0].name&&At(t,s[0].name)},d(s){s&&S(e),s&&S(t),n=!1,i()}}}function d0(r){let e,t,n,i;function s(a){r[3](a)}let o={step:.01};return r[0].crop.position!==void 0&&(o.value=r[0].crop.position),t=new yn({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue("Центр"),P(t.$$.fragment)},l(a){e=fe(a,"Центр"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].crop.position,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function p0(r){let e,t,n;return t=new rt({props:{withRange:!0,rangeMin:0,rangeMax:360,step:1,value:Math.round(r[0].crop.rotation/Math.PI*180)}}),t.$on("input",r[4]),{c(){e=ue("Поворот"),P(t.$$.fragment)},l(i){e=fe(i,"Поворот"),B(t.$$.fragment,i)},m(i,s){O(i,e,s),M(t,i,s),n=!0},p(i,s){const o={};s&1&&(o.value=Math.round(i[0].crop.rotation/Math.PI*180)),t.$set(o)},i(i){n||(y(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){i&&S(e),z(t,i)}}}function _0(r){let e,t,n,i;function s(a){r[5](a)}let o={step:.01};return r[0].crop.width!==void 0&&(o.value=r[0].crop.width),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue("Ширина"),P(t.$$.fragment)},l(a){e=fe(a,"Ширина"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].crop.width,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function g0(r){let e,t,n,i;function s(a){r[6](a)}let o={step:.01};return r[0].crop.height!==void 0&&(o.value=r[0].crop.height),t=new rt({props:o}),_e.push(()=>ge(t,"value",s)),{c(){e=ue("Высота"),P(t.$$.fragment)},l(a){e=fe(a,"Высота"),B(t.$$.fragment,a)},m(a,l){O(a,e,l),M(t,a,l),i=!0},p(a,l){const u={};!n&&l&1&&(n=!0,u.value=a[0].crop.height,be(()=>n=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){k(t.$$.fragment,a),i=!1},d(a){a&&S(e),z(t,a)}}}function b0(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p;return e=new Xe({props:{$$slots:{default:[m0]},$$scope:{ctx:r}}}),n=new qs({props:{accept:"image/*",typeFilter:/^image\//}}),n.$on("change",r[2]),a=new Xe({props:{$$slots:{default:[d0]},$$scope:{ctx:r}}}),u=new Xe({props:{$$slots:{default:[p0]},$$scope:{ctx:r}}}),c=new Xe({props:{$$slots:{default:[_0]},$$scope:{ctx:r}}}),m=new Xe({props:{$$slots:{default:[g0]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),s=J("br"),o=ue(`
	Настройки текстурных координат (не стабильно)
	`),P(a.$$.fragment),l=se(),P(u.$$.fragment),f=se(),P(c.$$.fragment),h=se(),P(m.$$.fragment)},l(d){B(e.$$.fragment,d),t=oe(d),B(n.$$.fragment,d),i=oe(d),s=Q(d,"BR",{}),o=fe(d,`
	Настройки текстурных координат (не стабильно)
	`),B(a.$$.fragment,d),l=oe(d),B(u.$$.fragment,d),f=oe(d),B(c.$$.fragment,d),h=oe(d),B(m.$$.fragment,d)},m(d,_){M(e,d,_),O(d,t,_),M(n,d,_),O(d,i,_),O(d,s,_),O(d,o,_),M(a,d,_),O(d,l,_),M(u,d,_),O(d,f,_),M(c,d,_),O(d,h,_),M(m,d,_),p=!0},p(d,_){const g={};_&129&&(g.$$scope={dirty:_,ctx:d}),e.$set(g);const $={};_&129&&($.$$scope={dirty:_,ctx:d}),a.$set($);const A={};_&129&&(A.$$scope={dirty:_,ctx:d}),u.$set(A);const w={};_&129&&(w.$$scope={dirty:_,ctx:d}),c.$set(w);const R={};_&129&&(R.$$scope={dirty:_,ctx:d}),m.$set(R)},i(d){p||(y(e.$$.fragment,d),y(n.$$.fragment,d),y(a.$$.fragment,d),y(u.$$.fragment,d),y(c.$$.fragment,d),y(m.$$.fragment,d),p=!0)},o(d){k(e.$$.fragment,d),k(n.$$.fragment,d),k(a.$$.fragment,d),k(u.$$.fragment,d),k(c.$$.fragment,d),k(m.$$.fragment,d),p=!1},d(d){z(e,d),d&&S(t),z(n,d),d&&S(i),d&&S(s),d&&S(o),z(a,d),d&&S(l),z(u,d),d&&S(f),z(c,d),d&&S(h),z(m,d)}}}function v0(r){let e,t;return e=new Xt({props:{$$slots:{default:[b0]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,[i]){const s={};i&129&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function $0(r,e,t){let{content:n}=e;function i(){n.name=this.value,t(0,n)}function s(f){Ae.call(this,r,f)}function o(f){r.$$.not_equal(n.crop.position,f)&&(n.crop.position=f,t(0,n))}const a=f=>{t(0,n.crop.rotation=f.detail%360/180*Math.PI,n)};function l(f){r.$$.not_equal(n.crop.width,f)&&(n.crop.width=f,t(0,n))}function u(f){r.$$.not_equal(n.crop.height,f)&&(n.crop.height=f,t(0,n))}return r.$$set=f=>{"content"in f&&t(0,n=f.content)},[n,i,s,o,a,l,u]}class w0 extends we{constructor(e){super(),ye(this,e,$0,v0,$e,{content:0})}}function y0(r){let e,t,n,i,s;return e=new Gs({}),{c(){P(e.$$.fragment),t=se(),n=J("span"),i=ue("Новый фрейм"),this.h()},l(o){B(e.$$.fragment,o),t=oe(o),n=Q(o,"SPAN",{class:!0});var a=ne(n);i=fe(a,"Новый фрейм"),a.forEach(S),this.h()},h(){x(n,"class","svelte-15zgtsu")},m(o,a){M(e,o,a),O(o,t,a),O(o,n,a),H(n,i),s=!0},p:je,i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){k(e.$$.fragment,o),s=!1},d(o){z(e,o),o&&S(t),o&&S(n)}}}function E0(r){let e,t;function n(){return r[13](r[55])}function i(){return r[14](r[55])}function s(){return r[15](r[55])}function o(){return r[16](r[55])}return e=new mr({props:{up:!0,down:!0,remove:!0,copy:!0,value:r[55]}}),e.$on("up",n),e.$on("down",i),e.$on("remove",s),e.$on("copy",o),{c(){P(e.$$.fragment)},l(a){B(e.$$.fragment,a)},m(a,l){M(e,a,l),t=!0},p(a,l){r=a;const u={};l[1]&16777216&&(u.value=r[55]),e.$set(u)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){z(e,a)}}}function k0(r){let e,t,n;function i(o){r[17](o,r[55])}let s={index:r[56],$$slots:{default:[E0]},$$scope:{ctx:r}};return r[2][r[55].id]!==void 0&&(s.updatePreview=r[2][r[55].id]),e=new Vm({props:s}),_e.push(()=>ge(e,"updatePreview",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){r=o;const l={};a[1]&33554432&&(l.index=r[56]),a[1]&83886080&&(l.$$scope={dirty:a,ctx:r}),!t&&a[0]&4|a[1]&16777216&&(t=!0,l.updatePreview=r[2][r[55].id],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function A0(r){let e,t,n,i,s;return e=new Du({props:{size:24}}),{c(){P(e.$$.fragment),t=se(),n=J("span"),i=ue("Скачать мем"),this.h()},l(o){B(e.$$.fragment,o),t=oe(o),n=Q(o,"SPAN",{class:!0});var a=ne(n);i=fe(a,"Скачать мем"),a.forEach(S),this.h()},h(){x(n,"class","svelte-15zgtsu")},m(o,a){M(e,o,a),O(o,t,a),O(o,n,a),H(n,i),s=!0},p:je,i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){k(e.$$.fragment,o),s=!1},d(o){z(e,o),o&&S(t),o&&S(n)}}}function S0(r){let e,t,n,i,s;return e=new Ql({props:{size:24}}),{c(){P(e.$$.fragment),t=se(),n=J("span"),i=ue("Сохранить проект мема"),this.h()},l(o){B(e.$$.fragment,o),t=oe(o),n=Q(o,"SPAN",{class:!0});var a=ne(n);i=fe(a,"Сохранить проект мема"),a.forEach(S),this.h()},h(){x(n,"class","svelte-15zgtsu")},m(o,a){M(e,o,a),O(o,t,a),O(o,n,a),H(n,i),s=!0},p:je,i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){k(e.$$.fragment,o),s=!1},d(o){z(e,o),o&&S(t),o&&S(n)}}}function T0(r){let e,t,n,i;return e=new bf({props:{size:24}}),{c(){P(e.$$.fragment),t=J("span"),n=ue("Открыть проект мема"),this.h()},l(s){B(e.$$.fragment,s),t=Q(s,"SPAN",{class:!0});var o=ne(t);n=fe(o,"Открыть проект мема"),o.forEach(S),this.h()},h(){x(t,"class","svelte-15zgtsu")},m(s,o){M(e,s,o),O(s,t,o),H(t,n),i=!0},p:je,i(s){i||(y(e.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),i=!1},d(s){z(e,s),s&&S(t)}}}function I0(r){let e,t;return e=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[T0]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i[1]&67108864&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function C0(r){let e,t,n,i;return e=new Hu({props:{size:24}}),{c(){P(e.$$.fragment),t=J("span"),n=ue("Сменить фон"),this.h()},l(s){B(e.$$.fragment,s),t=Q(s,"SPAN",{class:!0});var o=ne(t);n=fe(o,"Сменить фон"),o.forEach(S),this.h()},h(){x(t,"class","svelte-15zgtsu")},m(s,o){M(e,s,o),O(s,t,o),H(t,n),i=!0},p:je,i(s){i||(y(e.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),i=!1},d(s){z(e,s),s&&S(t)}}}function R0(r){let e,t;return e=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[C0]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i[1]&67108864&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function F0(r){let e,t,n,i;return e=new Os({}),{c(){P(e.$$.fragment),t=J("span"),n=ue("Копировать"),this.h()},l(s){B(e.$$.fragment,s),t=Q(s,"SPAN",{class:!0});var o=ne(t);n=fe(o,"Копировать"),o.forEach(S),this.h()},h(){x(t,"class","svelte-15zgtsu")},m(s,o){M(e,s,o),O(s,t,o),H(t,n),i=!0},p:je,i(s){i||(y(e.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),i=!1},d(s){z(e,s),s&&S(t)}}}function N0(r){let e,t,n,i,s;return e=new Gs({}),{c(){P(e.$$.fragment),t=se(),n=J("span"),i=ue("Новый блок"),this.h()},l(o){B(e.$$.fragment,o),t=oe(o),n=Q(o,"SPAN",{class:!0});var a=ne(n);i=fe(a,"Новый блок"),a.forEach(S),this.h()},h(){x(n,"class","svelte-15zgtsu")},m(o,a){M(e,o,a),O(o,t,a),O(o,n,a),H(n,i),s=!0},p:je,i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){k(e.$$.fragment,o),s=!1},d(o){z(e,o),o&&S(t),o&&S(n)}}}function P0(r){let e,t,n,i,s;return e=new Hs({}),{c(){P(e.$$.fragment),t=se(),n=J("span"),i=ue("С картинкой"),this.h()},l(o){B(e.$$.fragment,o),t=oe(o),n=Q(o,"SPAN",{class:!0});var a=ne(n);i=fe(a,"С картинкой"),a.forEach(S),this.h()},h(){x(n,"class","svelte-15zgtsu")},m(o,a){M(e,o,a),O(o,t,a),O(o,n,a),H(n,i),s=!0},p:je,i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){k(e.$$.fragment,o),s=!1},d(o){z(e,o),o&&S(t),o&&S(n)}}}function B0(r){let e,t,n,i;const s=[U0,z0],o=[];function a(l,u){return l[55].id==l[1].id&&l[1].content.type=="image"?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),n=De()},l(l){t.l(l),n=De()},m(l,u){o[e].m(l,u),O(l,n,u),i=!0},p(l,u){let f=e;e=a(l),e===f?o[e].p(l,u):(Ge(),k(o[f],1,1,()=>{o[f]=null}),He(),t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(n.parentNode,n))},i(l){i||(y(t),i=!0)},o(l){k(t),i=!1},d(l){o[e].d(l),l&&S(n)}}}function M0(r){let e,t,n,i;const s=[x0,L0],o=[];function a(l,u){return l[55].id==l[1].id&&l[1].content.type=="text"?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),n=De()},l(l){t.l(l),n=De()},m(l,u){o[e].m(l,u),O(l,n,u),i=!0},p(l,u){let f=e;e=a(l),e===f?o[e].p(l,u):(Ge(),k(o[f],1,1,()=>{o[f]=null}),He(),t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(n.parentNode,n))},i(l){i||(y(t),i=!0)},o(l){k(t),i=!1},d(l){o[e].d(l),l&&S(n)}}}function z0(r){let e,t;return e=new to({props:{content:r[55].content.value}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i[1]&16777216&&(s.content=n[55].content.value),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function U0(r){let e,t;return e=new to({props:{content:r[1].content.value,$$slots:{default:[D0]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i[0]&2&&(s.content=n[1].content.value),i[1]&83886080&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function D0(r){let e,t;function n(){return r[40](r[55])}function i(){return r[41](r[55])}function s(){return r[42](r[55])}function o(){return r[43](r[55])}return e=new mr({props:{up:!0,down:!0,remove:!0,copy:!0,value:r[55],iconSize:20}}),e.$on("up",n),e.$on("down",i),e.$on("remove",s),e.$on("copy",o),{c(){P(e.$$.fragment)},l(a){B(e.$$.fragment,a)},m(a,l){M(e,a,l),t=!0},p(a,l){r=a;const u={};l[1]&16777216&&(u.value=r[55]),e.$set(u)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){z(e,a)}}}function L0(r){let e,t;return e=new Ys({props:{content:r[55].content.value}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i[1]&16777216&&(s.content=n[55].content.value),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function x0(r){let e,t;return e=new Ys({props:{content:r[1].content.value,$$slots:{default:[G0]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p(n,i){const s={};i[0]&2&&(s.content=n[1].content.value),i[0]&3|i[1]&83886080&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function O0(r){let e,t,n,i;function s(l){r[34](l)}function o(l){r[35](l)}let a={frame:r[0],iconSize:20};return r[1].content.value.style!==void 0&&(a.style=r[1].content.value.style),r[1].container!==void 0&&(a.container=r[1].container),e=new vd({props:a}),_e.push(()=>ge(e,"style",s)),_e.push(()=>ge(e,"container",o)),{c(){P(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,u){M(e,l,u),i=!0},p(l,u){const f={};u[0]&1&&(f.frame=l[0]),!t&&u[0]&2&&(t=!0,f.style=l[1].content.value.style,be(()=>t=!1)),!n&&u[0]&2&&(n=!0,f.container=l[1].container,be(()=>n=!1)),e.$set(f)},i(l){i||(y(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){z(e,l)}}}function G0(r){let e,t;function n(){return r[36](r[55])}function i(){return r[37](r[55])}function s(){return r[38](r[55])}function o(){return r[39](r[55])}return e=new mr({props:{up:!0,down:!0,remove:!0,copy:!0,value:r[55],iconSize:20,$$slots:{default:[O0]},$$scope:{ctx:r}}}),e.$on("up",n),e.$on("down",i),e.$on("remove",s),e.$on("copy",o),{c(){P(e.$$.fragment)},l(a){B(e.$$.fragment,a)},m(a,l){M(e,a,l),t=!0},p(a,l){r=a;const u={};l[1]&16777216&&(u.value=r[55]),l[0]&3|l[1]&67108864&&(u.$$scope={dirty:l,ctx:r}),e.$set(u)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){z(e,a)}}}function H0(r){let e,t,n,i;const s=[M0,B0],o=[];function a(l,u){return l[55].content.type=="text"?0:l[55].content.type=="image"?1:-1}return~(e=a(r))&&(t=o[e]=s[e](r)),{c(){t&&t.c(),n=De()},l(l){t&&t.l(l),n=De()},m(l,u){~e&&o[e].m(l,u),O(l,n,u),i=!0},p(l,u){let f=e;e=a(l),e===f?~e&&o[e].p(l,u):(t&&(Ge(),k(o[f],1,1,()=>{o[f]=null}),He()),~e?(t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(n.parentNode,n)):t=null)},i(l){i||(y(t),i=!0)},o(l){k(t),i=!1},d(l){~e&&o[e].d(l),l&&S(n)}}}function j0(r){let e,t=r[54]+"",n;return{c(){e=J("span"),n=ue(t),this.h()},l(i){e=Q(i,"SPAN",{class:!0});var s=ne(e);n=fe(s,t),s.forEach(S),this.h()},h(){x(e,"class","svelte-15zgtsu")},m(i,s){O(i,e,s),H(e,n)},p(i,s){s[1]&8388608&&t!==(t=i[54]+"")&&st(n,t)},d(i){i&&S(e)}}}function W0(r){let e,t,n;function i(o){r[52](o)}let s={shaders:r[9],context:{frame:r[0]}};return r[1].effects!==void 0&&(s.value=r[1].effects),e=new Od({props:s}),_e.push(()=>ge(e,"value",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a[0]&512&&(l.shaders=o[9]),a[0]&1&&(l.context={frame:o[0]}),!t&&a[0]&2&&(t=!0,l.value=o[1].effects,be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function V0(r){let e,t,n;function i(o){r[51](o)}let s={frameHeight:r[0].height,frameWidth:r[0].width};return r[1].container!==void 0&&(s.container=r[1].container),e=new fd({props:s}),_e.push(()=>ge(e,"container",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a[0]&1&&(l.frameHeight=o[0].height),a[0]&1&&(l.frameWidth=o[0].width),!t&&a[0]&2&&(t=!0,l.container=o[1].container,be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function q0(r){let e,t,n;function i(o){r[49](o)}let s={};return r[1].content.value!==void 0&&(s.content=r[1].content.value),e=new w0({props:s}),_e.push(()=>ge(e,"content",i)),e.$on("change",r[50]),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};!t&&a[0]&2&&(t=!0,l.content=o[1].content.value,be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Z0(r){let e,t,n;function i(o){r[46](o)}let s={};return r[1].content.value!==void 0&&(s.content=r[1].content.value),e=new Mm({props:s}),_e.push(()=>ge(e,"content",i)),e.$on("change",r[47]),e.$on("addPattern",r[48]),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};!t&&a[0]&2&&(t=!0,l.content=o[1].content.value,be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function X0(r){let e,t,n,i;const s=[Z0,q0,V0,W0],o=[];function a(l,u){return l[54]==="Текст"&&l[1].content.type=="text"?0:l[54]==="Изображение"&&l[1].content.type=="image"?1:l[54]==="Контейнер"?2:l[54]==="Эффекты"?3:-1}return~(t=a(r))&&(n=o[t]=s[t](r)),{c(){e=J("div"),n&&n.c(),this.h()},l(l){e=Q(l,"DIV",{slot:!0});var u=ne(e);n&&n.l(u),u.forEach(S),this.h()},h(){x(e,"slot","content")},m(l,u){O(l,e,u),~t&&o[t].m(e,null),i=!0},p(l,u){let f=t;t=a(l),t===f?~t&&o[t].p(l,u):(n&&(Ge(),k(o[f],1,1,()=>{o[f]=null}),He()),~t?(n=o[t],n?n.p(l,u):(n=o[t]=s[t](l),n.c()),y(n,1),n.m(e,null)):n=null)},i(l){i||(y(n),i=!0)},o(l){k(n),i=!1},d(l){l&&S(e),~t&&o[t].d()}}}function K0(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_,g,$,A,w,R,I,U,q,j,L,V,C,F,b,K,pe,W,he,re,Ee,X,Z,ee,te,me,Le,Oe,Pe;n=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[y0]},$$scope:{ctx:r}}}),n.$on("click",r[12]);function ze(T){r[18](T)}let Be={height:"50%",items:r[6].frames,$$slots:{default:[k0,({item:T,index:D})=>({55:T,56:D}),({item:T,index:D})=>[0,(T?16777216:0)|(D?33554432:0)]]},$$scope:{ctx:r}};r[0]!==void 0&&(Be.active=r[0]),s=new Ur({props:Be}),_e.push(()=>ge(s,"active",ze)),s.$on("drop",Ir(r[19])),l=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[A0]},$$scope:{ctx:r}}}),l.$on("click",r[20]),f=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[S0]},$$scope:{ctx:r}}}),f.$on("click",r[21]),h=new Dr({props:{accept:".meme",$$slots:{default:[I0]},$$scope:{ctx:r}}}),h.$on("change",r[22]),p=new Sd({props:{version:r[7]}}),p.$on("openExample",r[23]),$=new Dr({props:{accept:"image/*",typeFilter:/^image\//,$$slots:{default:[R0]},$$scope:{ctx:r}}}),$.$on("change",r[24]),w=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[F0]},$$scope:{ctx:r}}}),w.$on("click",r[25]);function Ve(T){r[26](T)}function it(T){r[27](T)}let at={};r[5].available!==void 0&&(at.available=r[5].available),r[5].mode!==void 0&&(at.current=r[5].mode),I=new f0({props:at}),_e.push(()=>ge(I,"available",Ve)),_e.push(()=>ge(I,"current",it));function v(T){r[28](T)}function ie(T){r[29](T)}let Y={};r[3]!==void 0&&(Y.webgl=r[3]),r[4]!==void 0&&(Y.ui=r[4]),V=new Vf({props:Y}),_e.push(()=>ge(V,"webgl",v)),_e.push(()=>ge(V,"ui",ie)),V.$on("drop",Ir(r[30]));function N(T){r[31](T)}let E={};r[0]!==void 0&&(E.value=r[0]),K=new jd({props:E}),_e.push(()=>ge(K,"value",N)),Ee=new nt({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[N0]},$$scope:{ctx:r}}}),Ee.$on("click",r[32]),Z=new nt({props:{type:"primary",width:"256px",disablePadding:!0,$$slots:{default:[P0]},$$scope:{ctx:r}}}),Z.$on("click",r[33]);function G(T){r[44](T)}let ae={height:"25%",reverse:!0,items:r[0].blocks,$$slots:{default:[H0,({item:T})=>({55:T}),({item:T})=>[0,T?16777216:0]]},$$scope:{ctx:r}};return r[1]!==void 0&&(ae.active=r[1]),te=new Ur({props:ae}),_e.push(()=>ge(te,"active",G)),te.$on("drop",Ir(r[45])),Oe=new Ws({props:{tabs:r[1].content.type==="text"?["Текст","Контейнер","Эффекты"]:["Изображение","Контейнер","Эффекты"],$$slots:{content:[X0,({tab:T})=>({54:T}),({tab:T})=>[0,T?8388608:0]],default:[j0,({tab:T})=>({54:T}),({tab:T})=>[0,T?8388608:0]]},$$scope:{ctx:r}}}),{c(){e=J("article"),t=J("section"),P(n.$$.fragment),i=se(),P(s.$$.fragment),a=se(),P(l.$$.fragment),u=se(),P(f.$$.fragment),c=se(),P(h.$$.fragment),m=se(),P(p.$$.fragment),d=se(),_=J("section"),g=J("header"),P($.$$.fragment),A=se(),P(w.$$.fragment),R=se(),P(I.$$.fragment),j=se(),L=J("header"),P(V.$$.fragment),b=se(),P(K.$$.fragment),W=se(),he=J("section"),re=J("header"),P(Ee.$$.fragment),X=se(),P(Z.$$.fragment),ee=se(),P(te.$$.fragment),Le=se(),P(Oe.$$.fragment),this.h()},l(T){e=Q(T,"ARTICLE",{class:!0});var D=ne(e);t=Q(D,"SECTION",{class:!0});var le=ne(t);B(n.$$.fragment,le),i=oe(le),B(s.$$.fragment,le),a=oe(le),B(l.$$.fragment,le),u=oe(le),B(f.$$.fragment,le),c=oe(le),B(h.$$.fragment,le),m=oe(le),B(p.$$.fragment,le),le.forEach(S),d=oe(D),_=Q(D,"SECTION",{class:!0});var ve=ne(_);g=Q(ve,"HEADER",{class:!0});var de=ne(g);B($.$$.fragment,de),A=oe(de),B(w.$$.fragment,de),R=oe(de),B(I.$$.fragment,de),de.forEach(S),j=oe(ve),L=Q(ve,"HEADER",{class:!0});var Se=ne(L);B(V.$$.fragment,Se),Se.forEach(S),b=oe(ve),B(K.$$.fragment,ve),ve.forEach(S),W=oe(D),he=Q(D,"SECTION",{class:!0});var xe=ne(he);re=Q(xe,"HEADER",{style:!0});var Me=ne(re);B(Ee.$$.fragment,Me),X=oe(Me),B(Z.$$.fragment,Me),Me.forEach(S),ee=oe(xe),B(te.$$.fragment,xe),Le=oe(xe),B(Oe.$$.fragment,xe),xe.forEach(S),D.forEach(S),this.h()},h(){x(t,"class","svelte-15zgtsu"),x(g,"class","controls svelte-15zgtsu"),x(L,"class","canvas svelte-15zgtsu"),x(_,"class","svelte-15zgtsu"),lt(re,"display","flex"),x(he,"class","svelte-15zgtsu"),x(e,"class","svelte-15zgtsu")},m(T,D){O(T,e,D),H(e,t),M(n,t,null),H(t,i),M(s,t,null),H(t,a),M(l,t,null),H(t,u),M(f,t,null),H(t,c),M(h,t,null),H(t,m),M(p,t,null),H(e,d),H(e,_),H(_,g),M($,g,null),H(g,A),M(w,g,null),H(g,R),M(I,g,null),H(_,j),H(_,L),M(V,L,null),H(_,b),M(K,_,null),H(e,W),H(e,he),H(he,re),M(Ee,re,null),H(re,X),M(Z,re,null),H(he,ee),M(te,he,null),H(he,Le),M(Oe,he,null),Pe=!0},p(T,D){const le={};D[1]&67108864&&(le.$$scope={dirty:D,ctx:T}),n.$set(le);const ve={};D[0]&64&&(ve.items=T[6].frames),D[0]&4|D[1]&117440512&&(ve.$$scope={dirty:D,ctx:T}),!o&&D[0]&1&&(o=!0,ve.active=T[0],be(()=>o=!1)),s.$set(ve);const de={};D[1]&67108864&&(de.$$scope={dirty:D,ctx:T}),l.$set(de);const Se={};D[1]&67108864&&(Se.$$scope={dirty:D,ctx:T}),f.$set(Se);const xe={};D[1]&67108864&&(xe.$$scope={dirty:D,ctx:T}),h.$set(xe);const Me={};D[0]&128&&(Me.version=T[7]),p.$set(Me);const dt={};D[1]&67108864&&(dt.$$scope={dirty:D,ctx:T}),$.$set(dt);const xt={};D[1]&67108864&&(xt.$$scope={dirty:D,ctx:T}),w.$set(xt);const bt={};!U&&D[0]&32&&(U=!0,bt.available=T[5].available,be(()=>U=!1)),!q&&D[0]&32&&(q=!0,bt.current=T[5].mode,be(()=>q=!1)),I.$set(bt);const Bt={};!C&&D[0]&8&&(C=!0,Bt.webgl=T[3],be(()=>C=!1)),!F&&D[0]&16&&(F=!0,Bt.ui=T[4],be(()=>F=!1)),V.$set(Bt);const Je={};!pe&&D[0]&1&&(pe=!0,Je.value=T[0],be(()=>pe=!1)),K.$set(Je);const Qt={};D[1]&67108864&&(Qt.$$scope={dirty:D,ctx:T}),Ee.$set(Qt);const un={};D[1]&67108864&&(un.$$scope={dirty:D,ctx:T}),Z.$set(un);const vt={};D[0]&1&&(vt.items=T[0].blocks),D[0]&3|D[1]&83886080&&(vt.$$scope={dirty:D,ctx:T}),!me&&D[0]&2&&(me=!0,vt.active=T[1],be(()=>me=!1)),te.$set(vt);const fn={};D[0]&2&&(fn.tabs=T[1].content.type==="text"?["Текст","Контейнер","Эффекты"]:["Изображение","Контейнер","Эффекты"]),D[0]&515|D[1]&75497472&&(fn.$$scope={dirty:D,ctx:T}),Oe.$set(fn)},i(T){Pe||(y(n.$$.fragment,T),y(s.$$.fragment,T),y(l.$$.fragment,T),y(f.$$.fragment,T),y(h.$$.fragment,T),y(p.$$.fragment,T),y($.$$.fragment,T),y(w.$$.fragment,T),y(I.$$.fragment,T),y(V.$$.fragment,T),y(K.$$.fragment,T),y(Ee.$$.fragment,T),y(Z.$$.fragment,T),y(te.$$.fragment,T),y(Oe.$$.fragment,T),Pe=!0)},o(T){k(n.$$.fragment,T),k(s.$$.fragment,T),k(l.$$.fragment,T),k(f.$$.fragment,T),k(h.$$.fragment,T),k(p.$$.fragment,T),k($.$$.fragment,T),k(w.$$.fragment,T),k(I.$$.fragment,T),k(V.$$.fragment,T),k(K.$$.fragment,T),k(Ee.$$.fragment,T),k(Z.$$.fragment,T),k(te.$$.fragment,T),k(Oe.$$.fragment,T),Pe=!1},d(T){T&&S(e),z(n),z(s),z(l),z(f),z(h),z(p),z($),z(w),z(I),z(V),z(K),z(Ee),z(Z),z(te),z(Oe)}}}function jn(r){r.preventDefault()}function Ir(r){return e=>{var i;e.preventDefault();const t=(i=e.dataTransfer)==null?void 0:i.files;if(!t)return;const n=Array.from(t).filter(s=>{var o;return(o=s.type)==null?void 0:o.match(/^image/)});n.length&&r(n,e)}}function Y0(r,e,t){let{meme:n}=e,{frame:i}=e,{block:s}=e,{previews:o={}}=e,{canvasWebgl:a}=e,{canvasUI:l}=e,{version:u}=e,{memeExampleURL:f}=e,{effectsShaders:c}=e,{editorState:h}=e;const m=yt();function p(T){m("changeBackground",{file:T})}function d(T){var ve,de;const D=document.activeElement;if(D instanceof HTMLInputElement||D instanceof HTMLTextAreaElement)return;console.log(T);const le=(ve=T.clipboardData)==null?void 0:ve.items;if(le)for(let Se=0;Se<le.length;Se++){const xe=le[Se];if(!((de=xe.type)!=null&&de.match(/^image/)))continue;const Me=xe.getAsFile();Me&&m("modifyImageBlock",{block:s,file:Me});return}}wn(()=>(document.addEventListener("paste",d),document.addEventListener("dragover",jn),document.addEventListener("drop",jn),()=>{document.removeEventListener("paste",d),document.removeEventListener("dragover",jn),document.removeEventListener("drop",jn)}));const _=()=>m("createFrame"),g=T=>m("shiftFrame",{frame:T,shift:-1}),$=T=>m("shiftFrame",{frame:T,shift:1}),A=T=>m("deleteFrame",{frame:T}),w=T=>m("createFrame",{origin:T});function R(T,D){r.$$.not_equal(o[D.id],T)&&(o[D.id]=T,t(2,o))}function I(T){i=T,t(0,i)}const U=T=>m("framesFromImages",{files:T}),q=()=>m("renderMeme",{meme:n}),j=()=>m("saveMeme",{meme:n}),L=T=>m("openMeme",{file:T.detail[0]}),V=()=>fetch(f).then(T=>T.blob()).then(T=>m("openMeme",{file:T})),C=T=>p(T.detail[0]),F=()=>m("frameToClipboard",{frame:i});function b(T){r.$$.not_equal(h.available,T)&&(h.available=T,t(5,h))}function K(T){r.$$.not_equal(h.mode,T)&&(h.mode=T,t(5,h))}function pe(T){a=T,t(3,a)}function W(T){l=T,t(4,l)}const he=(T,D)=>m(D.ctrlKey?"createImageBlock":"changeBackground",{file:T[0]});function re(T){i=T,t(0,i)}const Ee=()=>m("createTextBlock"),X=()=>m("createImageBlock",{});function Z(T){r.$$.not_equal(s.content.value.style,T)&&(s.content.value.style=T,t(1,s))}function ee(T){r.$$.not_equal(s.container,T)&&(s.container=T,t(1,s))}const te=T=>m("shiftBlock",{block:T,shift:1}),me=T=>m("shiftBlock",{block:T,shift:-1}),Le=T=>m("deleteBlock",{block:T}),Oe=T=>m("cloneBlock",{block:T}),Pe=T=>m("shiftBlock",{block:T,shift:1}),ze=T=>m("shiftBlock",{block:T,shift:-1}),Be=T=>m("deleteBlock",{block:T}),Ve=T=>m("cloneBlock",{block:T});function it(T){s=T,t(1,s)}const at=T=>T.forEach(D=>m("createImageBlock",{file:D}));function v(T){r.$$.not_equal(s.content.value,T)&&(s.content.value=T,t(1,s))}function ie(T){Ae.call(this,r,T)}function Y(T){Ae.call(this,r,T)}function N(T){r.$$.not_equal(s.content.value,T)&&(s.content.value=T,t(1,s))}const E=T=>m("modifyImageBlock",{file:T.detail[0],block:s});function G(T){r.$$.not_equal(s.container,T)&&(s.container=T,t(1,s))}function ae(T){r.$$.not_equal(s.effects,T)&&(s.effects=T,t(1,s))}return r.$$set=T=>{"meme"in T&&t(6,n=T.meme),"frame"in T&&t(0,i=T.frame),"block"in T&&t(1,s=T.block),"previews"in T&&t(2,o=T.previews),"canvasWebgl"in T&&t(3,a=T.canvasWebgl),"canvasUI"in T&&t(4,l=T.canvasUI),"version"in T&&t(7,u=T.version),"memeExampleURL"in T&&t(8,f=T.memeExampleURL),"effectsShaders"in T&&t(9,c=T.effectsShaders),"editorState"in T&&t(5,h=T.editorState)},[i,s,o,a,l,h,n,u,f,c,m,p,_,g,$,A,w,R,I,U,q,j,L,V,C,F,b,K,pe,W,he,re,Ee,X,Z,ee,te,me,Le,Oe,Pe,ze,Be,Ve,it,at,v,ie,Y,N,E,G,ae]}class J0 extends we{constructor(e){super(),ye(this,e,Y0,K0,$e,{meme:6,frame:0,block:1,previews:2,canvasWebgl:3,canvasUI:4,version:7,memeExampleURL:8,effectsShaders:9,editorState:5},null,[-1,-1])}}function Q0(r){let e,t,n;const i=r[2].default,s=Ce(i,r,r[1],null);return{c(){e=J("div"),s&&s.c(),this.h()},l(o){e=Q(o,"DIV",{style:!0,class:!0});var a=ne(e);s&&s.l(a),a.forEach(S),this.h()},h(){x(e,"style",t=$s(r[0])),x(e,"class","svelte-18sulqr")},m(o,a){O(o,e,a),s&&s.m(e,null),n=!0},p(o,[a]){s&&s.p&&(!n||a&2)&&Re(s,i,o,o[1],n?Ne(i,o[1],a,null):Fe(o[1]),null),(!n||a&1&&t!==(t=$s(o[0])))&&x(e,"style",t)},i(o){n||(y(s,o),n=!0)},o(o){k(s,o),n=!1},d(o){o&&S(e),s&&s.d(o)}}}function $s(r){return Object.entries(r).map(([e,t])=>`--${e.split(new RegExp("(?<=[a-z])(?=[A-Z])")).map(i=>i.toLowerCase()).join("-")}: ${t};`).join("")}function ep(r,e,t){let{$$slots:n={},$$scope:i}=e,{theme:s}=e;return r.$$set=o=>{"theme"in o&&t(0,s=o.theme),"$$scope"in o&&t(1,i=o.$$scope)},[s,i,n]}class tp extends we{constructor(e){super(),ye(this,e,ep,Q0,$e,{theme:0})}}const np={textSecondary:"white",secondary:"#34352F",secondaryHover:"#3E3D32",secondaryActive:"#272822",borderSecondary:"1px solid #111111",borderSecondaryHover:"1px solid #222222",borderSecondaryActive:"1px solid #aaaaaa",border:"none",textError:"#ff0000"},ws=Pn(np);class no{constructor(e){Te(this,"i",0);this.prefix=e}generate(){return`${this.prefix}-${this.i++}`}}function Rn(r,e){const t=URL.createObjectURL(r);return e(t).finally(()=>URL.revokeObjectURL(t))}function ro(r){return new Promise((e,t)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=function(){return e(n)},n.onerror=function(){return t(new Error(`Can't load image ${r}`))},n.src=r})}function ys(r){return e=>{const t=document.createElement("a");t.download=r,t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href)}}/* @license twgl.js 5.3.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let ft=Float32Array;function rp(r){const e=ft;return ft=r,e}function Ut(r,e,t){const n=new ft(3);return r&&(n[0]=r),e&&(n[1]=e),t&&(n[2]=t),n}function ip(r,e,t){return t=t||new ft(3),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function io(r,e,t){return t=t||new ft(3),t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function sp(r,e,t,n){return n=n||new ft(3),n[0]=r[0]+t*(e[0]-r[0]),n[1]=r[1]+t*(e[1]-r[1]),n[2]=r[2]+t*(e[2]-r[2]),n}function op(r,e,t,n){return n=n||new ft(3),n[0]=r[0]+t[0]*(e[0]-r[0]),n[1]=r[1]+t[1]*(e[1]-r[1]),n[2]=r[2]+t[2]*(e[2]-r[2]),n}function ap(r,e,t){return t=t||new ft(3),t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function lp(r,e,t){return t=t||new ft(3),t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function up(r,e,t){return t=t||new ft(3),t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function fp(r,e,t){return t=t||new ft(3),t[0]=r[0]/e,t[1]=r[1]/e,t[2]=r[2]/e,t}function Lr(r,e,t){t=t||new ft(3);const n=r[2]*e[0]-r[0]*e[2],i=r[0]*e[1]-r[1]*e[0];return t[0]=r[1]*e[2]-r[2]*e[1],t[1]=n,t[2]=i,t}function cp(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function hp(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])}function mp(r){return r[0]*r[0]+r[1]*r[1]+r[2]*r[2]}function dp(r,e){const t=r[0]-e[0],n=r[1]-e[1],i=r[2]-e[2];return Math.sqrt(t*t+n*n+i*i)}function pp(r,e){const t=r[0]-e[0],n=r[1]-e[1],i=r[2]-e[2];return t*t+n*n+i*i}function Jn(r,e){e=e||new ft(3);const t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],n=Math.sqrt(t);return n>1e-5?(e[0]=r[0]/n,e[1]=r[1]/n,e[2]=r[2]/n):(e[0]=0,e[1]=0,e[2]=0),e}function _p(r,e){return e=e||new ft(3),e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function gp(r,e){return e=e||new ft(3),e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function bp(r,e,t){return t=t||new ft(3),t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function vp(r,e,t){return t=t||new ft(3),t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}var Wn=Object.freeze({__proto__:null,add:ip,copy:gp,create:Ut,cross:Lr,distance:dp,distanceSq:pp,divide:vp,divScalar:fp,dot:cp,lerp:sp,lerpV:op,length:hp,lengthSq:mp,max:ap,min:lp,mulScalar:up,multiply:bp,negate:_p,normalize:Jn,setDefaultType:rp,subtract:io});let Ye=Float32Array;function $p(r){const e=Ye;return Ye=r,e}function wp(r,e){return e=e||new Ye(16),e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e[4]=-r[4],e[5]=-r[5],e[6]=-r[6],e[7]=-r[7],e[8]=-r[8],e[9]=-r[9],e[10]=-r[10],e[11]=-r[11],e[12]=-r[12],e[13]=-r[13],e[14]=-r[14],e[15]=-r[15],e}function yp(){return new Ye(16).fill(0)}function so(r,e){return e=e||new Ye(16),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function oo(r){return r=r||new Ye(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ep(r,e){if(e=e||new Ye(16),e===r){let $;return $=r[1],r[1]=r[4],r[4]=$,$=r[2],r[2]=r[8],r[8]=$,$=r[3],r[3]=r[12],r[12]=$,$=r[6],r[6]=r[9],r[9]=$,$=r[7],r[7]=r[13],r[13]=$,$=r[11],r[11]=r[14],r[14]=$,e}const t=r[0*4+0],n=r[0*4+1],i=r[0*4+2],s=r[0*4+3],o=r[1*4+0],a=r[1*4+1],l=r[1*4+2],u=r[1*4+3],f=r[2*4+0],c=r[2*4+1],h=r[2*4+2],m=r[2*4+3],p=r[3*4+0],d=r[3*4+1],_=r[3*4+2],g=r[3*4+3];return e[0]=t,e[1]=o,e[2]=f,e[3]=p,e[4]=n,e[5]=a,e[6]=c,e[7]=d,e[8]=i,e[9]=l,e[10]=h,e[11]=_,e[12]=s,e[13]=u,e[14]=m,e[15]=g,e}function ao(r,e){e=e||new Ye(16);const t=r[0*4+0],n=r[0*4+1],i=r[0*4+2],s=r[0*4+3],o=r[1*4+0],a=r[1*4+1],l=r[1*4+2],u=r[1*4+3],f=r[2*4+0],c=r[2*4+1],h=r[2*4+2],m=r[2*4+3],p=r[3*4+0],d=r[3*4+1],_=r[3*4+2],g=r[3*4+3],$=h*g,A=_*m,w=l*g,R=_*u,I=l*m,U=h*u,q=i*g,j=_*s,L=i*m,V=h*s,C=i*u,F=l*s,b=f*d,K=p*c,pe=o*d,W=p*a,he=o*c,re=f*a,Ee=t*d,X=p*n,Z=t*c,ee=f*n,te=t*a,me=o*n,Le=$*a+R*c+I*d-(A*a+w*c+U*d),Oe=A*n+q*c+V*d-($*n+j*c+L*d),Pe=w*n+j*a+C*d-(R*n+q*a+F*d),ze=U*n+L*a+F*c-(I*n+V*a+C*c),Be=1/(t*Le+o*Oe+f*Pe+p*ze);return e[0]=Be*Le,e[1]=Be*Oe,e[2]=Be*Pe,e[3]=Be*ze,e[4]=Be*(A*o+w*f+U*p-($*o+R*f+I*p)),e[5]=Be*($*t+j*f+L*p-(A*t+q*f+V*p)),e[6]=Be*(R*t+q*o+F*p-(w*t+j*o+C*p)),e[7]=Be*(I*t+V*o+C*f-(U*t+L*o+F*f)),e[8]=Be*(b*u+W*m+he*g-(K*u+pe*m+re*g)),e[9]=Be*(K*s+Ee*m+ee*g-(b*s+X*m+Z*g)),e[10]=Be*(pe*s+X*u+te*g-(W*s+Ee*u+me*g)),e[11]=Be*(re*s+Z*u+me*m-(he*s+ee*u+te*m)),e[12]=Be*(pe*h+re*_+K*l-(he*_+b*l+W*h)),e[13]=Be*(Z*_+b*i+X*h-(Ee*h+ee*_+K*i)),e[14]=Be*(Ee*l+me*_+W*i-(te*_+pe*i+X*l)),e[15]=Be*(te*h+he*i+ee*l-(Z*l+me*h+re*i)),e}function kp(r,e,t){t=t||new Ye(16);const n=r[0],i=r[1],s=r[2],o=r[3],a=r[4+0],l=r[4+1],u=r[4+2],f=r[4+3],c=r[8+0],h=r[8+1],m=r[8+2],p=r[8+3],d=r[12+0],_=r[12+1],g=r[12+2],$=r[12+3],A=e[0],w=e[1],R=e[2],I=e[3],U=e[4+0],q=e[4+1],j=e[4+2],L=e[4+3],V=e[8+0],C=e[8+1],F=e[8+2],b=e[8+3],K=e[12+0],pe=e[12+1],W=e[12+2],he=e[12+3];return t[0]=n*A+a*w+c*R+d*I,t[1]=i*A+l*w+h*R+_*I,t[2]=s*A+u*w+m*R+g*I,t[3]=o*A+f*w+p*R+$*I,t[4]=n*U+a*q+c*j+d*L,t[5]=i*U+l*q+h*j+_*L,t[6]=s*U+u*q+m*j+g*L,t[7]=o*U+f*q+p*j+$*L,t[8]=n*V+a*C+c*F+d*b,t[9]=i*V+l*C+h*F+_*b,t[10]=s*V+u*C+m*F+g*b,t[11]=o*V+f*C+p*F+$*b,t[12]=n*K+a*pe+c*W+d*he,t[13]=i*K+l*pe+h*W+_*he,t[14]=s*K+u*pe+m*W+g*he,t[15]=o*K+f*pe+p*W+$*he,t}function Ap(r,e,t){return t=t||oo(),r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11]),t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Sp(r,e){return e=e||Ut(),e[0]=r[12],e[1]=r[13],e[2]=r[14],e}function Tp(r,e,t){t=t||Ut();const n=e*4;return t[0]=r[n+0],t[1]=r[n+1],t[2]=r[n+2],t}function Ip(r,e,t,n){n!==r&&(n=so(r,n));const i=t*4;return n[i+0]=e[0],n[i+1]=e[1],n[i+2]=e[2],n}function Cp(r,e,t,n,i){i=i||new Ye(16);const s=Math.tan(Math.PI*.5-.5*r),o=1/(t-n);return i[0]=s/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(t+n)*o,i[11]=-1,i[12]=0,i[13]=0,i[14]=t*n*o*2,i[15]=0,i}function Rp(r,e,t,n,i,s,o){return o=o||new Ye(16),o[0]=2/(e-r),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/(n-t),o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2/(i-s),o[11]=0,o[12]=(e+r)/(r-e),o[13]=(n+t)/(t-n),o[14]=(s+i)/(i-s),o[15]=1,o}function Fp(r,e,t,n,i,s,o){o=o||new Ye(16);const a=e-r,l=n-t,u=i-s;return o[0]=2*i/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*i/l,o[6]=0,o[7]=0,o[8]=(r+e)/a,o[9]=(n+t)/l,o[10]=s/u,o[11]=-1,o[12]=0,o[13]=0,o[14]=i*s/u,o[15]=0,o}let Ot,en,Mt;function Np(r,e,t,n){return n=n||new Ye(16),Ot=Ot||Ut(),en=en||Ut(),Mt=Mt||Ut(),Jn(io(r,e,Mt),Mt),Jn(Lr(t,Mt,Ot),Ot),Jn(Lr(Mt,Ot,en),en),n[0]=Ot[0],n[1]=Ot[1],n[2]=Ot[2],n[3]=0,n[4]=en[0],n[5]=en[1],n[6]=en[2],n[7]=0,n[8]=Mt[0],n[9]=Mt[1],n[10]=Mt[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function Pp(r,e){return e=e||new Ye(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Bp(r,e,t){t=t||new Ye(16);const n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],l=r[2],u=r[3],f=r[1*4+0],c=r[1*4+1],h=r[1*4+2],m=r[1*4+3],p=r[2*4+0],d=r[2*4+1],_=r[2*4+2],g=r[2*4+3],$=r[3*4+0],A=r[3*4+1],w=r[3*4+2],R=r[3*4+3];return r!==t&&(t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=f,t[5]=c,t[6]=h,t[7]=m,t[8]=p,t[9]=d,t[10]=_,t[11]=g),t[12]=o*n+f*i+p*s+$,t[13]=a*n+c*i+d*s+A,t[14]=l*n+h*i+_*s+w,t[15]=u*n+m*i+g*s+R,t}function Mp(r,e){e=e||new Ye(16);const t=Math.cos(r),n=Math.sin(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zp(r,e,t){t=t||new Ye(16);const n=r[4],i=r[5],s=r[6],o=r[7],a=r[8],l=r[9],u=r[10],f=r[11],c=Math.cos(e),h=Math.sin(e);return t[4]=c*n+h*a,t[5]=c*i+h*l,t[6]=c*s+h*u,t[7]=c*o+h*f,t[8]=c*a-h*n,t[9]=c*l-h*i,t[10]=c*u-h*s,t[11]=c*f-h*o,r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t}function Up(r,e){e=e||new Ye(16);const t=Math.cos(r),n=Math.sin(r);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Dp(r,e,t){t=t||new Ye(16);const n=r[0*4+0],i=r[0*4+1],s=r[0*4+2],o=r[0*4+3],a=r[2*4+0],l=r[2*4+1],u=r[2*4+2],f=r[2*4+3],c=Math.cos(e),h=Math.sin(e);return t[0]=c*n-h*a,t[1]=c*i-h*l,t[2]=c*s-h*u,t[3]=c*o-h*f,t[8]=c*a+h*n,t[9]=c*l+h*i,t[10]=c*u+h*s,t[11]=c*f+h*o,r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t}function Lp(r,e){e=e||new Ye(16);const t=Math.cos(r),n=Math.sin(r);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xp(r,e,t){t=t||new Ye(16);const n=r[0*4+0],i=r[0*4+1],s=r[0*4+2],o=r[0*4+3],a=r[1*4+0],l=r[1*4+1],u=r[1*4+2],f=r[1*4+3],c=Math.cos(e),h=Math.sin(e);return t[0]=c*n+h*a,t[1]=c*i+h*l,t[2]=c*s+h*u,t[3]=c*o+h*f,t[4]=c*a-h*n,t[5]=c*l-h*i,t[6]=c*u-h*s,t[7]=c*f-h*o,r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t}function Op(r,e,t){t=t||new Ye(16);let n=r[0],i=r[1],s=r[2];const o=Math.sqrt(n*n+i*i+s*s);n/=o,i/=o,s/=o;const a=n*n,l=i*i,u=s*s,f=Math.cos(e),c=Math.sin(e),h=1-f;return t[0]=a+(1-a)*f,t[1]=n*i*h+s*c,t[2]=n*s*h-i*c,t[3]=0,t[4]=n*i*h-s*c,t[5]=l+(1-l)*f,t[6]=i*s*h+n*c,t[7]=0,t[8]=n*s*h+i*c,t[9]=i*s*h-n*c,t[10]=u+(1-u)*f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Gp(r,e,t,n){n=n||new Ye(16);let i=e[0],s=e[1],o=e[2];const a=Math.sqrt(i*i+s*s+o*o);i/=a,s/=a,o/=a;const l=i*i,u=s*s,f=o*o,c=Math.cos(t),h=Math.sin(t),m=1-c,p=l+(1-l)*c,d=i*s*m+o*h,_=i*o*m-s*h,g=i*s*m-o*h,$=u+(1-u)*c,A=s*o*m+i*h,w=i*o*m+s*h,R=s*o*m-i*h,I=f+(1-f)*c,U=r[0],q=r[1],j=r[2],L=r[3],V=r[4],C=r[5],F=r[6],b=r[7],K=r[8],pe=r[9],W=r[10],he=r[11];return n[0]=p*U+d*V+_*K,n[1]=p*q+d*C+_*pe,n[2]=p*j+d*F+_*W,n[3]=p*L+d*b+_*he,n[4]=g*U+$*V+A*K,n[5]=g*q+$*C+A*pe,n[6]=g*j+$*F+A*W,n[7]=g*L+$*b+A*he,n[8]=w*U+R*V+I*K,n[9]=w*q+R*C+I*pe,n[10]=w*j+R*F+I*W,n[11]=w*L+R*b+I*he,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n}function Hp(r,e){return e=e||new Ye(16),e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jp(r,e,t){t=t||new Ye(16);const n=e[0],i=e[1],s=e[2];return t[0]=n*r[0*4+0],t[1]=n*r[0*4+1],t[2]=n*r[0*4+2],t[3]=n*r[0*4+3],t[4]=i*r[1*4+0],t[5]=i*r[1*4+1],t[6]=i*r[1*4+2],t[7]=i*r[1*4+3],t[8]=s*r[2*4+0],t[9]=s*r[2*4+1],t[10]=s*r[2*4+2],t[11]=s*r[2*4+3],r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t}function Wp(r,e,t){t=t||Ut();const n=e[0],i=e[1],s=e[2],o=n*r[0*4+3]+i*r[1*4+3]+s*r[2*4+3]+r[3*4+3];return t[0]=(n*r[0*4+0]+i*r[1*4+0]+s*r[2*4+0]+r[3*4+0])/o,t[1]=(n*r[0*4+1]+i*r[1*4+1]+s*r[2*4+1]+r[3*4+1])/o,t[2]=(n*r[0*4+2]+i*r[1*4+2]+s*r[2*4+2]+r[3*4+2])/o,t}function Vp(r,e,t){t=t||Ut();const n=e[0],i=e[1],s=e[2];return t[0]=n*r[0*4+0]+i*r[1*4+0]+s*r[2*4+0],t[1]=n*r[0*4+1]+i*r[1*4+1]+s*r[2*4+1],t[2]=n*r[0*4+2]+i*r[1*4+2]+s*r[2*4+2],t}function qp(r,e,t){t=t||Ut();const n=ao(r),i=e[0],s=e[1],o=e[2];return t[0]=i*n[0*4+0]+s*n[0*4+1]+o*n[0*4+2],t[1]=i*n[1*4+0]+s*n[1*4+1]+o*n[1*4+2],t[2]=i*n[2*4+0]+s*n[2*4+1]+o*n[2*4+2],t}var ut=Object.freeze({__proto__:null,axisRotate:Gp,axisRotation:Op,copy:so,create:yp,frustum:Fp,getAxis:Tp,getTranslation:Sp,identity:oo,inverse:ao,lookAt:Np,multiply:kp,negate:wp,ortho:Rp,perspective:Cp,rotateX:zp,rotateY:Dp,rotateZ:xp,rotationX:Mp,rotationY:Up,rotationZ:Lp,scale:jp,scaling:Hp,setAxis:Ip,setDefaultType:$p,setTranslation:Ap,transformDirection:Vp,transformNormal:qp,transformPoint:Wp,translate:Bp,translation:Pp,transpose:Ep});const Qr=5120,Bn=5121,ei=5122,ti=5123,ni=5124,ri=5125,ii=5126,Zp=32819,Xp=32820,Kp=33635,Yp=5131,Jp=33640,Qp=35899,e1=35902,t1=36269,n1=34042,lo={};{const r=lo;r[Qr]=Int8Array,r[Bn]=Uint8Array,r[ei]=Int16Array,r[ti]=Uint16Array,r[ni]=Int32Array,r[ri]=Uint32Array,r[ii]=Float32Array,r[Zp]=Uint16Array,r[Xp]=Uint16Array,r[Kp]=Uint16Array,r[Yp]=Uint16Array,r[Jp]=Uint32Array,r[Qp]=Uint32Array,r[e1]=Uint32Array,r[t1]=Uint32Array,r[n1]=Uint32Array}function si(r){if(r instanceof Int8Array)return Qr;if(r instanceof Uint8Array||r instanceof Uint8ClampedArray)return Bn;if(r instanceof Int16Array)return ei;if(r instanceof Uint16Array)return ti;if(r instanceof Int32Array)return ni;if(r instanceof Uint32Array)return ri;if(r instanceof Float32Array)return ii;throw new Error("unsupported typed array type")}function uo(r){if(r===Int8Array)return Qr;if(r===Uint8Array||r===Uint8ClampedArray)return Bn;if(r===Int16Array)return ei;if(r===Uint16Array)return ti;if(r===Int32Array)return ni;if(r===Uint32Array)return ri;if(r===Float32Array)return ii;throw new Error("unsupported typed array type")}function fo(r){const e=lo[r];if(!e)throw new Error("unknown gl type");return e}const sr=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function co(...r){console.error(...r)}const Es=new Map;function dr(r,e){if(!r||typeof r!="object")return!1;let t=Es.get(e);t||(t=new WeakMap,Es.set(e,t));let n=t.get(r);if(n===void 0){const i=Object.prototype.toString.call(r);n=i.substring(8,i.length-1)===e,t.set(r,n)}return n}function r1(r,e){return typeof WebGLBuffer<"u"&&dr(e,"WebGLBuffer")}function ho(r,e){return typeof WebGLRenderbuffer<"u"&&dr(e,"WebGLRenderbuffer")}function pr(r,e){return typeof WebGLTexture<"u"&&dr(e,"WebGLTexture")}function i1(r,e){return typeof WebGLSampler<"u"&&dr(e,"WebGLSampler")}const mo=35044,on=34962,s1=34963,o1=34660,a1=5120,l1=5121,u1=5122,f1=5123,c1=5124,h1=5125,po=5126,_o={attribPrefix:""};function m1(r,e,t,n,i){r.bindBuffer(e,t),r.bufferData(e,n,i||mo)}function go(r,e,t,n){if(r1(r,e))return e;t=t||on;const i=r.createBuffer();return m1(r,t,i,e,n),i}function bo(r){return r==="indices"}function d1(r){return r===Int8Array||r===Uint8Array}function p1(r){return r.length?r:r.data}const _1=/coord|texture/i,g1=/color|colour/i;function b1(r,e){let t;if(_1.test(r)?t=2:g1.test(r)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${r}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function v1(r,e,t){return r.numComponents||r.size||b1(e,t||p1(r).length)}function vo(r,e){if(sr(r))return r;if(sr(r.data))return r.data;Array.isArray(r)&&(r={data:r});let t=r.type?oi(r.type):void 0;return t||(bo(e)?t=Uint16Array:t=Float32Array),new t(r.data)}function $1(r){return typeof r=="number"?r:r?uo(r):po}function oi(r){return typeof r=="number"?fo(r):r||Float32Array}function w1(r,e){return{buffer:e.buffer,numValues:2*3*4,type:$1(e.type),arrayType:oi(e.type)}}function y1(r,e){const t=e.data||e,n=oi(e.type),i=t*n.BYTES_PER_ELEMENT,s=r.createBuffer();return r.bindBuffer(on,s),r.bufferData(on,i,e.drawType||mo),{buffer:s,numValues:t,type:uo(n),arrayType:n}}function E1(r,e,t){const n=vo(e,t);return{arrayType:n.constructor,buffer:go(r,n,void 0,e.drawType),type:si(n),numValues:0}}function k1(r,e){const t={};return Object.keys(e).forEach(function(n){if(!bo(n)){const i=e[n],s=i.attrib||i.name||i.attribName||_o.attribPrefix+n;if(i.value){if(!Array.isArray(i.value)&&!sr(i.value))throw new Error("array.value is not array or typedarray");t[s]={value:i.value}}else{let o;i.buffer&&i.buffer instanceof WebGLBuffer?o=w1:typeof i=="number"||typeof i.data=="number"?o=y1:o=E1;const{buffer:a,type:l,numValues:u,arrayType:f}=o(r,i,n),c=i.normalize!==void 0?i.normalize:d1(f),h=v1(i,n,u);t[s]={buffer:a,numComponents:h,type:l,normalize:c,stride:i.stride||0,offset:i.offset||0,divisor:i.divisor===void 0?void 0:i.divisor,drawType:i.drawType}}}}),r.bindBuffer(on,null),t}function A1(r,e){return e===a1||e===l1?1:e===u1||e===f1?2:e===c1||e===h1||e===po?4:0}const Cr=["position","positions","a_position"];function S1(r,e){let t,n;for(n=0;n<Cr.length&&(t=Cr[n],!(t in e||(t=_o.attribPrefix+t,t in e)));++n);n===Cr.length&&(t=Object.keys(e)[0]);const i=e[t];if(!i.buffer)return 1;r.bindBuffer(on,i.buffer);const s=r.getBufferParameter(on,o1);r.bindBuffer(on,null);const o=A1(r,i.type),a=s/o,l=i.numComponents||i.size,u=a/l;if(u%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}function ks(r,e,t){const n=k1(r,e),i=Object.assign({},t||{});i.attribs=Object.assign({},t?t.attribs:{},n);const s=e.indices;if(s){const o=vo(s,"indices");i.indices=go(r,o,s1),i.numElements=o.length,i.elementType=si(o)}else i.numElements||(i.numElements=S1(r,i.attribs));return i}function Un(r){return!!r.texStorage2D}const $o=function(){const r={},e={};function t(n){const i=n.constructor.name;if(!r[i]){for(const s in n)if(typeof n[s]=="number"){const o=e[n[s]];e[n[s]]=o?`${o} | ${s}`:s}r[i]=!0}}return function(i,s){return t(i),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),Kt={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},vn=sr,wo=function(){let r;return function(){return r=r||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),r}}(),As=6406,Nt=6407,et=6408,Ss=6409,Ts=6410,Tn=6402,Is=34041,or=33071,T1=9728,I1=9729,Lt=3553,Dt=34067,Vt=32879,qt=35866,_r=34069,C1=34070,R1=34071,F1=34072,N1=34073,P1=34074,xr=10241,Or=10240,ar=10242,lr=10243,Cs=32882,B1=33082,M1=33083,z1=33084,U1=33085,ai=3317,yo=3314,Eo=32878,ko=3316,Ao=3315,So=32877,D1=37443,L1=37441,x1=37440,O1=33321,G1=36756,H1=33325,j1=33326,W1=33330,V1=33329,q1=33338,Z1=33337,X1=33340,K1=33339,Y1=33323,J1=36757,Q1=33327,e_=33328,t_=33336,n_=33335,r_=33332,i_=33331,s_=33334,o_=33333,a_=32849,l_=35905,u_=36194,f_=36758,c_=35898,h_=35901,m_=34843,d_=34837,p_=36221,__=36239,g_=36215,b_=36233,v_=36209,$_=36227,w_=32856,y_=35907,E_=36759,k_=32855,A_=32854,S_=32857,T_=34842,I_=34836,C_=36220,R_=36238,F_=36975,N_=36214,P_=36232,B_=36226,M_=36208,z_=33189,U_=33190,D_=36012,L_=36013,x_=35056,Gt=5120,Qe=5121,Vn=5122,cn=5123,qn=5124,tn=5125,ct=5126,Rs=32819,Fs=32820,Ns=33635,St=5131,In=36193,Rr=33640,O_=35899,G_=35902,H_=36269,j_=34042,Zn=33319,hn=33320,Xn=6403,mn=36244,dn=36248,nn=36249;let Fr;function gr(r){if(!Fr){const e={};e[As]={textureFormat:As,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Qe,St,In,ct]},e[Ss]={textureFormat:Ss,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Qe,St,In,ct]},e[Ts]={textureFormat:Ts,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Qe,St,In,ct]},e[Nt]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Qe,St,In,ct,Ns]},e[et]={textureFormat:et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Qe,St,In,ct,Rs,Fs]},e[Tn]={textureFormat:Tn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[tn,cn]},e[O1]={textureFormat:Xn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Qe]},e[G1]={textureFormat:Xn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Gt]},e[H1]={textureFormat:Xn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[ct,St]},e[j1]={textureFormat:Xn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[ct]},e[W1]={textureFormat:mn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Qe]},e[V1]={textureFormat:mn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Gt]},e[r_]={textureFormat:mn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[cn]},e[i_]={textureFormat:mn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Vn]},e[s_]={textureFormat:mn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tn]},e[o_]={textureFormat:mn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qn]},e[Y1]={textureFormat:Zn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Qe]},e[J1]={textureFormat:Zn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Gt]},e[Q1]={textureFormat:Zn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[ct,St]},e[e_]={textureFormat:Zn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[ct]},e[t_]={textureFormat:hn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Qe]},e[n_]={textureFormat:hn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Gt]},e[q1]={textureFormat:hn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[cn]},e[Z1]={textureFormat:hn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vn]},e[X1]={textureFormat:hn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[tn]},e[K1]={textureFormat:hn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[qn]},e[a_]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Qe]},e[l_]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Qe]},e[u_]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Qe,Ns]},e[f_]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Gt]},e[c_]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ct,St,O_]},e[h_]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ct,St,G_]},e[m_]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[ct,St]},e[d_]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ct]},e[p_]={textureFormat:dn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Qe]},e[__]={textureFormat:dn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Gt]},e[g_]={textureFormat:dn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[cn]},e[b_]={textureFormat:dn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Vn]},e[v_]={textureFormat:dn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[tn]},e[$_]={textureFormat:dn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[qn]},e[w_]={textureFormat:et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Qe]},e[y_]={textureFormat:et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Qe]},e[E_]={textureFormat:et,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Gt]},e[k_]={textureFormat:et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Qe,Fs,Rr]},e[A_]={textureFormat:et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Qe,Rs]},e[S_]={textureFormat:et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Rr]},e[T_]={textureFormat:et,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[ct,St]},e[I_]={textureFormat:et,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[ct]},e[C_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Qe]},e[R_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Gt]},e[F_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Rr]},e[N_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[cn]},e[P_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vn]},e[B_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[qn]},e[M_]={textureFormat:nn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[tn]},e[z_]={textureFormat:Tn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[cn,tn]},e[U_]={textureFormat:Tn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tn]},e[D_]={textureFormat:Tn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ct]},e[x_]={textureFormat:Is,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[j_]},e[L_]={textureFormat:Is,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[H_]},Object.keys(e).forEach(function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(i,s){const o=n.type[s];n.bytesPerElementMap[o]=i})}),Fr=e}return Fr[r]}function W_(r,e){const t=gr(r);if(!t)throw"unknown internal format";const n=t.bytesPerElementMap[e];if(n===void 0)throw"unknown internal format";return n}function En(r){const e=gr(r);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function Ps(r){return(r&r-1)===0}function V_(r,e,t,n){if(!Un(r))return Ps(e)&&Ps(t);const i=gr(n);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function q_(r){const e=gr(r);if(!e)throw"unknown internal format";return e.textureFilterable}function To(r,e,t){return vn(e)?si(e):t||Qe}function Kn(r,e,t,n,i){if(i%1!==0)throw"can't guess dimensions";if(!t&&!n){const s=Math.sqrt(i/(e===Dt?6:1));s%1===0?(t=s,n=s):(t=i,n=1)}else if(n){if(!t&&(t=i/n,t%1))throw"can't guess dimensions"}else if(n=i/t,n%1)throw"can't guess dimensions";return{width:t,height:n}}function $n(r,e){e.colorspaceConversion!==void 0&&r.pixelStorei(D1,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&r.pixelStorei(L1,e.premultiplyAlpha),e.flipY!==void 0&&r.pixelStorei(x1,e.flipY)}function Io(r){r.pixelStorei(ai,4),Un(r)&&(r.pixelStorei(yo,0),r.pixelStorei(Eo,0),r.pixelStorei(ko,0),r.pixelStorei(Ao,0),r.pixelStorei(So,0))}function Z_(r,e,t,n){n.minMag&&(t.call(r,e,xr,n.minMag),t.call(r,e,Or,n.minMag)),n.min&&t.call(r,e,xr,n.min),n.mag&&t.call(r,e,Or,n.mag),n.wrap&&(t.call(r,e,ar,n.wrap),t.call(r,e,lr,n.wrap),(e===Vt||i1(r,e))&&t.call(r,e,Cs,n.wrap)),n.wrapR&&t.call(r,e,Cs,n.wrapR),n.wrapS&&t.call(r,e,ar,n.wrapS),n.wrapT&&t.call(r,e,lr,n.wrapT),n.minLod&&t.call(r,e,B1,n.minLod),n.maxLod&&t.call(r,e,M1,n.maxLod),n.baseLevel&&t.call(r,e,z1,n.baseLevel),n.maxLevel&&t.call(r,e,U1,n.maxLevel)}function Co(r,e,t){const n=t.target||Lt;r.bindTexture(n,e),Z_(r,n,r.texParameteri,t)}function X_(r){return r=r||Kt.textureColor,vn(r)?r:new Uint8Array([r[0]*255,r[1]*255,r[2]*255,r[3]*255])}function Gr(r,e,t,n,i,s){t=t||Kt.textureOptions,s=s||et;const o=t.target||Lt;if(n=n||t.width,i=i||t.height,r.bindTexture(o,e),V_(r,n,i,s))r.generateMipmap(o);else{const a=q_(s)?I1:T1;r.texParameteri(o,xr,a),r.texParameteri(o,Or,a),r.texParameteri(o,ar,or),r.texParameteri(o,lr,or)}}function Mn(r){return r.auto===!0||r.auto===void 0&&r.level===void 0}function Hr(r,e){return e=e||{},e.cubeFaceOrder||[_r,C1,R1,F1,N1,P1]}function jr(r,e){const n=Hr(r,e).map(function(i,s){return{face:i,ndx:s}});return n.sort(function(i,s){return i.face-s.face}),n}function li(r,e,t,n){n=n||Kt.textureOptions;const i=n.target||Lt,s=n.level||0;let o=t.width,a=t.height;const l=n.internalFormat||n.format||et,u=En(l),f=n.format||u.format,c=n.type||u.type;if($n(r,n),r.bindTexture(i,e),i===Dt){const h=t.width,m=t.height;let p,d;if(h/6===m)p=m,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(m/6===h)p=h,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3===m/2)p=h/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else if(h/2===m/3)p=h/2,d=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const _=wo();_?(_.canvas.width=p,_.canvas.height=p,o=p,a=p,jr(r,n).forEach(function(g){const $=d[g.ndx*2+0]*p,A=d[g.ndx*2+1]*p;_.drawImage(t,$,A,p,p,0,0,p,p),r.texImage2D(g.face,s,l,f,c,_.canvas)}),_.canvas.width=1,_.canvas.height=1):typeof createImageBitmap<"u"&&(o=p,a=p,jr(r,n).forEach(function(g){const $=d[g.ndx*2+0]*p,A=d[g.ndx*2+1]*p;r.texImage2D(g.face,s,l,p,p,0,f,c,null),createImageBitmap(t,$,A,p,p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(w){$n(r,n),r.bindTexture(i,e),r.texImage2D(g.face,s,l,f,c,w),Mn(n)&&Gr(r,e,n,o,a,l)})}))}else if(i===Vt||i===qt){const h=Math.min(t.width,t.height),m=Math.max(t.width,t.height),p=m/h;if(p%1!==0)throw"can not compute 3D dimensions of element";const d=t.width===m?1:0,_=t.height===m?1:0;r.pixelStorei(ai,1),r.pixelStorei(yo,t.width),r.pixelStorei(Eo,0),r.pixelStorei(So,0),r.texImage3D(i,s,l,h,h,h,0,f,c,null);for(let g=0;g<p;++g){const $=g*h*d,A=g*h*_;r.pixelStorei(ko,$),r.pixelStorei(Ao,A),r.texSubImage3D(i,s,0,0,g,h,h,1,f,c,t)}Io(r)}else r.texImage2D(i,s,l,f,c,t);Mn(n)&&Gr(r,e,n,o,a,l),Co(r,e,n)}function Dn(){}function K_(r){if(typeof document<"u"){const e=document.createElement("a");return e.href=r,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(r,location.href).origin===e}}function Y_(r,e){return e===void 0&&!K_(r)?"anonymous":e}function J_(r,e,t){t=t||Dn;let n;if(e=e!==void 0?e:Kt.crossOrigin,e=Y_(r,e),typeof Image<"u"){n=new Image,e!==void 0&&(n.crossOrigin=e);const i=function(){n.removeEventListener("error",s),n.removeEventListener("load",o),n=null},s=function(){const l="couldn't load image: "+r;co(l),t(l,n),i()},o=function(){t(null,n),i()};return n.addEventListener("error",s),n.addEventListener("load",o),n.src=r,n}else if(typeof ImageBitmap<"u"){let i,s;const o=function(){t(i,s)},a={};e&&(a.mode="cors"),fetch(r,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){s=l,setTimeout(o)}).catch(function(l){i=l,setTimeout(o)}),n=null}return n}function Ro(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap||typeof ImageData<"u"&&r instanceof ImageData||typeof HTMLElement<"u"&&r instanceof HTMLElement}function ui(r,e,t){return Ro(r)?(setTimeout(function(){t(null,r)}),r):J_(r,e,t)}function fi(r,e,t){t=t||Kt.textureOptions;const n=t.target||Lt;if(r.bindTexture(n,e),t.color===!1)return;const i=X_(t.color);if(n===Dt)for(let s=0;s<6;++s)r.texImage2D(_r+s,0,et,1,1,0,et,Qe,i);else n===Vt||n===qt?r.texImage3D(n,0,et,1,1,1,0,et,Qe,i):r.texImage2D(n,0,et,1,1,0,et,Qe,i)}function Q_(r,e,t,n){return n=n||Dn,t=t||Kt.textureOptions,fi(r,e,t),t=Object.assign({},t),ui(t.src,t.crossOrigin,function(s,o){s?n(s,e,o):(li(r,e,o,t),n(null,e,o))})}function eg(r,e,t,n){n=n||Dn;const i=t.src;if(i.length!==6)throw"there must be 6 urls for a cubemap";const s=t.level||0,o=t.internalFormat||t.format||et,a=En(o),l=t.format||a.format,u=t.type||Qe,f=t.target||Lt;if(f!==Dt)throw"target must be TEXTURE_CUBE_MAP";fi(r,e,t),t=Object.assign({},t);let c=6;const h=[],m=Hr(r,t);let p;function d(_){return function(g,$){--c,g?h.push(g):$.width!==$.height?h.push("cubemap face img is not a square: "+$.src):($n(r,t),r.bindTexture(f,e),c===5?Hr().forEach(function(A){r.texImage2D(A,s,o,l,u,$)}):r.texImage2D(_,s,o,l,u,$),Mn(t)&&r.generateMipmap(f)),c===0&&n(h.length?h:void 0,e,p)}}p=i.map(function(_,g){return ui(_,t.crossOrigin,d(m[g]))})}function tg(r,e,t,n){n=n||Dn;const i=t.src,s=t.internalFormat||t.format||et,o=En(s),a=t.format||o.format,l=t.type||Qe,u=t.target||qt;if(u!==Vt&&u!==qt)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";fi(r,e,t),t=Object.assign({},t);let f=i.length;const c=[];let h;const m=t.level||0;let p=t.width,d=t.height;const _=i.length;let g=!0;function $(A){return function(w,R){if(--f,w)c.push(w);else{if($n(r,t),r.bindTexture(u,e),g){g=!1,p=t.width||R.width,d=t.height||R.height,r.texImage3D(u,m,s,p,d,_,0,a,l,null);for(let I=0;I<_;++I)r.texSubImage3D(u,m,0,0,I,p,d,1,a,l,R)}else{let I=R,U;(R.width!==p||R.height!==d)&&(U=wo(),I=U.canvas,U.canvas.width=p,U.canvas.height=d,U.drawImage(R,0,0,p,d)),r.texSubImage3D(u,m,0,0,A,p,d,1,a,l,I),U&&I===U.canvas&&(U.canvas.width=0,U.canvas.height=0)}Mn(t)&&r.generateMipmap(u)}f===0&&n(c.length?c:void 0,e,h)}}h=i.map(function(A,w){return ui(A,t.crossOrigin,$(w))})}function ng(r,e,t,n){n=n||Kt.textureOptions;const i=n.target||Lt;r.bindTexture(i,e);let s=n.width,o=n.height,a=n.depth;const l=n.level||0,u=n.internalFormat||n.format||et,f=En(u),c=n.format||f.format,h=n.type||To(r,t,f.type);if(vn(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const _=fo(h);t=new _(t)}const m=W_(u,h),p=t.byteLength/m;if(p%1)throw"length wrong size for format: "+$o(r,c);let d;if(i===Vt||i===qt)if(!s&&!o&&!a){const _=Math.cbrt(p);if(_%1!==0)throw"can't guess cube size of array of numElements: "+p;s=_,o=_,a=_}else s&&(!o||!a)?(d=Kn(r,i,o,a,p/s),o=d.width,a=d.height):o&&(!s||!a)?(d=Kn(r,i,s,a,p/o),s=d.width,a=d.height):(d=Kn(r,i,s,o,p/a),s=d.width,o=d.height);else d=Kn(r,i,s,o,p),s=d.width,o=d.height;if(Io(r),r.pixelStorei(ai,n.unpackAlignment||1),$n(r,n),i===Dt){const _=m/t.BYTES_PER_ELEMENT,g=p/6*_;jr(r,n).forEach($=>{const A=g*$.ndx,w=t.subarray(A,A+g);r.texImage2D($.face,l,u,s,o,0,c,h,w)})}else i===Vt||i===qt?r.texImage3D(i,l,u,s,o,a,0,c,h,t):r.texImage2D(i,l,u,s,o,0,c,h,t);return{width:s,height:o,depth:a,type:h}}function rg(r,e,t){const n=t.target||Lt;r.bindTexture(n,e);const i=t.level||0,s=t.internalFormat||t.format||et,o=En(s),a=t.format||o.format,l=t.type||o.type;if($n(r,t),n===Dt)for(let u=0;u<6;++u)r.texImage2D(_r+u,i,s,t.width,t.height,0,a,l,null);else n===Vt||n===qt?r.texImage3D(n,i,s,t.width,t.height,t.depth,0,a,l,null):r.texImage2D(n,i,s,t.width,t.height,0,a,l,null)}function Fo(r,e,t){t=t||Dn,e=e||Kt.textureOptions;const n=r.createTexture(),i=e.target||Lt;let s=e.width||1,o=e.height||1;const a=e.internalFormat||et;r.bindTexture(i,n),i===Dt&&(r.texParameteri(i,ar,or),r.texParameteri(i,lr,or));let l=e.src;if(l)if(typeof l=="function"&&(l=l(r,e)),typeof l=="string")Q_(r,n,e,t);else if(vn(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||vn(l[0]))){const u=ng(r,n,l,e);s=u.width,o=u.height}else Array.isArray(l)&&(typeof l[0]=="string"||Ro(l[0]))?i===Dt?eg(r,n,e,t):tg(r,n,e,t):(li(r,n,l,e),s=l.width,o=l.height);else rg(r,n,e);return Mn(e)&&Gr(r,n,e,s,o,a),Co(r,n,e),n}function ig(r,e,t,n,i,s){n=n||t.width,i=i||t.height,s=s||t.depth;const o=t.target||Lt;r.bindTexture(o,e);const a=t.level||0,l=t.internalFormat||t.format||et,u=En(l),f=t.format||u.format;let c;const h=t.src;if(h&&(vn(h)||Array.isArray(h)&&typeof h[0]=="number")?c=t.type||To(r,h,u.type):c=t.type||u.type,o===Dt)for(let m=0;m<6;++m)r.texImage2D(_r+m,a,l,n,i,0,f,c,null);else o===Vt||o===qt?r.texImage3D(o,a,l,n,i,s,0,f,c,null):r.texImage2D(o,a,l,n,i,0,f,c,null)}const ci=co;function sg(r){return typeof document<"u"&&document.getElementById?document.getElementById(r):null}const ur=33984,br=34962,og=34963,ag=35713,lg=35714,ug=35632,fg=35633,cg=35981,No=35718,hg=35721,mg=35971,dg=35382,pg=35396,_g=35398,gg=35392,bg=35395,vr=5126,Po=35664,Bo=35665,Mo=35666,hi=5124,zo=35667,Uo=35668,Do=35669,Lo=35670,xo=35671,Oo=35672,Go=35673,Ho=35674,jo=35675,Wo=35676,vg=35678,$g=35680,wg=35679,yg=35682,Eg=35685,kg=35686,Ag=35687,Sg=35688,Tg=35689,Ig=35690,Cg=36289,Rg=36292,Fg=36293,mi=5125,Vo=36294,qo=36295,Zo=36296,Ng=36298,Pg=36299,Bg=36300,Mg=36303,zg=36306,Ug=36307,Dg=36308,Lg=36311,$r=3553,wr=34067,di=32879,yr=35866,Ue={};function Xo(r,e){return Ue[e].bindPoint}function xg(r,e){return function(t){r.uniform1f(e,t)}}function Og(r,e){return function(t){r.uniform1fv(e,t)}}function Gg(r,e){return function(t){r.uniform2fv(e,t)}}function Hg(r,e){return function(t){r.uniform3fv(e,t)}}function jg(r,e){return function(t){r.uniform4fv(e,t)}}function Ko(r,e){return function(t){r.uniform1i(e,t)}}function Yo(r,e){return function(t){r.uniform1iv(e,t)}}function Jo(r,e){return function(t){r.uniform2iv(e,t)}}function Qo(r,e){return function(t){r.uniform3iv(e,t)}}function ea(r,e){return function(t){r.uniform4iv(e,t)}}function Wg(r,e){return function(t){r.uniform1ui(e,t)}}function Vg(r,e){return function(t){r.uniform1uiv(e,t)}}function qg(r,e){return function(t){r.uniform2uiv(e,t)}}function Zg(r,e){return function(t){r.uniform3uiv(e,t)}}function Xg(r,e){return function(t){r.uniform4uiv(e,t)}}function Kg(r,e){return function(t){r.uniformMatrix2fv(e,!1,t)}}function Yg(r,e){return function(t){r.uniformMatrix3fv(e,!1,t)}}function Jg(r,e){return function(t){r.uniformMatrix4fv(e,!1,t)}}function Qg(r,e){return function(t){r.uniformMatrix2x3fv(e,!1,t)}}function e2(r,e){return function(t){r.uniformMatrix3x2fv(e,!1,t)}}function t2(r,e){return function(t){r.uniformMatrix2x4fv(e,!1,t)}}function n2(r,e){return function(t){r.uniformMatrix4x2fv(e,!1,t)}}function r2(r,e){return function(t){r.uniformMatrix3x4fv(e,!1,t)}}function i2(r,e){return function(t){r.uniformMatrix4x3fv(e,!1,t)}}function _t(r,e,t,n){const i=Xo(r,e);return Un(r)?function(s){let o,a;!s||pr(r,s)?(o=s,a=null):(o=s.texture,a=s.sampler),r.uniform1i(n,t),r.activeTexture(ur+t),r.bindTexture(i,o),r.bindSampler(t,a)}:function(s){r.uniform1i(n,t),r.activeTexture(ur+t),r.bindTexture(i,s)}}function gt(r,e,t,n,i){const s=Xo(r,e),o=new Int32Array(i);for(let a=0;a<i;++a)o[a]=t+a;return Un(r)?function(a){r.uniform1iv(n,o),a.forEach(function(l,u){r.activeTexture(ur+o[u]);let f,c;pr(r,l)?(f=l,c=null):(f=l.texture,c=l.sampler),r.bindSampler(t,c),r.bindTexture(s,f)})}:function(a){r.uniform1iv(n,o),a.forEach(function(l,u){r.activeTexture(ur+o[u]),r.bindTexture(s,l)})}}Ue[vr]={Type:Float32Array,size:4,setter:xg,arraySetter:Og};Ue[Po]={Type:Float32Array,size:8,setter:Gg,cols:2};Ue[Bo]={Type:Float32Array,size:12,setter:Hg,cols:3};Ue[Mo]={Type:Float32Array,size:16,setter:jg,cols:4};Ue[hi]={Type:Int32Array,size:4,setter:Ko,arraySetter:Yo};Ue[zo]={Type:Int32Array,size:8,setter:Jo,cols:2};Ue[Uo]={Type:Int32Array,size:12,setter:Qo,cols:3};Ue[Do]={Type:Int32Array,size:16,setter:ea,cols:4};Ue[mi]={Type:Uint32Array,size:4,setter:Wg,arraySetter:Vg};Ue[Vo]={Type:Uint32Array,size:8,setter:qg,cols:2};Ue[qo]={Type:Uint32Array,size:12,setter:Zg,cols:3};Ue[Zo]={Type:Uint32Array,size:16,setter:Xg,cols:4};Ue[Lo]={Type:Uint32Array,size:4,setter:Ko,arraySetter:Yo};Ue[xo]={Type:Uint32Array,size:8,setter:Jo,cols:2};Ue[Oo]={Type:Uint32Array,size:12,setter:Qo,cols:3};Ue[Go]={Type:Uint32Array,size:16,setter:ea,cols:4};Ue[Ho]={Type:Float32Array,size:32,setter:Kg,rows:2,cols:2};Ue[jo]={Type:Float32Array,size:48,setter:Yg,rows:3,cols:3};Ue[Wo]={Type:Float32Array,size:64,setter:Jg,rows:4,cols:4};Ue[Eg]={Type:Float32Array,size:32,setter:Qg,rows:2,cols:3};Ue[kg]={Type:Float32Array,size:32,setter:t2,rows:2,cols:4};Ue[Ag]={Type:Float32Array,size:48,setter:e2,rows:3,cols:2};Ue[Sg]={Type:Float32Array,size:48,setter:r2,rows:3,cols:4};Ue[Tg]={Type:Float32Array,size:64,setter:n2,rows:4,cols:2};Ue[Ig]={Type:Float32Array,size:64,setter:i2,rows:4,cols:3};Ue[vg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:$r};Ue[$g]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:wr};Ue[wg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:di};Ue[yg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:$r};Ue[Cg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:yr};Ue[Rg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:yr};Ue[Fg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:wr};Ue[Ng]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:$r};Ue[Pg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:di};Ue[Bg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:wr};Ue[Mg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:yr};Ue[zg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:$r};Ue[Ug]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:di};Ue[Dg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:wr};Ue[Lg]={Type:null,size:0,setter:_t,arraySetter:gt,bindPoint:yr};function Er(r,e){return function(t){if(t.value)switch(r.disableVertexAttribArray(e),t.value.length){case 4:r.vertexAttrib4fv(e,t.value);break;case 3:r.vertexAttrib3fv(e,t.value);break;case 2:r.vertexAttrib2fv(e,t.value);break;case 1:r.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else r.bindBuffer(br,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribPointer(e,t.numComponents||t.size,t.type||vr,t.normalize||!1,t.stride||0,t.offset||0),r.vertexAttribDivisor&&r.vertexAttribDivisor(e,t.divisor||0)}}function Yt(r,e){return function(t){if(t.value)if(r.disableVertexAttribArray(e),t.value.length===4)r.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else r.bindBuffer(br,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribIPointer(e,t.numComponents||t.size,t.type||hi,t.stride||0,t.offset||0),r.vertexAttribDivisor&&r.vertexAttribDivisor(e,t.divisor||0)}}function kr(r,e){return function(t){if(t.value)if(r.disableVertexAttribArray(e),t.value.length===4)r.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else r.bindBuffer(br,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribIPointer(e,t.numComponents||t.size,t.type||mi,t.stride||0,t.offset||0),r.vertexAttribDivisor&&r.vertexAttribDivisor(e,t.divisor||0)}}function pi(r,e,t){const n=t.size,i=t.count;return function(s){r.bindBuffer(br,s.buffer);const o=s.size||s.numComponents||n,a=o/i,l=s.type||vr,f=Ue[l].size*o,c=s.normalize||!1,h=s.offset||0,m=f/i;for(let p=0;p<i;++p)r.enableVertexAttribArray(e+p),r.vertexAttribPointer(e+p,a,l,c,f,h+m*p),r.vertexAttribDivisor&&r.vertexAttribDivisor(e+p,s.divisor||0)}}const ot={};ot[vr]={size:4,setter:Er};ot[Po]={size:8,setter:Er};ot[Bo]={size:12,setter:Er};ot[Mo]={size:16,setter:Er};ot[hi]={size:4,setter:Yt};ot[zo]={size:8,setter:Yt};ot[Uo]={size:12,setter:Yt};ot[Do]={size:16,setter:Yt};ot[mi]={size:4,setter:kr};ot[Vo]={size:8,setter:kr};ot[qo]={size:12,setter:kr};ot[Zo]={size:16,setter:kr};ot[Lo]={size:4,setter:Yt};ot[xo]={size:8,setter:Yt};ot[Oo]={size:12,setter:Yt};ot[Go]={size:16,setter:Yt};ot[Ho]={size:4,setter:pi,count:2};ot[jo]={size:9,setter:pi,count:3};ot[Wo]={size:16,setter:pi,count:4};const s2=/ERROR:\s*\d+:(\d+)/gi;function o2(r,e="",t=0){const n=[...e.matchAll(s2)],i=new Map(n.map((s,o)=>{const a=parseInt(s[1]),l=n[o+1],u=l?l.index:e.length,f=e.substring(s.index,u);return[a-1,f]}));return r.split(`
`).map((s,o)=>{const a=i.get(o);return`${o+1+t}: ${s}${a?`

^^^ ${a}`:""}`}).join(`
`)}const Bs=/^[ \t]*\n/;function ta(r){let e=0;return Bs.test(r)&&(e=1,r=r.replace(Bs,"")),{lineOffset:e,shaderSource:r}}function a2(r,e,t,n){if(n=n||ci,!r.getShaderParameter(t,ag)){const s=r.getShaderInfoLog(t),{lineOffset:o,shaderSource:a}=ta(r.getShaderSource(t)),l=`${o2(a,s,o)}
Error compiling ${$o(r,e)}: ${s}`;return n(l),l}return""}function na(r,e,t){let n,i,s;if(typeof e=="function"&&(t=e,e=void 0),typeof r=="function")t=r,r=void 0;else if(r&&!Array.isArray(r)){const u=r;t=u.errorCallback,r=u.attribLocations,n=u.transformFeedbackVaryings,i=u.transformFeedbackMode,s=u.callback}const o=t||ci,a=[],l={errorCallback(u,...f){a.push(u),o(u,...f)},transformFeedbackVaryings:n,transformFeedbackMode:i,callback:s,errors:a};{let u={};Array.isArray(r)?r.forEach(function(f,c){u[f]=e?e[c]:c}):u=r||{},l.attribLocations=u}return l}const l2=["VERTEX_SHADER","FRAGMENT_SHADER"];function u2(r,e){if(e.indexOf("frag")>=0)return ug;if(e.indexOf("vert")>=0)return fg}const f2=(r=0)=>new Promise(e=>setTimeout(e,r));function c2(r,e,t){const n=r.createProgram(),{attribLocations:i,transformFeedbackVaryings:s,transformFeedbackMode:o}=na(t);for(let a=0;a<e.length;++a){let l=e[a];if(typeof l=="string"){const u=sg(l),f=u?u.text:l;let c=r[l2[a]];u&&u.type&&(c=u2(r,u.type)||c),l=r.createShader(c),r.shaderSource(l,ta(f).shaderSource),r.compileShader(l),r.attachShader(n,l)}}Object.entries(i).forEach(([a,l])=>r.bindAttribLocation(n,l,a));{let a=s;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),r.transformFeedbackVaryings(n,a,o||cg))}return r.linkProgram(n),n}async function h2(r,e){const t=r.getExtension("KHR_parallel_shader_compile"),n=t?(s,o)=>s.getProgramParameter(o,t.COMPLETION_STATUS_KHR):()=>!0;let i=0;do await f2(i),i=1e3/60;while(!n(r,e))}async function m2(r,e){for(const t of Object.values(e))await h2(r,t)}function d2(r,e,t){if(t=t||ci,!r.getProgramParameter(e,lg)){const i=r.getProgramInfoLog(e);t(`Error in program linking: ${i}`);const o=r.getAttachedShaders(e).map(a=>a2(r,r.getShaderParameter(a,r.SHADER_TYPE),a,t));return`${i}
${o.filter(a=>a).join(`
`)}`}}function ra(r){const e=r.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const p2=/(\.|\[|]|\w+)/g,_2=r=>r>="0"&&r<="9";function g2(r,e,t,n){const i=r.split(p2).filter(a=>a!=="");let s=0,o="";for(;;){const a=i[s++];o+=a;const l=_2(a[0]),u=l?parseInt(a):a;if(l&&(o+=i[s++]),s===i.length){t[u]=e;break}else{const c=i[s++],h=c==="[",m=t[u]||(h?[]:{});t[u]=m,t=m,n[o]=n[o]||function(p){return function(d){ia(p,d)}}(m),o+=c}}}function b2(r,e){let t=0;function n(a,l,u){const f=l.name.endsWith("[0]"),c=l.type,h=Ue[c];if(!h)throw new Error(`unknown type: 0x${c.toString(16)}`);let m;if(h.bindPoint){const p=t;t+=l.size,f?m=h.arraySetter(r,c,p,u,l.size):m=h.setter(r,c,p,u,l.size)}else h.arraySetter&&f?m=h.arraySetter(r,u):m=h.setter(r,u);return m.location=u,m}const i={},s={},o=r.getProgramParameter(e,No);for(let a=0;a<o;++a){const l=r.getActiveUniform(e,a);if(ra(l))continue;let u=l.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const f=r.getUniformLocation(e,l.name);if(f){const c=n(e,l,f);i[u]=c,g2(u,c,s,i)}}return i}function v2(r,e){const t={},n=r.getProgramParameter(e,mg);for(let i=0;i<n;++i){const s=r.getTransformFeedbackVarying(e,i);t[s.name]={index:i,type:s.type,size:s.size}}return t}function $2(r,e){const t=r.getProgramParameter(e,No),n=[],i=[];for(let a=0;a<t;++a){i.push(a),n.push({});const l=r.getActiveUniform(e,a);n[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],u=a[1];r.getActiveUniforms(e,i,r[l]).forEach(function(f,c){n[c][u]=f})});const s={},o=r.getProgramParameter(e,dg);for(let a=0;a<o;++a){const l=r.getActiveUniformBlockName(e,a),u={index:r.getUniformBlockIndex(e,l),usedByVertexShader:r.getActiveUniformBlockParameter(e,a,pg),usedByFragmentShader:r.getActiveUniformBlockParameter(e,a,_g),size:r.getActiveUniformBlockParameter(e,a,gg),uniformIndices:r.getActiveUniformBlockParameter(e,a,bg)};u.used=u.usedByVertexShader||u.usedByFragmentShader,s[l]=u}return{blockSpecs:s,uniformData:n}}function ia(r,e){for(const t in e){const n=r[t];typeof n=="function"?n(e[t]):ia(r[t],e[t])}}function pn(r,...e){const t=r.uniformSetters||r,n=e.length;for(let i=0;i<n;++i){const s=e[i];if(Array.isArray(s)){const o=s.length;for(let a=0;a<o;++a)pn(t,s[a])}else for(const o in s){const a=t[o];a&&a(s[o])}}}function w2(r,e){const t={},n=r.getProgramParameter(e,hg);for(let i=0;i<n;++i){const s=r.getActiveAttrib(e,i);if(ra(s))continue;const o=r.getAttribLocation(e,s.name),a=ot[s.type],l=a.setter(r,o,a);l.location=o,t[s.name]=l}return t}function y2(r,e){for(const t in e){const n=r[t];n&&n(e[t])}}function Nr(r,e,t){t.vertexArrayObject?r.bindVertexArray(t.vertexArrayObject):(y2(e.attribSetters||e,t.attribs),t.indices&&r.bindBuffer(og,t.indices))}function E2(r,e){const t=b2(r,e),n=w2(r,e),i={program:e,uniformSetters:t,attribSetters:n};return Un(r)&&(i.uniformBlockSpec=$2(r,e),i.transformFeedbackInfo=v2(r,e)),i}function Ms(r,e,t,n,i){for(const[s,o]of Object.entries(e)){const a={...i},l=t[s];Array.isArray(l)||Object.assign(a,l);const u=d2(r,o,a.errorCallback);if(u){for(const f of Object.values(e)){const c=r.getAttachedShaders(f);r.deleteProgram(f);for(const h of c)n.has(h)||r.deleteShader(h)}return u}}}function k2(r,e,t={}){const n=new Set,i=Object.fromEntries(Object.entries(e).map(([o,a])=>{const l={...t},u=Array.isArray(a)?a:a.shaders;return Array.isArray(a)||Object.assign(l,a),u.forEach(n.add,n),[o,c2(r,u,l)]}));if(t.callback){m2(r,i).then(()=>{const o=Ms(r,i,e,n,t);t.callback(o,o?void 0:i)});return}return Ms(r,i,e,n,t)?void 0:i}function A2(r,e,t){t=na(t);function n(o,a){return Object.fromEntries(Object.entries(a).map(([l,u])=>[l,E2(o,u)]))}const i=t.callback;i&&(t.callback=(o,a)=>{i(o,o?void 0:n(r,a))});const s=k2(r,e,t);if(!(i||!s))return n(r,s)}const S2=36160,sn=36161,T2=3553,I2=5121,C2=6402,R2=6408,F2=33190,N2=36012,P2=35056,B2=36013,M2=32854,z2=32855,U2=36194,sa=33189,oa=6401,aa=36168,_i=34041,Wr=36064,Ar=36096,la=36128,gi=33306,Vr=33071,qr=9729,ua=[{format:R2,type:I2,min:qr,wrap:Vr},{format:_i}],Rt={};Rt[_i]=gi;Rt[oa]=la;Rt[aa]=la;Rt[C2]=Ar;Rt[sa]=Ar;Rt[F2]=Ar;Rt[N2]=Ar;Rt[P2]=gi;Rt[B2]=gi;function D2(r,e){return Rt[r]||Rt[e]}const Jt={};Jt[M2]=!0;Jt[z2]=!0;Jt[U2]=!0;Jt[_i]=!0;Jt[sa]=!0;Jt[oa]=!0;Jt[aa]=!0;function L2(r){return Jt[r]}const x2=32;function O2(r){return r>=Wr&&r<Wr+x2}function G2(r,e,t,n){const i=S2,s=r.createFramebuffer();r.bindFramebuffer(i,s),t=t||r.drawingBufferWidth,n=n||r.drawingBufferHeight,e=e||ua;const o=[],a={framebuffer:s,attachments:[],width:t,height:n};return e.forEach(function(l,u){let f=l.attachment;const c=l.samples,h=l.format;let m=l.attachmentPoint||D2(h,l.internalFormat);if(m||(m=Wr+u),O2(m)&&o.push(m),!f)if(c!==void 0||L2(h))f=r.createRenderbuffer(),r.bindRenderbuffer(sn,f),c>1?r.renderbufferStorageMultisample(sn,c,h,t,n):r.renderbufferStorage(sn,h,t,n);else{const p=Object.assign({},l);p.width=t,p.height=n,p.auto===void 0&&(p.auto=!1,p.min=p.min||p.minMag||qr,p.mag=p.mag||p.minMag||qr,p.wrapS=p.wrapS||p.wrap||Vr,p.wrapT=p.wrapT||p.wrap||Vr),f=Fo(r,p)}if(ho(r,f))r.framebufferRenderbuffer(i,m,sn,f);else if(pr(r,f))l.layer!==void 0?r.framebufferTextureLayer(i,m,f,l.level||0,l.layer):r.framebufferTexture2D(i,m,l.target||T2,f,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(f)}),r.drawBuffers&&r.drawBuffers(o),a}function H2(r,e,t,n,i){n=n||r.drawingBufferWidth,i=i||r.drawingBufferHeight,e.width=n,e.height=i,t=t||ua,t.forEach(function(s,o){const a=e.attachments[o],l=s.format,u=s.samples;if(u!==void 0||ho(r,a))r.bindRenderbuffer(sn,a),u>1?r.renderbufferStorageMultisample(sn,u,l,n,i):r.renderbufferStorage(sn,l,n,i);else if(pr(r,a))ig(r,a,s,n,i);else throw new Error("unknown attachment type")})}class j2{constructor(e,t,n,i){this.id=e,this.original=t,this.texture=n,this.meta=i}get width(){return this.original.width}get height(){return this.original.height}}class W2{constructor(e,t=new no("textures")){Te(this,"textures",new Map);this.gl=e,this.idGenerator=t}addImage(e,t){let n=t==null?void 0:t.id;if(n&&this.textures.has(n))throw new Error(`Texture with id ${n} already exists`);if(!n){for(let o=0;o<this.textures.size+5&&(n=this.idGenerator.generate(),!!this.textures.has(n));o++)n=void 0;if(!n)throw new Error("Textures overflow!")}const i=Fo(this.gl,{src:e}),s=new j2(n,e,i,t.meta);return this.textures.set(n,s),s}downloadImage(e,t){return ro(e).then(n=>this.addImage(n,t))}delete(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture with id ${e} already deleted`);return this.gl.deleteTexture(t.texture),this.textures.delete(e),t.original}get(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture with id ${e} not found`);return t}has(e){return this.textures.has(e)}clear(){this.textures.forEach(e=>this.gl.deleteTexture(e.texture)),this.textures.clear()}}function Wt(r){const e=parseInt(r.slice(1),16);return[(e>>2*8)/255,(e>>8&255)/255,(e&255)/255]}function V2(r,e,t){const n=r.name;let i=e[r.name];i===void 0&&(i=e[r.name]=structuredClone(r.default));const s=r.input;switch(s.type){case"float":t[n]=i;break;case"int":t[n]=i|0;break;case"color":t[n]=Wt(i);break;case"angle":t[n]=s.mode==Yr.DEGREE?i:i/180*Math.PI;break;case"point":{const{x:o,y:a}=i;t[n]=[o,a];break}}}class q2{constructor(e,t,n=document.createElement("canvas").getContext("2d")){Te(this,"stencilTexture");Te(this,"ctx");if(this.gl=e,this.textManager=t,!n)throw new Error("TextStencilService require not null ctx: CanvasRenderingContext2D.");this.ctx=n;const i=e.createTexture();if(!i)throw new Error("Failed to create WebGL texture in TextStencilService.");this.stencilTexture=i}getTextStencil(e,t,n,i){const s=Math.ceil(Math.abs(n)),o=Math.ceil(Math.abs(i)),a=this.textManager.drawTextInfo(e,t,s,o),l=this.ctx.canvas;l.height!=o&&(l.height=o),l.width!=s&&(l.width=s),this.ctx.clearRect(0,0,s,o),this.draw(this.ctx,a);const u=this.gl;return li(u,this.stencilTexture,l,{wrap:u.CLAMP_TO_EDGE,min:u.LINEAR}),{stencil:this.stencilTexture,info:a}}draw(e,t,n=!1){e.lineJoin="round",e.miterLimit=2,e.textAlign=t.align,e.textBaseline=t.baseline,e.lineWidth=t.lineWidth,e.font=an(t.font,t.fontSize),e.strokeStyle="#ff0000",e.fillStyle="#00ff00";const i=t.lines;for(let s=0;s<i.length;s++){const o=i[s];e.strokeText(o.text,o.x,o.y)}for(let s=0;s<i.length;s++){const o=i[s];e.fillText(o.text,o.x,o.y)}if(n){e.lineWidth=3,e.strokeStyle="#aaaaaa",e.strokeRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.moveTo(e.canvas.width/2,0),e.lineTo(e.canvas.width/2,e.canvas.height),e.stroke(),e.beginPath(),e.moveTo(0,e.canvas.height/2),e.lineTo(e.canvas.width,e.canvas.height/2),e.stroke(),e.strokeStyle="#ffffff",e.lineWidth=1;for(let s=0;s<i.length;s++){const o=i[s],a=o.y,l=o.x,u=e.measureText(o.text);console.debug(o),console.debug(u),e.beginPath(),e.moveTo(0,a),e.lineTo(e.canvas.width,a),e.strokeStyle="#ff0000",e.stroke(),e.beginPath(),e.moveTo(l,a-u.actualBoundingBoxAscent),e.lineTo(l,a+u.actualBoundingBoxDescent),e.strokeStyle="#00ff00",e.stroke(),e.strokeStyle="#0000ff",e.strokeRect(l-u.actualBoundingBoxLeft,a-u.actualBoundingBoxAscent,u.actualBoundingBoxLeft+u.actualBoundingBoxRight,u.actualBoundingBoxAscent+u.actualBoundingBoxDescent)}}}}class Z2{constructor(e,t,n,i){Te(this,"contentRenderers");this.gl=e,this.graphics=i,this.contentRenderers={image:new K2(t),text:new X2(new q2(e,n))}}clear(){this.graphics.clear()}drawFrame(e){this.graphics.resize(e.width,e.height);const t=this.graphics.buffersPull.get(e.width,e.height),n=this.gl,i=Wt(e.backgroundColor??"#ff0000");n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(...i,e.backgroundAlpha??0),n.clear(n.COLOR_BUFFER_BIT),n.clearColor(0,0,0,0),e.blocks.forEach(s=>{this.drawBlock(e,s,t)}),this.graphics.buffersPull.free(t)}drawBlock(e,t,n){const{graphics:i}=this,{container:s,content:o}=t;let a=i.canvasRenderBuffer;t.effects.length&&(a=n,this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n.framebuffer),this.gl.clear(this.gl.COLOR_BUFFER_BIT));const l=this.contentRenderers[o.type],u=s.type==="global"?l.drawGlobal(i,a,o.value,e,s.value):l.drawInRectangle(i,a,o.value,s.value);t.effects.length!==0&&i.drawModifications(t.effects,u,n,i.canvasRenderBuffer,!0)}}class X2{constructor(e){this.textService=e}drawInRectangle(e,t,n,i){const{text:s,style:o}=n,a=this.textService.getTextStencil(s,o,i.width,i.height);return this.draw(e,t,a,i,o),i}drawGlobal(e,t,n,i,s){const{text:o,style:a}=n,l=o.split(`
`),u=l.length,f=Math.max(...l.map(A=>A.length)),c=i.width*s.maxWidth,h=i.height*Math.max(s.minHeight,Math.min(s.maxHeight,u*(.175+Math.max(-.05,.03*(2.5-f/10))))),m=this.textService.getTextStencil(o,a,c,h),p=2/9,d=h/2+m.info.fontSize*p,_=a.baseline,g=_=="top"?d:_=="middle"?i.height/2:i.height-d,$={width:c,height:h,rotation:0,position:{x:i.width/2,y:g}};return this.draw(e,t,m,$,a),$}draw(e,t,n,i,s){const o=s.stroke.settings.type!=="disabled",a=s.fill.settings.type!=="disabled",l=+o*1|+a*2;o&&e.drawStencilLayer(n.stencil,1,l,i,s.stroke,t),a&&e.drawStencilLayer(n.stencil,2,l,i,s.fill,t)}}class K2{constructor(e){this.textures=e}drawInRectangle(e,t,n,i){const s=this.textures.get(n.id),o=this.cropImage(s,i,n.crop);return e.drawRectImage(s.texture,o.rectangle,o.texCoords,t),i}drawGlobal(e,t,n,i,s){const o=e.size,a={width:i.width*s.maxWidth,height:i.height*s.maxHeight,position:{x:o.width/2,y:o.height/2},rotation:0};return this.drawInRectangle(e,t,n,a)}cropImage(e,t,n){const i=ut.scale(ut.rotateZ(ut.scale(ut.translation([n.position.x,n.position.y,0]),[1/e.width,1/e.height,1]),n.rotation),[n.width*e.width,n.height*e.height,1]),s=[Wn.create(0-.5,0-.5),Wn.create(1-.5,0-.5),Wn.create(1-.5,1-.5),Wn.create(0-.5,1-.5)].map(o=>{const a=ut.transformPoint(i,o,o);return{x:a[0],y:a[1]}});return{rectangle:t,texCoords:s}}}function fa(r,e){if(!e)return 1;if(r===e)return 0;const[t,n,i]=r.split(".").map(l=>Number(l)),[s,o,a]=e.split(".").map(l=>Number(l));return t<s?-1:t>s?1:n<o?-1:n>o?1:i<a?-1:i>a?1:0}function Y2(r,e,t){return fa(r.formatVersion,t)===-1}function Pr(r,e,t){return n=>Y2(r,n,e)?t(n):n}function zs(r,e){return t=>{if(r!==e)throw new Nn(`logic error: not enough migrations from '${r}' to '${e}'`);return t}}const Ht=class Ht{static fromFile(e){return new rr().loadAsync(e).then(n=>{const i=n.file("index.json");return i?i.async("string").then(s=>{const o=JSON.parse(s,(a,l)=>(a==="container"&&l.type==="global"&&(l.value.minHeight=.1),l));if(fa(this.FormatVersion,o.formatVersion)==-1)throw new Nn(`application version ${this.FormatVersion} lower than file version ${o.formatVersion}`);return Promise.all([Promise.all(o.resources.images.map(a=>{const l=n.file(this.imageFilepath(a));if(!l)throw new Error(`Not found image with id ${a}`);return l.async("blob").then(u=>({id:a,blob:u}))})),Promise.all((o.resources.patterns||[]).map(a=>{const l=n.file(this.patternFilepath(a));if(!l)throw new Error(`Not found pattern with id ${a}`);return l.async("blob").then(u=>({name:a,blob:u}))}))]).then(([a,l])=>({meme:o.meme,resources:{images:a,patterns:l}})).then(Pr(o,"0.2.1",this.fromV0_2_0ToV0_2_1)).then(Pr(o,"0.2.2",this.fromV0_2_1ToV0_2_2)).then(Pr(o,"0.2.3",this.fromV0_2_2ToV0_2_3)).then(zs("0.2.3",this.FormatVersion))}):Ht.zeroVersion(n).then(Ht.fromV0_2_0ToV0_2_1).then(Ht.fromV0_2_1ToV0_2_2).then(Ht.fromV0_2_2ToV0_2_3).then(zs("0.2.3",this.FormatVersion))})}static fromV0_2_0ToV0_2_1(e){return{...e,version:"0.2.1",resources:{...e.resources,patterns:[]}}}static fromV0_2_1ToV0_2_2(e){return{...e,version:"0.2.2",meme:{frames:e.meme.frames.map(t=>({...t,blocks:t.blocks.map(n=>({...n,effects:[]}))}))}}}static fromV0_2_2ToV0_2_3(e){return{...e,version:"0.2.3",meme:{frames:e.meme.frames.map(t=>({...t,backgroundColor:"#ffffff",backgroundAlpha:1,blocks:t.blocks.map(n=>({...n,content:n.content.type=="image"?{type:"image",value:{name:"Фон",id:n.content.value.id,crop:{position:{x:.5,y:.5},width:1,height:1,rotation:0}}}:n.content,effects:n.effects.map(i=>{const s=i.settings,o=s.type;return delete s.type,{type:o,settings:s}})}))}))}}}static toFile(e){const t=new rr;e.resources.images.forEach(({id:i,blob:s})=>{t.file(this.imageFilepath(i),s,{binary:!0})}),e.resources.patterns.forEach(({name:i,blob:s})=>{t.file(this.patternFilepath(i),s,{binary:!0})});const n={meme:e.meme,formatVersion:this.FormatVersion,editorVersion:this.EditorVersion,resources:{images:e.resources.images.map(i=>i.id),patterns:e.resources.patterns.map(i=>i.name)}};return t.file("index.json",JSON.stringify(n)),t.generateAsync({type:"blob"})}static imageFilepath(e){return`resources/images/${e}.png`}static patternFilepath(e){return`resources/patterns/${e}.png`}static zeroVersion(e){const t=e.file("text.json");if(!t)throw new Nn("Unknown format");const n=t.comment;return t.async("string").then(i=>{const s=JSON.parse(i),o=e.file(/.*\.png/),a=new Array(o.length);return Promise.all(o.map(l=>l.async("blob").then(u=>{const f=+l.name.substring(0,l.name.length-4);return this.imageSizes(u).then(({width:c,height:h})=>{const m={id:`old-frame-${f}`,blocks:[{id:`old-frame-${f}-background`,container:{type:"global",value:{maxHeight:1,maxWidth:1,minHeight:1}},content:{type:"image",value:{id:l.name}}}],height:h,width:c};a[f]=m}).then(()=>({id:l.name,blob:u}))}))).then(l=>{for(let u=0;u<s.length;u++){const f=s[u],c=a[u];if(n)switch(n){case"v0.0.3":c.blocks.push(...f.textContent.map((h,m)=>{const p=h.box,d=zt.mergePartials(zt.DefaultStyle(),h.style);return{id:`old-frame-${u}-block-${m}`,container:h.main?{type:"global",value:{maxHeight:.4,maxWidth:.96,minHeight:.1}}:{type:"rectangle",value:{height:p.height,width:p.width,position:{x:p.x,y:p.y},rotation:0}},content:{type:"text",value:{text:h.text,style:Br(d,h.main)}}}}));break;case"v0.0.4":c.blocks.push(...f.textContent.map((h,m)=>{const p=h.box,d=zt.mergePartials(zt.DefaultStyle(),h.style);return{id:`old-frame-${u}-block-${m}`,container:h.main?{type:"global",value:{maxHeight:.4,minHeight:.1,maxWidth:.96}}:{type:"rectangle",value:{height:p._height,width:p._width,position:{x:p.transform.x,y:p.transform.y},rotation:p.transform.rotate}},content:{type:"text",value:{text:h.text,style:Br(d,h.main)}}}}));break;default:throw new Nn(`Unexpected legacy version ${n}`)}else{const h=typeof f=="string"?f:f.text,m=typeof f=="string"?zt.DefaultStyle():f.textContent.style,p={text:h,style:Br(zt.mergePartials(zt.DefaultStyle(),m),!0)};c.blocks.push({id:`old-frame-${u}-block-0`,container:{type:"global",value:{maxHeight:.4,maxWidth:.96,minHeight:.1}},content:{type:"text",value:p}})}}return{meme:{frames:a},resources:{images:l}}})})}static imageSizes(e){return Rn(e,ro)}};Te(Ht,"FormatVersion","0.2.3"),Te(Ht,"EditorVersion","v0.2.6-2-g961ec99");let fr=Ht;class Nn extends Error{constructor(e,t){super(`Unsupported version: ${e}`,{cause:t})}}function Br(r,e){var n;const t=(n=r.shadow)!=null&&n.enabled?{blur:r.shadow.blur,color:r.shadow.color,offset:r.shadow.offset}:void 0;return{align:"center",baseline:e?"bottom":"middle",case:r.case,experimental:{},fill:{alpha:1,shadow:t,settings:Us(r.fill)},stroke:{alpha:1,shadow:t,settings:Us(r.stroke)},lineSpacing:r.experimental.lineWidthCoefficient*(r.experimental.lineSpacingCoefficient-.5),strokeWidth:r.experimental.lineWidthCoefficient*100,font:r.font}}function Us(r){switch(r.type){case"color":return{type:"color",value:r.name};case"pattern":return{type:"pattern",name:r.name,rotate:r.patternSettings.rotate,scale:r.patternSettings.scale,shift:r.patternSettings.shift};case"none":return{type:"disabled"};default:throw new Nn(`Failed convert old brush ${JSON.stringify(r)} to material settings`)}}var zt;(r=>{function e(){return{case:"UPPER",fill:{name:"#ffffff",type:"color",patternSettings:{rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}}},stroke:{name:"#000000",type:"color",patternSettings:{rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}}},name:"custom",font:{bold:!1,family:"Impact",italic:!1,smallCaps:!1},shadow:{enabled:!1,color:"#000000",blur:10,offset:{x:0,y:0}},experimental:{lineSpacingCoefficient:.5,lineWidthCoefficient:.1385,interpolationPoint:100}}}r.DefaultStyle=e;function t(i){return i!==null&&typeof i=="object"}function n(i,s){for(const o in i){const a=s[o],l=i[o];t(l)&&(!a||t(a))?s[o]=n(l,a||{}):a===void 0&&(s[o]=l)}return s}r.mergePartials=n})(zt||(zt={}));function J2(r,e){switch(e){case"As is":return r;case"UPPER":return r.toUpperCase();case"lower":return r.toLowerCase()}throw new Error(`Unsupported text case type: ${e}`)}class Q2{constructor(e=document.createElement("canvas").getContext("2d")){this.ctx=e}set baseline(e){this.ctx.textBaseline=e}get baseline(){return this.ctx.textBaseline}set align(e){this.ctx.textAlign=e}get align(){return this.ctx.textAlign}measureText(e,t,n){this.ctx.font=an(t,n);const i=this.ctx.measureText(e);return{advancedWidth:i.width,width:i.actualBoundingBoxLeft+i.actualBoundingBoxRight,height:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,boundingBox:{top:i.actualBoundingBoxAscent,bottom:i.actualBoundingBoxDescent,left:i.actualBoundingBoxLeft,right:i.actualBoundingBoxRight}}}}const hr=class hr{constructor(e,t=new Q2){Te(this,"heightMeasuresCache",new Map);this.statistics=e,this.measurer=t,t.baseline="bottom"}drawTextInfo(e,t,n,i){const s=J2(e,t.case).split(`
`);return this.drawLinesInfo(s,t.font,t.stroke.settings.type=="disabled"?0:t.strokeWidth/100,t.align,t.baseline,t.lineSpacing,n,i)}fontSize(e,t,n,i,s,o,a=100){if(e<2||t<2)return Math.min(e,t);const l=n.map(g=>{const $=this.measurer.measureText(g,i,a);return{line:g,width:$.width}}).reduce((g,$)=>$.width>g.width?$:g).line,u=s*a,h=(this.measurer.measureText(l,i,a).width+u)/a,m=e/h,p=n.length,d=t/(p+o*(p-1))/(1+s),_=jh(d,this.statistics.get(i));return Math.min(_,m)}measureReference(e,t){const n=an(e,t),i=this.heightMeasuresCache.get(n);if(i)return i;const s=this.measurer.measureText(hr.MAX_HEIGHT_TEXT_EXAMPLE,e,t);return this.heightMeasuresCache.set(n,s),s}linesHeight(e,t,n){return e*(t+n*(t-1))}drawLinesInfo(e,t,n,i,s,o,a,l){const u=this.fontSize(a-2,l-2,e,t,n,o),f=n*u,c=f/2,h=i=="left"?c:i=="right"?a-c:a/2|0,m=this.measureReference(t,u),p=m.height+f/2,d=p*(1+o),_=this.linesHeight(p,e.length,o)+f/2,g=s=="top"?0:s=="middle"?(l-_)/2|0:l-_,$=p+g-m.boundingBox.bottom,A=new Array;this.measurer.align=i;for(let w=0;w<e.length;w++){const R=e[w],I=this.measurer.measureText(R,t,u).boundingBox,U=$+w*d;let q=h;switch(i){case"center":q+=(I.left-I.right)/2;break;case"left":q+=I.left;break;case"right":q-=I.right;break}A.push({text:R,x:q,y:U})}return{lines:A,font:t,fontSize:u,lineWidth:f,stringHeight:p,totalHeight:_,baseline:"bottom",align:i}}};Te(hr,"MAX_HEIGHT_TEXT_EXAMPLE","AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZzАаБбВвГгДдЕеЁёЖжЗзИиЙйКкЛлМмНнОоПпРрСсТтУуФфХхЦцЧчШшЩщЪъЫыЬьЭэЮюЯя");let Zr=hr;const ca=`#version 300 es
precision highp  float;
precision highp  int;

vec2[6] v;
vec2[6] t;

out vec2 texCoord;
void main() {
    v[0] = vec2(-1, -1);
    v[1] = vec2(1, -1);
    v[2] = vec2(1, 1);
    v[3] = vec2(1, 1);
    v[4] = vec2(-1, 1);
    v[5] = vec2(-1, -1);
    int i = gl_VertexID;
    gl_Position = vec4(v[i], 0, 1);
    t[0] = vec2(0, 0);
    t[1] = vec2(1, 0);
    t[2] = vec2(1, 1);
    t[3] = vec2(1, 1);
    t[4] = vec2(0, 1);
    t[5] = vec2(0, 0);
    texCoord = vec2(t[i].x, t[i].y);
}`,eb=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D stencilSampler;
uniform vec3 color;
uniform float alpha;
uniform float blur;
uniform vec2 resolution;
uniform bool dim;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    if(blur <= 0.) {
        vec4 origin = texture(stencilSampler, texCoord);
        FragColor = vec4(color, alpha * origin.a);
        return;
    }

    float sum = 0.0;
    float r = blur * 0.5;
    float scaleX = 1. / resolution.x;
    float scaleY = 1. / resolution.y;
    float from = -2.0 * r;
    float to = 2.0 * r;
    float C1 = 2. * r * r;
    float C2 = sqrt(C1 * PI);
    float channel = float(dim);
    for(float delta = from; delta <= to; delta++) {
        float x = (1. - channel) * delta;
        float y = channel * delta;
        vec2 shift = vec2(x * scaleX, y * scaleY);
        vec4 origin = texture(stencilSampler, texCoord + shift);
        float g = exp(-(x * x + y * y) / C1) / C2;
        sum += origin.a * g;
    }
    FragColor = vec4(color, alpha * sum);
}`,tb=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D textureSampler;

in vec2 texCoord;
out vec4 FragColor;

void main() {
    FragColor = texture(textureSampler, texCoord);
}`,cr=`float channelAlpha(int currentChannel, int channels, vec4 o);

float fillAlpha(vec4 o) {
    return o.g * o.a;
}

float strokeFullAlpha(vec4 o) {
    float a = (1. - fillAlpha(o));
    if(a == 0.0)
        return o.a * o.r;
    return o.a * o.r / a;
}

float strokeSimpleAlpha(vec4 o) {
    return o.r * o.a;
}

#define STENCIL_CHANNEL_STROKE 1
#define STENCIL_CHANNEL_FILL 2

float channelAlpha(int currentChannel, int channels, vec4 o) {
    if(currentChannel == STENCIL_CHANNEL_FILL)
        return fillAlpha(o);
    if((channels & STENCIL_CHANNEL_FILL) != 0)
        return strokeFullAlpha(o);
    return strokeSimpleAlpha(o);
}

void main();`,ha=`#version 300 es
precision highp  float;
precision highp  int;

in vec3 position;
in vec2 textureCoordinate;

uniform mat4 transform;
uniform mat4 camera;

out vec2 texCoord;
void main() {
    gl_Position = camera * transform * vec4(position, 1);

    texCoord = textureCoordinate;
}`,ma=`#version 300 es
precision highp  float;
precision highp  int;

uniform sampler2D stencilSampler;
uniform float alpha;
uniform int channel;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int channel, vec4 o);

void main() {
    vec4 origin = texture(stencilSampler, texCoord);
    FragColor = vec4(texCoord, 0, channelAlpha(channel, origin) * alpha);
}
`;class nb{constructor(e,t=[{format:e.RGBA}]){Te(this,"freeBuffers",[]);Te(this,"usedBuffers",new Set);this.gl=e,this.options=t}get(e,t){const n=this.freeBuffers.pop();if(n)return(n.height!==t||n.width!==e)&&H2(this.gl,n,this.options,e,t),this.usedBuffers.add(n),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n.framebuffer),this.gl.clear(this.gl.COLOR_BUFFER_BIT),n;const i=G2(this.gl,this.options,e,t);return this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.usedBuffers.add(i),console.log(`Создан новый буфер, всего: ${this.usedBuffers.size}`),i}free(e){this.usedBuffers.delete(e)||console.trace("FrameBuffersPull: free not used buffer!"),this.freeBuffers.push(e)}clear(){this.freeBuffers.forEach(e=>{this.gl.deleteFramebuffer(e.framebuffer),e.attachments.forEach(t=>{this.gl.isTexture(t)?this.gl.deleteTexture(t):this.gl.deleteRenderbuffer(t)})}),console.log("FREEEE"),this.freeBuffers=[],this.usedBuffers.size&&console.trace(`FrameBuffersPull: call clear with ${this.usedBuffers.size} buffers in use!`)}}function rb({vertex:r,fragment:e}){return[r||ha,(e||ma)+cr]}function ib({vertex:r,fragment:e}){return[r||ca,(e||ma)+cr]}class sb{constructor(e,t,n,i){Te(this,"shaders");Te(this,"buffersPull");Te(this,"shadowProgram");Te(this,"imageProgram");Te(this,"rectangleBuffer");Te(this,"_canvasRenderBuffer",{framebuffer:null,width:0,height:0});this.gl=e,this.textures=t,e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);const s=Object.entries(n).map(([a,l])=>[a,rb(l)]).concat(Object.entries(i).map(([a,l])=>[a,ib(l)]),[["__shadow__",[ca,eb+cr]],["__image__",[ha,tb+cr]]]),o=A2(e,Object.fromEntries(s));this.shaders=Object.fromEntries(Object.entries({...n,...i}).map(([a,l])=>[a,{uniforms:(u,f,c)=>{if(l.uniforms)return l.uniforms(u,f,c);if(l.inputs){const h={};for(const m of l.inputs)V2(m,u,h);return h}return{}},info:o[a]}])),this.shadowProgram=o.__shadow__,this.imageProgram=o.__image__,this.rectangleBuffer=ks(e,{position:[[-.5,-.5,0],[.5,-.5,0],[.5,.5,0],[.5,.5,0],[-.5,.5,0],[-.5,-.5,0]].flat(),textureCoordinate:[[0,0],[1,0],[1,1],[1,1],[0,1],[0,0]].flat()}),this.buffersPull=new nb(this.gl)}get canvasRenderBuffer(){return this._canvasRenderBuffer}get size(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}}clear(){this.buffersPull.clear()}resize(e,t){this.canvasRenderBuffer.width==e&&this.canvasRenderBuffer.height==t||(this.gl.canvas.width=this._canvasRenderBuffer.width=e,this.gl.canvas.height=this._canvasRenderBuffer.height=t,this.gl.viewport(0,0,e,t))}drawImage(e){this.gl.useProgram(this.imageProgram.program),this.imageProgram.uniformSetters.textureSampler(e),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}drawShadow(e,t,n,i,s,o,a){const l=this.gl,u=this.buffersPull.get(a.width,a.height);this.drawStencilLayer(e,t,n,{...i,position:{x:i.position.x+o.offset.x,y:i.position.y+o.offset.y}},s,u,!1);const f={color:Wt(o.color),alpha:1,resolution:[this.size.width,this.size.height],blur:Math.min(o.blur,3600)};l.useProgram(this.shadowProgram.program);const c=this.buffersPull.get(a.width,a.height);l.bindFramebuffer(l.FRAMEBUFFER,c.framebuffer),l.clear(l.COLOR_BUFFER_BIT),pn(this.shadowProgram,{...f,stencilSampler:u.attachments[0],dim:0}),l.drawArrays(l.TRIANGLES,0,6),l.bindFramebuffer(l.FRAMEBUFFER,a.framebuffer),pn(this.shadowProgram,{...f,stencilSampler:c.attachments[0],dim:1}),l.drawArrays(l.TRIANGLES,0,6),this.buffersPull.free(u),this.buffersPull.free(c)}drawStencilLayer(e,t,n,i,s,o=this.canvasRenderBuffer,a=!0){const l=this.gl;if(s.settings.type=="disabled")return;a&&s.shadow&&this.drawShadow(e,t,n,i,s,s.shadow,o);const u=this.shaders[s.settings.type],f={camera:ut.ortho(0,this.size.width,this.size.height,0,-100,100),transform:ut.scale(ut.rotateZ(ut.translation([i.position.x,i.position.y,0]),i.rotation),[i.width,i.height,1]),stencilSampler:e,channel:t,channels:n,alpha:s.alpha,...u.uniforms(s.settings,i,this)};l.useProgram(u.info.program),pn(u.info,f),Nr(l,u.info,this.rectangleBuffer),l.bindFramebuffer(l.FRAMEBUFFER,o.framebuffer),l.drawArrays(l.TRIANGLES,0,6)}drawModifications(e,t,n,i,s){const o=this.gl;o.disable(o.BLEND);const a=this.buffersPull.get(i.width,i.height),l=s?n:this.buffersPull.get(i.width,i.height);let u=n,f=a;for(let c=0;c<e.length;c++){const h=c===e.length-1?i:f,m=e[c],p=this.shaders[m.type],d={layer:u.attachments[0],resolution:[this.size.width,this.size.height],...p.uniforms(m.settings,t,this)};o.bindFramebuffer(o.FRAMEBUFFER,h.framebuffer),h!==i?o.clear(o.COLOR_BUFFER_BIT):o.enable(o.BLEND),o.useProgram(p.info.program),pn(p.info,d),Nr(o,p.info,this.rectangleBuffer),o.drawArrays(o.TRIANGLES,0,6),h!==i&&(f=u,u=h)}this.buffersPull.free(a),s||this.buffersPull.free(l)}drawRectImage(e,t,n,i){const s=this.gl,o=this.imageProgram,a={camera:ut.ortho(0,this.size.width,this.size.height,0,-100,100),transform:ut.scale(ut.rotateZ(ut.translation([t.position.x,t.position.y,0]),t.rotation),[t.width,t.height,1]),textureSampler:e};s.useProgram(o.program),pn(o,a);const l=ks(s,{textureCoordinate:ob(n)},this.rectangleBuffer);Nr(s,o,l),s.bindFramebuffer(s.FRAMEBUFFER,i.framebuffer),s.drawArrays(s.TRIANGLES,0,6)}}function ob(r){return[r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[2].x,r[2].y,r[3].x,r[3].y,r[0].x,r[0].y]}function ab(r){const e=new Set(Object.keys(r));return["empty","await"].every(t=>e.has(t))}function lb(r){return Object.values(r).every(ab)}class ub{constructor(e,t,n,i,s,o){Te(this,"textures");Te(this,"drawer");Te(this,"meme",{frames:[]});Te(this,"activeFrame");Te(this,"activeBlock");Te(this,"inUpdate",{meme:!1,frame:!1,block:!1});Te(this,"gl");Te(this,"backgroundTasks",new Map);Te(this,"placeholdersTextures",new Array);Te(this,"usedImages",new Map);Te(this,"blockIdGenerator",new no("v.0.2.0-"+Date.now().toString()+"-"));Te(this,"setBackground",e=>{const t=new FileReader,n=new Promise((i,s)=>{t.addEventListener("load",()=>i(t.result)),t.addEventListener("error",()=>s(t.error))});t.readAsDataURL(e),this.runTask("Меняем фон",n.then(i=>this.textures.downloadImage(i,{meta:{source:"user",type:"image"}}).then(s=>{let o=this.activeFrame.blocks[0].content.type==="image"&&this.activeFrame.blocks[0].container.type==="global"?this.activeFrame.blocks[0]:null;if(o){const a=this.activeFrame.blocks[0].content.value;this.removeImageUsage(this.activeFrame.blocks[0]),o.content={type:"image",value:{name:a.name,id:s.id,crop:{position:{x:.5,y:.5},height:1,rotation:0,width:1}}}}else o={id:this.blockIdGenerator.generate(),effects:[],container:{type:"global",value:{maxHeight:1,maxWidth:1,minHeight:1}},content:{type:"image",value:{name:"Фон",id:s.id,crop:{position:{x:.5,y:.5},height:1,rotation:0,width:1}}}},this.activeFrame.blocks.unshift(o);this.activeFrame.width=s.width,this.activeFrame.height=s.height,this.addImageUsage(o),this.frameUpdated()})))});Te(this,"drawPreviewAsync",cb(e=>{this.drawer.drawFrame(e),this.drawPreview(e)},250));Te(this,"zipCanvas",document.createElement("canvas"));Te(this,"zipCtx",this.zipCanvas.getContext("2d"));this.stores=e;const a=t.getContext("webgl2",{premultipliedAlpha:!1});if(!a)throw new Error("Failed to create WebGL2 context!");this.gl=a,this.textures=new W2(a);const l=Zh(),u=new sb(a,this.textures,o.materials,o.effects);this.drawer=new Z2(a,this.textures,new Zr(l.store),u),this.runTask("Загрузка ресурсов",Promise.all(n.map(({name:c,url:h})=>this.textures.downloadImage(h,{id:c,wrap:a.REPEAT,meta:{source:"default",type:"pattern"}}).then(m=>[c,m]))).then(c=>c.map(([h,m])=>({name:h,textureId:m.id}))).then(c=>It.addPattern(...c))),this.runTask("Загрузка шрифтов",Kh()),this.runTask("Загрузка метрик шрифтов",l.then),this.runTask("Загрузка плейсхолдеров",Promise.all(Object.entries(i).map(([c,{empty:h}])=>Promise.all(h.map(({name:m,url:p})=>this.textures.downloadImage(p,{id:`placeholder-${c}-${m}`,meta:{source:"default",type:"image"}}))).then(m=>[c,m]))).then(Object.fromEntries).then(c=>this.placeholdersTextures=c[s]??c.default).then(()=>this.deleteFrame(this.activeFrame)).then(()=>this.draw(this.activeFrame,!0)));const f=fb(()=>this.draw());e.meme.subscribe(c=>{this.inUpdate.meme||(this.meme=c)}),e.frame.subscribe(c=>{f(),!this.inUpdate.frame&&(this.activeFrame=c)}),e.block.subscribe(c=>{f(),!this.inUpdate.block&&(this.activeBlock=c)})}get busy(){return this.backgroundTasks.size!=0}get currentTask(){return this.busy?this.backgroundTasks.values().next().value:""}runTask(e,t){return this.backgroundTasks.set(t,e),this.stores.busy.set(this.currentTask),t.catch(n=>{throw this.stores.error.set(n),n}),t.finally(()=>{this.backgroundTasks.delete(t),this.stores.busy.set(this.currentTask)}),t}addImageUsage(e){if(e.content.type!="image")return;const t=e.content.value.id;if(this.textures.get(t).meta.source=="default")return;let i=this.usedImages.get(t);i||this.usedImages.set(t,i=new Set),i.add(e)}removeImageUsage(e){if(e.content.type!="image")return;const t=e.content.value.id;if(this.textures.get(t).meta.source=="default")return;const i=this.usedImages.get(t);i&&(i.delete(e),i.size==0&&this.textures.delete(t))}memeUpdated(){this.inUpdate.meme=!0,this.stores.meme.set(this.meme),this.inUpdate.meme=!1}frameUpdated(){this.inUpdate.frame=!0,this.stores.frame.set(this.activeFrame),this.inUpdate.frame=!1}blockUpdated(){this.inUpdate.block=!0,this.stores.block.set(this.activeBlock),this.inUpdate.block=!1}shiftBlock(e,t){const n=this.activeFrame.blocks,i=n.indexOf(e),s=i+t;s<0||n.length<=s||(n[i]=n[s],n[s]=e,this.frameUpdated())}shiftFrame(e,t){const n=this.meme.frames,i=n.indexOf(e),s=i+t;s<0||n.length<=s||(n[i]=n[s],n[s]=e,this.memeUpdated())}cloneBlock(e){const t=rn(e);t.id=this.blockIdGenerator.generate(),this.addBlock(t)}addBlock(e){this.addImageUsage(e),this.activeFrame.blocks.push(e),this.frameUpdated(),this.activeBlock=e,this.blockUpdated()}addTextBlock(e=this.activeBlock){e.content.type!=="text"&&(e=this.activeFrame.blocks.find(n=>n.content.type==="text")),e=rn(e),e.id=this.blockIdGenerator.generate(),e.content.type==="text"&&(e.content.value.text="Текст",e.container.type==="global"&&(e.content.value.style.baseline="middle",e.content.value.style.align="center"));const t=this.activeFrame;e.container={type:"rectangle",value:{width:t.width*.5|0,height:t.height*.5|0,position:{x:t.width*.5|0,y:t.height*.5|0},rotation:0}},this.addBlock(e)}newImageBlock(e,t){const n=this.activeFrame;let i=t.width,s=t.height;const o=i/s;i>n.width*.6&&(i=n.width*.6,s=i/o),s>n.height*.6&&(s=n.height*.6,i=s*o);const a={id:this.blockIdGenerator.generate(),effects:[],container:{type:"rectangle",value:{height:s,width:i,position:{x:n.width/2,y:n.height/2},rotation:0}},content:{type:"image",value:{name:e,id:t.id,crop:{position:{x:.5,y:.5},height:1,rotation:0,width:1}}}};this.addBlock(a)}addImageBlock(e){if(!e){this.newImageBlock("Картинка",this.placeholdersTextures[Math.floor(Math.random()*this.placeholdersTextures.length)]);return}const t=new FileReader,n=new Promise((i,s)=>{t.addEventListener("load",()=>i(t.result)),t.addEventListener("error",()=>s(t.error))});t.readAsDataURL(e),this.runTask("Создаём блок с картинкой",n.then(i=>this.textures.downloadImage(i,{meta:{source:"user",type:"image"}}).then(s=>{const o=this.activeFrame;let a=s.width,l=s.height;const u=a/l;a>o.width*.6&&(a=o.width*.6,l=a/u),l>o.height*.6&&(l=o.height*.6,a=l*u);const f={id:this.blockIdGenerator.generate(),effects:[],container:{type:"rectangle",value:{height:l,width:a,position:{x:o.width/2,y:o.height/2},rotation:0}},content:{type:"image",value:{name:e.name,id:s.id,crop:{position:{x:.5,y:.5},height:1,rotation:0,width:1}}}};this.addImageUsage(f),this.activeFrame.blocks.push(f),this.frameUpdated(),this.activeBlock=f,this.blockUpdated()})))}modifyImageBlock(e,t){const n=e.content;if(n.type==="text"||e===this.activeFrame.blocks[0]){this.setBackground(t);return}const i=new FileReader,s=new Promise((o,a)=>{i.addEventListener("load",()=>o(i.result)),i.addEventListener("error",()=>a(i.error))});i.readAsDataURL(t),this.runTask("Меняем картинку",s.then(o=>{this.textures.downloadImage(o,{meta:{source:"user",type:"image"}}).then(a=>{const l=n.value;this.removeImageUsage(e),l.id=a.id,this.addImageUsage(e);const u=e.container;if(u.type==="rectangle"){const f=this.activeFrame;let c=a.width,h=a.height;const m=c/h;c>f.width*.6&&(c=f.width*.6,h=c/m),h>f.height*.6&&(h=f.height*.6,c=h*m),u.value.height=h,u.value.width=c}this.frameUpdated()})}))}newFrame(e){var n,i;const t={...rn(((i=(n=this.activeBlock)==null?void 0:n.content)==null?void 0:i.type)==="text"?this.activeBlock.content.value.style:Xs),baseline:"bottom"};return{id:this.blockIdGenerator.generate(),blocks:[{id:this.blockIdGenerator.generate(),container:{type:"global",value:{maxHeight:1,maxWidth:1,minHeight:1}},content:{type:"image",value:{name:"Фон",id:e.id,crop:{position:{x:.5,y:.5},height:1,rotation:0,width:1}}},effects:[]},{id:this.blockIdGenerator.generate(),container:{type:"global",value:{maxWidth:.96,maxHeight:.4,minHeight:0}},content:{type:"text",value:{text:"",style:t}},effects:[]}],height:e.height,width:e.width,backgroundAlpha:1,backgroundColor:"#ffffff"}}copyFrame(e){const t=rn(e);return t.id=this.blockIdGenerator.generate(),e.blocks.forEach(n=>n.id=this.blockIdGenerator.generate()),t}addFrame(e){const t=e?this.copyFrame(e):this.newFrame(this.placeholdersTextures[Math.floor(Math.random()*this.placeholdersTextures.length)]);return this.meme.frames.push(t),this.activeFrame=t,t.blocks.forEach(n=>this.addImageUsage(n)),this.memeUpdated(),this.frameUpdated(),t}deleteBlock(e){const t=this.activeFrame.blocks.indexOf(e);if(e.id==this.activeBlock.id){const n=t==this.activeFrame.blocks.length-1?t-1:t+1;n>=0?(this.activeBlock=this.activeFrame.blocks[n],this.blockUpdated()):this.addTextBlock()}this.removeImageUsage(e),this.activeFrame.blocks.splice(t,1),this.frameUpdated()}deleteFrame(e){const t=this.meme.frames.indexOf(e);if(e.id==this.activeFrame.id){const n=t==this.meme.frames.length-1?t-1:t+1;n>=0?(this.activeFrame=this.meme.frames[n],this.frameUpdated()):this.addFrame()}this.meme.frames.splice(t,1),e.blocks.forEach(n=>this.removeImageUsage(n)),this.memeUpdated()}copyFrameToClipboard(){return this.runTask("Копируем",this.frameBlob(this.activeFrame).then(e=>hb(e)))}frameBlob(e){return this.drawer.drawFrame(e),Mr(this.gl.canvas)}drawPreview(e){var t,n;(n=(t=this.stores.previews.value)[e.id])==null||n.call(t,this.gl.canvas)}draw(e=this.activeFrame,t=!1){this.busy&&!t||(this.drawer.drawFrame(e),t?this.drawPreview(e):this.drawPreviewAsync(e))}renderMeme(){return this.runTask("Пакуем мем",Promise.all(this.meme.frames.map(e=>this.frameBlob(e))).then(e=>{if(this.drawer.drawFrame(this.activeFrame),e.length==1)return{ext:"png",blob:e[0]};const t=new rr,n=e.length.toString().length;return e.forEach((i,s)=>{t.file(`${(s+1).toString().padStart(n,"0")}.png`,i,{binary:!0})}),t.generateAsync({type:"blob"}).then(i=>({ext:"zip",blob:i}))}))}getImagesList(e=this.meme){return Array.from(new Set(e.frames.flatMap(t=>t.blocks.map(n=>n.content).map(n=>n.type=="image"?this.textures.get(n.value.id):"").filter(n=>n&&n.meta.source=="user"&&n.meta.type=="image"))))}getPatternsList(e=this.meme){return Array.from(new Set(e.frames.flatMap(t=>t.blocks.map(n=>n.content).flatMap(n=>{if(n.type!="text")return[];const i=[],s=n.value.style;return s.fill.settings.type=="pattern"&&i.push(s.fill.settings.name),s.stroke.settings.type=="pattern"&&i.push(s.stroke.settings.name),i}).filter(n=>n)))).map(t=>({name:t,texture:this.textures.get(It.getTexture(t))})).filter(({texture:t})=>t.meta.source=="user")}exportMeme(){const e=this.getImagesList(),t=this.getPatternsList();return this.runTask("Пакуем мем",Promise.all([Promise.all(e.map(n=>(this.zipCanvas.width=n.width,this.zipCanvas.height=n.height,this.zipCtx.drawImage(n.original,0,0),Mr(this.zipCanvas).then(i=>({id:n.id,blob:i}))))),Promise.all(t.map(({name:n,texture:i})=>(this.zipCanvas.width=i.width,this.zipCanvas.height=i.height,this.zipCtx.drawImage(i.original,0,0),Mr(this.zipCanvas).then(s=>({name:n,blob:s})))))]).then(([n,i])=>fr.toFile({meme:this.meme,resources:{images:n,patterns:i}})))}openMeme(e){return this.runTask("Распаковываем мем",fr.fromFile(e).then(t=>(this.getImagesList().forEach(n=>this.textures.delete(n.id)),this.usedImages.clear(),Promise.all(t.resources.images.map(({id:n,blob:i})=>Rn(i,s=>this.textures.downloadImage(s,{id:n,meta:{source:"user",type:"image"}}))).concat(t.resources.patterns.map(({name:n,blob:i})=>Rn(i,s=>(It.has(n)&&(this.textures.delete(It.getTexture(n)),It.delete(n)),this.textures.downloadImage(s,{meta:{source:"user",type:"pattern"}}).then(o=>It.addPattern({name:n,textureId:o.id}))))))).then(()=>(this.meme=t.meme,this.meme.frames.flatMap(n=>n.blocks).forEach(n=>this.addImageUsage(n)),this.activeFrame=this.meme.frames[0],this.memeUpdated(),this.frameUpdated(),zr())).then(()=>{this.meme.frames.forEach(n=>this.draw(n,!0)),this.draw()}))))}framesFromImages(e){return this.runTask("Загружаем картинки",Promise.all(e.map(t=>Rn(t,n=>this.textures.downloadImage(n,{meta:{source:"user",type:"image"}})))).then(t=>t.map(n=>this.addFrame(this.newFrame(n)))).then(t=>zr().then(()=>t)).then(t=>{t.forEach(n=>this.draw(n,!0))}))}addPattern(e,t){return this.runTask("Добавляем паттерн",Rn(t,n=>this.textures.downloadImage(n,{meta:{source:"user",type:"pattern"}})).then(n=>{const i={name:e,textureId:n.id};return It.addPattern(i),i})).then(()=>this.draw(this.activeFrame))}clear(){It.clear(),this.textures.clear(),this.usedImages.clear(),this.drawer.clear()}}function fb(r){let e=0;return(...t)=>{e||(e=requestAnimationFrame(()=>{e=0,r.apply(void 0,t)}))}}function cb(r,e){let t=0;return(...n)=>{t&&clearTimeout(t),t=setTimeout(()=>{t=0,r.apply(void 0,n)},e)}}function Mr(r){return new Promise((e,t)=>r.toBlob(n=>{if(!n){t(new Error("Failed to get blob from canvas"));return}e(n)}))}class da extends Error{constructor(e,t){super(e),this.blob=t}}function hb(r){return window.ClipboardItem?window.navigator.clipboard.write([new ClipboardItem({[r.type]:r})]):Promise.reject(new da("Ваш браузер не поддерживает копирование изображений из скриптов.",r))}const mb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform float brightness;
uniform float contrast;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec4 color = texture(layer, texCoord);
    color.rgb += brightness - 0.5;
    if(contrast > 0.0)
        color.rgb /= (1.0 - contrast);
    else
        color.rgb *= (1.0 + contrast);
    color.rgb += 0.5;

    FragColor = color;
}
`,db={title:"Яркость и контраст",fragment:mb,inputs:[{name:"brightness",title:"Яркость",default:0,input:{type:"float",min:-1,max:1,step:.05,layout:wt.RANGE}},{name:"contrast",title:"Контраст",default:0,input:{type:"float",min:-1,max:1,step:.05,layout:wt.RANGE}}]},pb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float strength;
uniform vec2 center;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec2 coord = gl_FragCoord.xy;
    vec2 center = vec2(center.x, resolution.y - center.y);
    coord -= center;
    float distance = length(coord);
    float percent = distance / radius;
    coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
    coord += center;
    FragColor = texture(layer, coord / resolution);
}
`,_b={title:"Выпуклость",fragment:pb,inputs:[{name:"strength",default:.5,title:"Сила",input:{type:"float",min:0,max:1.5,step:.05,layout:wt.RANGE}},{name:"radius",default:50,title:"Радиус",input:{type:"float",min:0,step:1}},{name:"center",default:{type:"frame",value:{x:.5,y:.5}},title:"Центр",input:{type:"point",color:"#0fff00"}}]},gb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec4 color = texture(layer, texCoord);
    float value = 0.2126 * color.r + 0.7152 * color.g + 0.0722 * color.b;
    FragColor = vec4(value, value, value, color.a);
}
`,bb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float minAlpha;
uniform float maxAlpha;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

float rand(vec2 co, float step) {
    return fract(cos(dot(co * step, vec2(15.2851, 18.435))) * 74687.84583);
}

void main() {
    // texCoord 0..1
    float sx = (rand(texCoord, 1.));
    float sy = (rand(texCoord, 2.));
    vec2 shift = vec2(sx, sy) * 2. - vec2(1);
    shift *= vec2(radius / resolution);
    vec4 origin = texture(layer, texCoord);
    origin += texture(layer, texCoord + shift);
    origin /= 2.;
    float rnd = rand(texCoord, 3.);
    FragColor = vec4(origin.rgb, origin.a * clamp(rnd, minAlpha, maxAlpha));
}
`,vb=[{name:"radius",title:"Радиус",description:"Радиус разброса пикселей",default:10,input:{type:"float",min:0,step:1}},{name:"minAlpha",title:"Минимальный альфа-канал",default:.5,input:{type:"float",min:0,max:1,step:.05,layout:wt.RANGE}},{name:"maxAlpha",title:"Максимальный альфа-канал",default:1,input:{type:"float",min:0,max:1,step:.05,layout:wt.RANGE}}],$b={title:"Шум",fragment:bb,inputs:vb},wb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float strength;
uniform vec2 center;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec2 coord = gl_FragCoord.xy;
    vec2 center = vec2(center.x, resolution.y - center.y);
    coord -= center;
    float distance = length(coord);
    float percent = distance / radius;
    if(percent <= 1.0)
        coord *= mix(1.0, pow(percent, 1.0 - strength * 0.75) * radius / distance, 1.0 - percent);
    coord += center;
    FragColor = texture(layer, coord / resolution);
}
`,yb=[{name:"strength",default:.5,title:"Сила",input:{type:"float",min:0,max:1.5,step:.05,layout:wt.RANGE}},{name:"radius",default:50,title:"Радиус",input:{type:"float",min:0,step:1}},{name:"center",default:{type:"frame",value:{x:.5,y:.5}},title:"Центр",input:{type:"point",color:"#ff00ff"}}],Eb={title:"Вогнутость",fragment:wb,inputs:yb},kb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float angle;
uniform vec2 center;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec2 coord = gl_FragCoord.xy;
    vec2 center = vec2(center.x, resolution.y - center.y);
    coord -= center;
    float distance = length(coord);
    if(distance < radius) {
        float percent = (radius - distance) / radius;
        float theta = percent * percent * angle;
        float s = sin(theta);
        float c = cos(theta);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }
    coord += center;
    FragColor = texture(layer, coord / resolution);
}
`,Ab={title:"Закрученность",fragment:kb,inputs:[{name:"angle",title:"Угол",default:180,input:{type:"angle",mode:Yr.RADIAN,step:.5}},{name:"radius",title:"Радиус",default:50,input:{type:"float",min:0,step:1}},{name:"center",title:"Центр",default:{type:"frame",value:{x:.5,y:.5}},input:{type:"point",color:"#0aaaa0"}}]},Sb=`#version 300 es

precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform float temperature;
uniform float strength;

in vec2 texCoord;
out vec4 FragColor;

const float LuminancePreservationFactor = 1.0;

// Source: https://www.shadertoy.com/view/4sc3D7 
// Copyright (C) 2014 by Benjamin 'BeRo' Rosseaux
// http://creativecommons.org/publicdomain/zero/1.0/
// Valid from 1000 to 40000 K (and additionally 0 for pure full white)
vec3 colorTemperatureToRGB(const in float temperature) {
  // Values from: http://blenderartists.org/forum/showthread.php?270332-OSL-Goodness&p=2268693&viewfull=1#post2268693   
    mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690), vec3(0.0, 1669.5803561666639, 2575.2827530017594), vec3(1.0, 1.3302673723350029, 1.8993753891711275)) : mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690), vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594), vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));
    return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)), vec3(1.0), smoothstep(1000.0, 0.0, temperature));
}

void main() {
    vec4 inColor = texture(layer, texCoord);
    vec3 outColor = mix(inColor.rgb, inColor.rgb * colorTemperatureToRGB(temperature), strength);
    outColor *= mix(1.0, dot(inColor.rgb, vec3(0.2126, 0.7152, 0.0722)) / max(dot(outColor, vec3(0.2126, 0.7152, 0.0722)), 1e-5), LuminancePreservationFactor);
    FragColor = vec4(outColor, inColor.a);
}`,Tb={title:"Температура",fragment:Sb,inputs:[{name:"temperature",title:"Температура",default:6550,input:{type:"float",min:1e3,max:2e4,step:100,layout:wt.RANGE}},{name:"strength",default:1,title:"Сила",input:{type:"float",min:-1,max:1,step:.05,layout:wt.RANGE}}]},Ib=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;

in vec2 texCoord;
out vec4 FragColor;

void main() {
    vec2 center = round(texCoord * resolution / radius);
    vec2 coords = center * vec2(radius) / resolution;
    vec4 origin = texture(layer, coords);
    FragColor = origin;
}
`,Cb=[{name:"radius",title:"Радиус",description:"Размер пикселя",default:10,input:{type:"float",min:1,step:1}}],Rb={title:"Пиксели",fragment:Ib,inputs:Cb};function Fb(){return{noise:$b,bugle:_b,pinch:Eb,swirl:Ab,grayscale:{title:"Оттенки серого",fragment:gb},brightness_contrast:db,temperature:Tb,pixelation:Rb}}const Nb=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D stencilSampler;
uniform vec3 color;
uniform float alpha;
uniform int channel;
uniform int channels;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int currentChannel, int channels, vec4 o);

void main() {
    vec2 tcoords = texCoord;
    vec4 origin = texture(stencilSampler, tcoords);
    float originAlpha = channelAlpha(channel, channels, origin);
    FragColor = vec4(color, originAlpha * alpha);
}
`,Pb={fragment:Nb,uniforms(r){return{color:Wt(r.value)}}},Bb=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D stencilSampler;
uniform vec3 colors[4];
uniform float alpha;
uniform int channel;
uniform int channels;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int currentChannel, int channels, vec4 o);

void main() {
    vec4 origin = texture(stencilSampler, texCoord);
    vec3 color = (1.0 - texCoord.x) * colors[0];
    color += (texCoord.x) * colors[1];
    color += (1.0 - texCoord.y) * colors[2];
    color += (texCoord.y) * colors[3];
    FragColor = vec4(color, channelAlpha(channel, channels, origin) * alpha);
}
`,Mb={fragment:Bb,uniforms(r){return{colors:[Wt(r.color1),Wt(r.color2),Wt(r.color3),Wt(r.color4)].flat()}}},zb=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D stencilSampler;
uniform sampler2D patternSampler;
uniform float alpha;
uniform int channel;
uniform int channels;
uniform mat4 patternTransform;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int currentChannel, int channels, vec4 o);

void main() {
    vec4 origin = texture(stencilSampler, texCoord);
    vec4 patternCoord = patternTransform * vec4(texCoord, 0, 1);
    FragColor = texture(patternSampler, patternCoord.xy / patternCoord.w);
    FragColor.a *= channelAlpha(channel, channels, origin) * alpha;
}
`;function Ub(r){return{fragment:zb,uniforms(e,t,n){const i=n.textures.get(r.getTexture(e.name)),s=e.scale=="font"?ut.identity():ut.scaling([t.width/(i.width*e.scale.x),t.height/(i.height*e.scale.y),1]);return{patternSampler:i.texture,patternTransform:ut.multiply(ut.rotateZ(ut.translation([e.shift.x/i.width,e.shift.y/i.height,0]),e.rotate/180*Math.PI),s)}}}}function Db(r){return{color:Pb,pattern:Ub(r),gradient4:Mb}}function Lb(r){let e,t;return{c(){e=J("article"),t=ue(r[7]),this.h()},l(n){e=Q(n,"ARTICLE",{class:!0});var i=ne(e);t=fe(i,r[7]),i.forEach(S),this.h()},h(){x(e,"class","svelte-1ow4yee")},m(n,i){O(n,e,i),H(e,t)},p(n,i){i[0]&128&&st(t,n[7])},d(n){n&&S(e)}}}function xb(r){let e,t,n,i;return{c(){e=J("article"),t=ue("Произошла ошибка: "),n=ue(r[5]),i=ue("."),this.h()},l(s){e=Q(s,"ARTICLE",{class:!0});var o=ne(e);t=fe(o,"Произошла ошибка: "),n=fe(o,r[5]),i=fe(o,"."),o.forEach(S),this.h()},h(){x(e,"class","svelte-1ow4yee")},m(s,o){O(s,e,o),H(e,t),H(e,n),H(e,i)},p(s,o){o[0]&32&&st(n,s[5])},d(s){s&&S(e)}}}function Ob(r){let e;return{c(){e=ue("У нас проблемы")},l(t){e=fe(t,"У нас проблемы")},m(t,n){O(t,e,n)},d(t){t&&S(e)}}}function Gb(r){let e,t,n,i,s,o,a,l,u,f,c,h,m,p,d,_;e=new bn({props:{open:r[7]!=="",closable:!1,$$slots:{default:[Lb]},$$scope:{ctx:r}}}),n=new bn({props:{open:r[5]!==void 0,$$slots:{title:[Ob],default:[xb]},$$scope:{ctx:r}}});function g(V){r[25](V)}let $={};r[4]!==void 0&&($.fallbackBlob=r[4]),s=new zf({props:$}),_e.push(()=>ge(s,"fallbackBlob",g));function A(V){r[26](V)}function w(V){r[27](V)}function R(V){r[28](V)}function I(V){r[29](V)}function U(V){r[30](V)}function q(V){r[31](V)}function j(V){r[32](V)}let L={effectsShaders:r[20].effects,version:"v0.2.6-2-g961ec99",memeExampleURL:r[0]};return r[8]!==void 0&&(L.meme=r[8]),r[9]!==void 0&&(L.frame=r[9]),r[10]!==void 0&&(L.block=r[10]),r[11]!==void 0&&(L.editorState=r[11]),r[3]!==void 0&&(L.canvasUI=r[3]),r[2]!==void 0&&(L.canvasWebgl=r[2]),r[12]!==void 0&&(L.previews=r[12]),l=new J0({props:L}),_e.push(()=>ge(l,"meme",A)),_e.push(()=>ge(l,"frame",w)),_e.push(()=>ge(l,"block",R)),_e.push(()=>ge(l,"editorState",I)),_e.push(()=>ge(l,"canvasUI",U)),_e.push(()=>ge(l,"canvasWebgl",q)),_e.push(()=>ge(l,"previews",j)),l.$on("openMeme",r[33]),l.$on("saveMeme",r[34]),l.$on("renderMeme",r[35]),l.$on("changeBackground",r[36]),l.$on("frameToClipboard",r[21]),l.$on("cloneBlock",r[37]),l.$on("createTextBlock",r[38]),l.$on("createImageBlock",r[39]),l.$on("modifyImageBlock",r[40]),l.$on("shiftBlock",r[41]),l.$on("deleteBlock",r[42]),l.$on("createFrame",r[43]),l.$on("shiftFrame",r[44]),l.$on("deleteFrame",r[45]),l.$on("framesFromImages",r[46]),l.$on("addPattern",r[47]),{c(){P(e.$$.fragment),t=se(),P(n.$$.fragment),i=se(),P(s.$$.fragment),a=se(),P(l.$$.fragment)},l(V){B(e.$$.fragment,V),t=oe(V),B(n.$$.fragment,V),i=oe(V),B(s.$$.fragment,V),a=oe(V),B(l.$$.fragment,V)},m(V,C){M(e,V,C),O(V,t,C),M(n,V,C),O(V,i,C),M(s,V,C),O(V,a,C),M(l,V,C),_=!0},p(V,C){const F={};C[0]&128&&(F.open=V[7]!==""),C[0]&128|C[1]&1048576&&(F.$$scope={dirty:C,ctx:V}),e.$set(F);const b={};C[0]&32&&(b.open=V[5]!==void 0),C[0]&32|C[1]&1048576&&(b.$$scope={dirty:C,ctx:V}),n.$set(b);const K={};!o&&C[0]&16&&(o=!0,K.fallbackBlob=V[4],be(()=>o=!1)),s.$set(K);const pe={};C[0]&1&&(pe.memeExampleURL=V[0]),!u&&C[0]&256&&(u=!0,pe.meme=V[8],be(()=>u=!1)),!f&&C[0]&512&&(f=!0,pe.frame=V[9],be(()=>f=!1)),!c&&C[0]&1024&&(c=!0,pe.block=V[10],be(()=>c=!1)),!h&&C[0]&2048&&(h=!0,pe.editorState=V[11],be(()=>h=!1)),!m&&C[0]&8&&(m=!0,pe.canvasUI=V[3],be(()=>m=!1)),!p&&C[0]&4&&(p=!0,pe.canvasWebgl=V[2],be(()=>p=!1)),!d&&C[0]&4096&&(d=!0,pe.previews=V[12],be(()=>d=!1)),l.$set(pe)},i(V){_||(y(e.$$.fragment,V),y(n.$$.fragment,V),y(s.$$.fragment,V),y(l.$$.fragment,V),_=!0)},o(V){k(e.$$.fragment,V),k(n.$$.fragment,V),k(s.$$.fragment,V),k(l.$$.fragment,V),_=!1},d(V){z(e,V),V&&S(t),z(n,V),V&&S(i),z(s,V),V&&S(a),z(l,V)}}}function Hb(r){let e,t,n;function i(o){r[48](o)}let s={$$slots:{default:[Gb]},$$scope:{ctx:r}};return r[6]!==void 0&&(s.theme=r[6]),e=new tp({props:s}),_e.push(()=>ge(e,"theme",i)),{c(){P(e.$$.fragment)},l(o){B(e.$$.fragment,o)},m(o,a){M(e,o,a),n=!0},p(o,a){const l={};a[0]&8127|a[1]&1048576&&(l.$$scope={dirty:a,ctx:o}),!t&&a[0]&64&&(t=!0,l.theme=o[6],be(()=>t=!1)),e.$set(l)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function jb(r,e,t){let n,i,s,o,a,l,u,f;Tt(r,ws,E=>t(6,i=E));let{patternUrls:c}=e,{placeholdersUrls:h}=e,{memeURL:m=null}=e,{memeExampleURL:p}=e;const d=new An({frames:[{height:300,width:600,backgroundColor:"#ffffff",backgroundAlpha:1,id:"loading-placeholder",blocks:[{id:"loading-block-placeholder",container:{type:"global",value:{maxHeight:.9,maxWidth:.9,minHeight:0}},content:{type:"text",value:{text:"Loading...",style:Xs}},effects:[]}]}]});Tt(r,d,E=>t(8,o=E));const _=new An(d.value.frames[0]);Tt(r,_,E=>t(9,a=E));const g=new An(_.value.blocks.find(E=>E.content.type=="text"));Tt(r,g,E=>t(10,l=E));let $=_.value.id;d.subscribe(()=>{$=""}),_.subscribe(E=>{$!=E.id&&($=E.id,g.set(E.blocks.find(G=>G.content.type=="text")))});const A=new An({available:[jt.Cursor],mode:jt.Cursor});Tt(r,A,E=>t(11,u=E));let w,R,I,U=new An({});Tt(r,U,E=>t(12,f=E));let q=Pn("Собираем интерфейс...");Tt(r,q,E=>t(7,s=E));let j=Pn(void 0);Tt(r,j,E=>t(5,n=E));let L="default";const V={materials:Db(It),effects:Fb()};wn(()=>{try{L=new URL(location.href).searchParams.get("skin")??L,t(1,w=new ub({block:g,frame:_,meme:d,busy:q,previews:U,error:j},R,c,h,L,V)),new Kd(I,R,d,_,g,A,V.effects),m&&zr().then(()=>fetch(m)).then(E=>E.blob()).then(E=>w.openMeme(E))}catch(E){Aa(j,n=E,n)}return()=>w.clear()});let C=null;function F(){w&&w.copyFrameToClipboard().catch(E=>{if(E instanceof da)t(4,C=E.blob);else throw E})}function b(E){C=E,t(4,C)}function K(E){o=E,d.set(o)}function pe(E){a=E,_.set(a)}function W(E){l=E,g.set(l)}function he(E){u=E,A.set(u)}function re(E){I=E,t(3,I)}function Ee(E){R=E,t(2,R)}function X(E){f=E,U.set(f)}const Z=E=>w==null?void 0:w.openMeme(E.detail.file),ee=()=>{var E;return(E=w==null?void 0:w.exportMeme())==null?void 0:E.then(ys("meme.meme"))},te=()=>{var E;return(E=w==null?void 0:w.renderMeme())==null?void 0:E.then(({ext:G,blob:ae})=>ys(`meme.${G}`)(ae))},me=E=>w==null?void 0:w.setBackground(E.detail.file),Le=E=>w==null?void 0:w.cloneBlock(E.detail.block),Oe=E=>{var G;return w==null?void 0:w.addTextBlock((G=E.detail)==null?void 0:G.origin)},Pe=E=>w==null?void 0:w.addImageBlock(E.detail.file),ze=E=>w==null?void 0:w.modifyImageBlock(E.detail.block,E.detail.file),Be=E=>w==null?void 0:w.shiftBlock(E.detail.block,E.detail.shift),Ve=E=>w==null?void 0:w.deleteBlock(E.detail.block),it=E=>{var G;return w==null?void 0:w.addFrame((G=E.detail)==null?void 0:G.origin)},at=E=>w==null?void 0:w.shiftFrame(E.detail.frame,E.detail.shift),v=E=>w==null?void 0:w.deleteFrame(E.detail.frame),ie=E=>w==null?void 0:w.framesFromImages(E.detail.files),Y=E=>w==null?void 0:w.addPattern(E.detail.name,E.detail.image);function N(E){i=E,ws.set(i)}return r.$$set=E=>{"patternUrls"in E&&t(22,c=E.patternUrls),"placeholdersUrls"in E&&t(23,h=E.placeholdersUrls),"memeURL"in E&&t(24,m=E.memeURL),"memeExampleURL"in E&&t(0,p=E.memeExampleURL)},[p,w,R,I,C,n,i,s,o,a,l,u,f,d,_,g,A,U,q,j,V,F,c,h,m,b,K,pe,W,he,re,Ee,X,Z,ee,te,me,Le,Oe,Pe,ze,Be,Ve,it,at,v,ie,Y,N]}class Wb extends we{constructor(e){super(),ye(this,e,jb,Hb,$e,{patternUrls:22,placeholdersUrls:23,memeURL:24,memeExampleURL:0},null,[-1,-1])}}const Vb=""+new URL("../assets/docs.382a62e4.meme",import.meta.url).href,qb=""+new URL("../assets/checkered.07b41575.webp",import.meta.url).href,Zb=""+new URL("../assets/debug.ca573084.webp",import.meta.url).href,Xb=""+new URL("../assets/fire.f2d0e917.webp",import.meta.url).href,Kb=""+new URL("../assets/glitter-gold.b5c4520e.webp",import.meta.url).href,Yb=""+new URL("../assets/rainbow.3197970b.webp",import.meta.url).href,Jb=""+new URL("../assets/stars.049cd9a5.webp",import.meta.url).href,Qb=""+new URL("../assets/1.fc1781c3.webp",import.meta.url).href,ev=""+new URL("../assets/1.474db116.webp",import.meta.url).href,tv=""+new URL("../assets/2.4b45e6c9.webp",import.meta.url).href,nv=""+new URL("../assets/3.c55e7f6b.webp",import.meta.url).href,rv=""+new URL("../assets/4.730aa954.webp",import.meta.url).href,iv=""+new URL("../assets/5.dff970cb.webp",import.meta.url).href,sv=""+new URL("../assets/6.3c784f8d.webp",import.meta.url).href,ov=""+new URL("../assets/7.8ab2f8dc.webp",import.meta.url).href,av=""+new URL("../assets/1.949784d4.webp",import.meta.url).href,lv=""+new URL("../assets/1.11d6ce27.webp",import.meta.url).href,uv=""+new URL("../assets/2.97d5dc7d.webp",import.meta.url).href,fv=""+new URL("../assets/3.e8249041.webp",import.meta.url).href,cv=""+new URL("../assets/4.94ed153e.webp",import.meta.url).href,hv=""+new URL("../assets/5.843b6f84.webp",import.meta.url).href,mv=""+new URL("../assets/6.056d0cf4.webp",import.meta.url).href,dv=""+new URL("../assets/7.6fc2d0f6.webp",import.meta.url).href;function pv([r,e]){const t=r.split("/");let n=t[t.length-1];return n=n.slice(0,n.lastIndexOf(".")),{name:n,url:e}}function _v(r){return Object.entries(r).map(pv)}const gv=_v(Object.assign({"/src/lib/resources/patterns/checkered.png":qb,"/src/lib/resources/patterns/debug.png":Zb,"/src/lib/resources/patterns/fire.png":Xb,"/src/lib/resources/patterns/glitter-gold.jpg":Kb,"/src/lib/resources/patterns/rainbow.png":Yb,"/src/lib/resources/patterns/stars.png":Jb})),Xr=Object.entries(Object.assign({"/src/lib/resources/placeholders/default/await/1.png":Qb,"/src/lib/resources/placeholders/default/empty/1.png":ev,"/src/lib/resources/placeholders/default/empty/2.png":tv,"/src/lib/resources/placeholders/default/empty/3.png":nv,"/src/lib/resources/placeholders/default/empty/4.png":rv,"/src/lib/resources/placeholders/default/empty/5.png":iv,"/src/lib/resources/placeholders/default/empty/6.png":sv,"/src/lib/resources/placeholders/default/empty/7.png":ov,"/src/lib/resources/placeholders/inside/await/1.png":av,"/src/lib/resources/placeholders/inside/empty/1.png":lv,"/src/lib/resources/placeholders/inside/empty/2.png":uv,"/src/lib/resources/placeholders/inside/empty/3.png":fv,"/src/lib/resources/placeholders/inside/empty/4.png":cv,"/src/lib/resources/placeholders/inside/empty/5.png":hv,"/src/lib/resources/placeholders/inside/empty/6.png":mv,"/src/lib/resources/placeholders/inside/empty/7.png":dv})).map(([r,e])=>{const t=/placeholders\//.exec(r);if(!t)throw Error(`Not found prefix 'placeholder' in '${r}''`);const n=t.index+t[0].length,i=r.substring(n),[s,o,a]=i.split("/"),l=a.slice(0,a.lastIndexOf("."));return{skin:s,category:o,name:l,url:e}}).reduce((r,e)=>(r[e.skin]=r[e.skin]??{},r[e.skin][e.category]=r[e.skin][e.category]??[],r[e.skin][e.category].push(e),r),{});if(!lb(Xr))throw Error(`Incorrect configuration: this is not skins map: ${JSON.stringify(Xr)}`);const Ds={patternUrls:gv,placeholdersUrls:Xr};function bv(r){let e,t;return e=new Wb({props:{patternUrls:Ds.patternUrls,placeholdersUrls:Ds.placeholdersUrls,memeExampleURL:Vb}}),{c(){P(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,i){M(e,n,i),t=!0},p:je,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}class yv extends we{constructor(e){super(),ye(this,e,null,bv,$e,{})}}export{yv as default};
